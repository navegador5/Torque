!function(Q,U){if("object"==typeof exports&&"object"==typeof module)module.exports=U();else if("function"==typeof define&&define.amd)define([],U);else{var F=U();for(var B in F)("object"==typeof exports?exports:Q)[B]=F[B]}}(window,(function(){return function(Q){var U={};function F(B){if(U[B])return U[B].exports;var I=U[B]={i:B,l:!1,exports:{}};return Q[B].call(I.exports,I,I.exports,F),I.l=!0,I.exports}return F.m=Q,F.c=U,F.d=function(Q,U,B){F.o(Q,U)||Object.defineProperty(Q,U,{enumerable:!0,get:B})},F.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},F.t=function(Q,U){if(1&U&&(Q=F(Q)),8&U)return Q;if(4&U&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var B=Object.create(null);if(F.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:Q}),2&U&&"string"!=typeof Q)for(var I in Q)F.d(B,I,function(U){return Q[U]}.bind(null,I));return B},F.n=function(Q){var U=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return F.d(U,"a",U),U},F.o=function(Q,U){return Object.prototype.hasOwnProperty.call(Q,U)},F.p="",F(F.s=10)}([function(module,exports,__webpack_require__){"use strict";eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Util = void 0;\r\n// 常用工具函数\r\nexports.Util = {\r\n    _id: 0,\r\n    /**\r\n     * 生成一个id（整数类型）\r\n     */\r\n    id() {\r\n        return this._id++;\r\n    },\r\n    /**\r\n     * 根据两个id生成一个复合id（字符串类型）: 'id1.id2'\r\n     * @param id1\r\n     * @param id2\r\n     */\r\n    compositeId(id1, id2) {\r\n        if (id1 < id2) {\r\n            return id1 + '.' + id2;\r\n        }\r\n        else {\r\n            return id2 + '.' + id1;\r\n        }\r\n    },\r\n    /**\r\n     * 对象合并\r\n     * @param originOpt 源对象\r\n     * @param destOpt 目标对象\r\n     */\r\n    merge(originOpt, destOpt) {\r\n        if (!originOpt || !destOpt)\r\n            return;\r\n        for (let key in destOpt) {\r\n            if (typeof destOpt[key] === 'object' &&\r\n                !Array.isArray(destOpt[key]) &&\r\n                originOpt[key] !== null &&\r\n                originOpt[key] !== undefined) {\r\n                this.merge(originOpt[key], destOpt[key]);\r\n            }\r\n            else {\r\n                if ((destOpt[key] !== null || destOpt[key] !== undefined) && originOpt[key] !== undefined) {\r\n                    originOpt[key] = destOpt[key];\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * 对象扩展\r\n     * @param originOpt 源对象\r\n     * @param extendOpt 扩展对象\r\n     */\r\n    extend(originOpt, extendOpt) {\r\n        if (!originOpt || !extendOpt)\r\n            return;\r\n        for (let key in extendOpt) {\r\n            if (typeof extendOpt[key] === 'object' &&\r\n                !Array.isArray(extendOpt[key]) &&\r\n                originOpt[key] !== null &&\r\n                originOpt[key] !== undefined) {\r\n                this.extend(originOpt[key], extendOpt[key]);\r\n            }\r\n            else {\r\n                if (extendOpt[key] !== null || extendOpt[key] !== undefined)\r\n                    originOpt[key] = extendOpt[key];\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * 从列表移除某个元素\r\n     * @param list 列表\r\n     * @param item 要移除的元素\r\n     */\r\n    remove(list, item) {\r\n        list.splice(list.findIndex(i => i['id'] === item['id']), 1);\r\n    },\r\n    /**\r\n     * 角度转弧度\r\n     * @param angle 角度\r\n     */\r\n    angle2Radian(angle) {\r\n        return (angle / 180) * Math.PI;\r\n    },\r\n    /**\r\n     * 弧度转角度\r\n     * @param radian 弧度\r\n     */\r\n    radian2Angle(radian) {\r\n        return radian / Math.PI * 180;\r\n    },\r\n    /**\r\n     * 返回页面加载完毕开始到当前的时间（微秒级，performance api）\r\n     */\r\n    now() {\r\n        return window.performance.now();\r\n    },\r\n    /**\r\n     * 直接插入排序\r\n     * @param list 要排序的列表\r\n     * @param fn 比较函数\r\n     */\r\n    insertSort(list, fn) {\r\n        let len = list.length, i, j, temp;\r\n        for (i = 1; i < len; i++) {\r\n            temp = list[i];\r\n            for (j = i - 1; j >= 0 && fn(list[j], temp) > 0; j--) {\r\n                list[j + 1] = list[j];\r\n            }\r\n            list[j + 1] = temp;\r\n        }\r\n    },\r\n    /**\r\n     * 对给定的value，收窄在min和max范围内\r\n     * @param value\r\n     * @param min\r\n     * @param max\r\n     */\r\n    clamp(value, min, max) {\r\n        if (value < min)\r\n            return min;\r\n        if (value > max)\r\n            return max;\r\n        return value;\r\n    },\r\n    /**\r\n     * 返回一个数的正负号\r\n     * @param value\r\n     */\r\n    sign(value) {\r\n        return value < 0 ? -1 : 1;\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3V0aWwudHM/ZTg1YiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFPQSxTQUFTO0FBQ0ksWUFBSSxHQUFHO0lBQ2hCLEdBQUcsRUFBRSxDQUFDO0lBRU47O09BRUc7SUFDSCxFQUFFO1FBQ0UsT0FBTyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxXQUFXLENBQUMsR0FBVyxFQUFFLEdBQVc7UUFDaEMsSUFBSSxHQUFHLEdBQUcsR0FBRyxFQUFFO1lBQ1gsT0FBTyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztTQUMxQjthQUFNO1lBQ0gsT0FBTyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztTQUMxQjtJQUNMLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsS0FBSyxDQUFDLFNBQWlCLEVBQUUsT0FBZTtRQUNwQyxJQUFHLENBQUMsU0FBUyxJQUFJLENBQUMsT0FBTztZQUFFLE9BQU87UUFFbEMsS0FBSSxJQUFJLEdBQUcsSUFBSSxPQUFPLEVBQUU7WUFDcEIsSUFDSSxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxRQUFRO2dCQUNoQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUM1QixTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssSUFBSTtnQkFDdkIsU0FBUyxDQUFDLEdBQUcsQ0FBQyxLQUFLLFNBQVMsRUFDOUI7Z0JBQ0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDNUM7aUJBQ0k7Z0JBQ0QsSUFBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLFNBQVMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxHQUFHLENBQUMsS0FBSyxTQUFTLEVBQUU7b0JBQ3RGLFNBQVMsQ0FBQyxHQUFHLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7aUJBQ2pDO2FBQ0o7U0FDSjtJQUNMLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsTUFBTSxDQUFDLFNBQWlCLEVBQUUsU0FBaUI7UUFDdkMsSUFBRyxDQUFDLFNBQVMsSUFBSSxDQUFDLFNBQVM7WUFBRSxPQUFPO1FBRXBDLEtBQUksSUFBSSxHQUFHLElBQUksU0FBUyxFQUFFO1lBQ3RCLElBQ0ksT0FBTyxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssUUFBUTtnQkFDbEMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDOUIsU0FBUyxDQUFDLEdBQUcsQ0FBQyxLQUFLLElBQUk7Z0JBQ3ZCLFNBQVMsQ0FBQyxHQUFHLENBQUMsS0FBSyxTQUFTLEVBQzlCO2dCQUNFLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2FBQy9DO2lCQUNJO2dCQUNELElBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxLQUFLLElBQUksSUFBSSxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssU0FBUztvQkFDdEQsU0FBUyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUN2QztTQUNKO0lBQ0wsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxNQUFNLENBQUksSUFBUyxFQUFFLElBQU87UUFDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2hFLENBQUM7SUFHRDs7O09BR0c7SUFDSCxZQUFZLENBQUMsS0FBYTtRQUN0QixPQUFPLENBQUMsS0FBSyxHQUFDLEdBQUcsQ0FBQyxHQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVEOzs7T0FHRztJQUNILFlBQVksQ0FBQyxNQUFjO1FBQ3ZCLE9BQU8sTUFBTSxHQUFDLElBQUksQ0FBQyxFQUFFLEdBQUMsR0FBRyxDQUFDO0lBQzlCLENBQUM7SUFFRDs7T0FFRztJQUNILEdBQUc7UUFDQyxPQUFPLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxVQUFVLENBQUksSUFBUyxFQUFFLEVBQStCO1FBQ3BELElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ2pCLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDO1FBRWYsS0FBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDckIsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNmLEtBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDakQsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDekI7WUFDRCxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztTQUN0QjtJQUNMLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILEtBQUssQ0FBQyxLQUFhLEVBQUUsR0FBVyxFQUFFLEdBQVc7UUFDekMsSUFBSSxLQUFLLEdBQUcsR0FBRztZQUNYLE9BQU8sR0FBRyxDQUFDO1FBQ2YsSUFBSSxLQUFLLEdBQUcsR0FBRztZQUNYLE9BQU8sR0FBRyxDQUFDO1FBQ2YsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVEOzs7T0FHRztJQUNILElBQUksQ0FBQyxLQUFhO1FBQ2QsT0FBTyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlCLENBQUM7Q0FDSiIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG50eXBlIE9wdGlvbiA9IHtcclxuICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxufTtcclxuXHJcblxyXG4vLyDluLjnlKjlt6Xlhbflh73mlbBcclxuZXhwb3J0IGNvbnN0IFV0aWwgPSB7XHJcbiAgICBfaWQ6IDAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/miJDkuIDkuKppZO+8iOaVtOaVsOexu+Wei++8iVxyXG4gICAgICovXHJcbiAgICBpZCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pZCsrO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNruS4pOS4qmlk55Sf5oiQ5LiA5Liq5aSN5ZCIaWTvvIjlrZfnrKbkuLLnsbvlnovvvIk6ICdpZDEuaWQyJ1xyXG4gICAgICogQHBhcmFtIGlkMSBcclxuICAgICAqIEBwYXJhbSBpZDIgXHJcbiAgICAgKi9cclxuICAgIGNvbXBvc2l0ZUlkKGlkMTogbnVtYmVyLCBpZDI6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGlkMSA8IGlkMikge1xyXG4gICAgICAgICAgICByZXR1cm4gaWQxICsgJy4nICsgaWQyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZDIgKyAnLicgKyBpZDE7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWvueixoeWQiOW5tlxyXG4gICAgICogQHBhcmFtIG9yaWdpbk9wdCDmupDlr7nosaFcclxuICAgICAqIEBwYXJhbSBkZXN0T3B0IOebruagh+WvueixoVxyXG4gICAgICovXHJcbiAgICBtZXJnZShvcmlnaW5PcHQ6IE9wdGlvbiwgZGVzdE9wdDogT3B0aW9uKSB7XHJcbiAgICAgICAgaWYoIW9yaWdpbk9wdCB8fCAhZGVzdE9wdCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBmb3IobGV0IGtleSBpbiBkZXN0T3B0KSB7XHJcbiAgICAgICAgICAgIGlmKFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIGRlc3RPcHRba2V5XSA9PT0gJ29iamVjdCcgJiYgXHJcbiAgICAgICAgICAgICAgICAhQXJyYXkuaXNBcnJheShkZXN0T3B0W2tleV0pICYmIFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luT3B0W2tleV0gIT09IG51bGwgJiYgXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5PcHRba2V5XSAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXJnZShvcmlnaW5PcHRba2V5XSwgZGVzdE9wdFtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmKChkZXN0T3B0W2tleV0gIT09IG51bGwgfHwgZGVzdE9wdFtrZXldICE9PSB1bmRlZmluZWQpICYmIG9yaWdpbk9wdFtrZXldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5PcHRba2V5XSA9IGRlc3RPcHRba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7nosaHmianlsZVcclxuICAgICAqIEBwYXJhbSBvcmlnaW5PcHQg5rqQ5a+56LGhXHJcbiAgICAgKiBAcGFyYW0gZXh0ZW5kT3B0IOaJqeWxleWvueixoVxyXG4gICAgICovXHJcbiAgICBleHRlbmQob3JpZ2luT3B0OiBPcHRpb24sIGV4dGVuZE9wdDogT3B0aW9uKSB7XHJcbiAgICAgICAgaWYoIW9yaWdpbk9wdCB8fCAhZXh0ZW5kT3B0KSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvcihsZXQga2V5IGluIGV4dGVuZE9wdCkge1xyXG4gICAgICAgICAgICBpZihcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBleHRlbmRPcHRba2V5XSA9PT0gJ29iamVjdCcgJiYgXHJcbiAgICAgICAgICAgICAgICAhQXJyYXkuaXNBcnJheShleHRlbmRPcHRba2V5XSkgJiYgXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5PcHRba2V5XSAhPT0gbnVsbCAmJiBcclxuICAgICAgICAgICAgICAgIG9yaWdpbk9wdFtrZXldICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZChvcmlnaW5PcHRba2V5XSwgZXh0ZW5kT3B0W2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYoZXh0ZW5kT3B0W2tleV0gIT09IG51bGwgfHwgZXh0ZW5kT3B0W2tleV0gIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5PcHRba2V5XSA9IGV4dGVuZE9wdFtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOS7juWIl+ihqOenu+mZpOafkOS4quWFg+e0oFxyXG4gICAgICogQHBhcmFtIGxpc3Qg5YiX6KGoXHJcbiAgICAgKiBAcGFyYW0gaXRlbSDopoHnp7vpmaTnmoTlhYPntKBcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlPFQ+KGxpc3Q6IFRbXSwgaXRlbTogVCkge1xyXG4gICAgICAgIGxpc3Quc3BsaWNlKGxpc3QuZmluZEluZGV4KGkgPT4gaVsnaWQnXSA9PT0gaXRlbVsnaWQnXSksIDEpO1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDop5LluqbovazlvKfluqZcclxuICAgICAqIEBwYXJhbSBhbmdsZSDop5LluqZcclxuICAgICAqL1xyXG4gICAgYW5nbGUyUmFkaWFuKGFuZ2xlOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAoYW5nbGUvMTgwKSpNYXRoLlBJO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOW8p+W6pui9rOinkuW6plxyXG4gICAgICogQHBhcmFtIHJhZGlhbiDlvKfluqZcclxuICAgICAqL1xyXG4gICAgcmFkaWFuMkFuZ2xlKHJhZGlhbjogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gcmFkaWFuL01hdGguUEkqMTgwO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOi/lOWbnumhtemdouWKoOi9veWujOavleW8gOWni+WIsOW9k+WJjeeahOaXtumXtO+8iOW+ruenkue6p++8jHBlcmZvcm1hbmNlIGFwae+8iVxyXG4gICAgICovXHJcbiAgICBub3coKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOebtOaOpeaPkuWFpeaOkuW6j1xyXG4gICAgICogQHBhcmFtIGxpc3Qg6KaB5o6S5bqP55qE5YiX6KGoXHJcbiAgICAgKiBAcGFyYW0gZm4g5q+U6L6D5Ye95pWwXHJcbiAgICAgKi9cclxuICAgIGluc2VydFNvcnQ8VD4obGlzdDogVFtdLCBmbjogKHByZXY6IFQsIGN1cjogVCkgPT4gbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGxlbiA9IGxpc3QubGVuZ3RoLFxyXG4gICAgICAgICAgICBpLCBqLCB0ZW1wO1xyXG5cclxuICAgICAgICBmb3IoaSA9IDE7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICB0ZW1wID0gbGlzdFtpXTtcclxuICAgICAgICAgICAgZm9yKGogPSBpIC0gMTsgaiA+PSAwICYmIGZuKGxpc3Rbal0sIHRlbXApID4gMDsgai0tKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0W2ogKyAxXSA9IGxpc3Rbal07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGlzdFtqICsgMV0gPSB0ZW1wO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7nnu5nlrprnmoR2YWx1Ze+8jOaUtueqhOWcqG1pbuWSjG1heOiMg+WbtOWGhVxyXG4gICAgICogQHBhcmFtIHZhbHVlIFxyXG4gICAgICogQHBhcmFtIG1pbiBcclxuICAgICAqIEBwYXJhbSBtYXggXHJcbiAgICAgKi9cclxuICAgIGNsYW1wKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKHZhbHVlIDwgbWluKVxyXG4gICAgICAgICAgICByZXR1cm4gbWluO1xyXG4gICAgICAgIGlmICh2YWx1ZSA+IG1heClcclxuICAgICAgICAgICAgcmV0dXJuIG1heDtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6L+U5Zue5LiA5Liq5pWw55qE5q2j6LSf5Y+3XHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgXHJcbiAgICAgKi9cclxuICAgIHNpZ24odmFsdWU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgMCA/IC0xIDogMTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports._tempVector4 = exports._tempVector3 = exports._tempVector2 = exports._tempVector1 = exports.Vector = void 0;\r\n// 二维向量 {x, y}\r\nclass Vector {\r\n    constructor(x, y) {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        if (x !== undefined && y !== undefined) {\r\n            this.set(x, y);\r\n        }\r\n    }\r\n    //-------------操作----------------\r\n    /**\r\n     * 设置值\r\n     * @param x\r\n     * @param y\r\n     */\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    /**\r\n     * 相加\r\n     * @param v\r\n     */\r\n    add(v, out) {\r\n        out = out || new Vector();\r\n        out.x = this.x + v.x;\r\n        out.y = this.y + v.y;\r\n        return out;\r\n    }\r\n    /**\r\n     * 相减\r\n     * @param v\r\n     */\r\n    sub(v, out) {\r\n        out = out || new Vector();\r\n        out.x = this.x - v.x;\r\n        out.y = this.y - v.y;\r\n        return out;\r\n    }\r\n    /**\r\n     * 点积\r\n     * @param v\r\n     */\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y;\r\n    }\r\n    /**\r\n     * 叉积\r\n     * @param v\r\n     */\r\n    cro(v) {\r\n        return this.x * v.y - v.x * this.y;\r\n    }\r\n    /**\r\n     * 与标量进行叉积\r\n     * @param n\r\n     */\r\n    croNum(n, out) {\r\n        out = out || new Vector();\r\n        out.x = -n * this.y;\r\n        out.y = n * this.x;\r\n        return out;\r\n    }\r\n    /**\r\n     * 投影\r\n     * @param v\r\n     */\r\n    pro(v) {\r\n        return this.dot(v) / v.len();\r\n    }\r\n    /**\r\n     * 法向\r\n     */\r\n    nor(out) {\r\n        out = out || new Vector();\r\n        out.x = -this.y;\r\n        out.y = this.x;\r\n        return out;\r\n    }\r\n    /**\r\n     * 求模\r\n     */\r\n    len() {\r\n        return Math.hypot(this.x, this.y);\r\n    }\r\n    /**\r\n     * 平方模（节省求平方根操作）\r\n     */\r\n    len_s() {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n    /**\r\n     * 单位化\r\n     */\r\n    nol() {\r\n        let len = this.len();\r\n        if (len === 0) {\r\n            return new Vector();\r\n        }\r\n        this.x = this.x / len;\r\n        this.y = this.y / len;\r\n        return this;\r\n    }\r\n    /**\r\n     * 缩放\r\n     * @param n\r\n     */\r\n    scl(n, out) {\r\n        out = out || new Vector();\r\n        out.x = n * this.x;\r\n        out.y = n * this.y;\r\n        return out;\r\n    }\r\n    /**\r\n     * 反向\r\n     */\r\n    inv(out) {\r\n        out = out || new Vector();\r\n        out.x = -this.x;\r\n        out.y = -this.y;\r\n        return out;\r\n    }\r\n    /**\r\n     * 判断两向量是否相等\r\n     * @param v\r\n     */\r\n    eql(v) {\r\n        return this.x === v.x && this.y === v.y;\r\n    }\r\n    /**\r\n     * 求两向量夹角(弧度制)\r\n     * @param v\r\n     */\r\n    ang(v) {\r\n        return Math.acos(this.dot(v) / (this.len() * v.len()));\r\n    }\r\n    /**\r\n     * 克隆向量\r\n     */\r\n    col() {\r\n        return new Vector(this.x, this.y);\r\n    }\r\n    /**\r\n     * 绕某点旋转向量\r\n     * @param radian 角度（弧度制）\r\n     * @param point 绕的点\r\n     */\r\n    rot(radian, point, out) {\r\n        point = point || new Vector();\r\n        out = out || new Vector();\r\n        let cos = Math.cos(radian), sin = Math.sin(radian), dx = this.x - point.x, dy = this.y - point.y;\r\n        out.x = point.x + (dx * cos - dy * sin);\r\n        out.y = point.y + (dx * sin + dy * cos);\r\n        return out;\r\n    }\r\n    /**\r\n     * 求一个向量（点）按照direction方向，延长len长度后的坐标\r\n     * @param direction\r\n     * @param len\r\n     */\r\n    loc(direction, len, out) {\r\n        out = out || new Vector();\r\n        direction = direction.nol();\r\n        out.x = this.x + direction.x * len;\r\n        out.y = this.y + direction.y * len;\r\n        return out;\r\n    }\r\n}\r\nexports.Vector = Vector;\r\n;\r\nexports._tempVector1 = new Vector();\r\nexports._tempVector2 = new Vector();\r\nexports._tempVector3 = new Vector();\r\nexports._tempVector4 = new Vector();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWF0aC92ZWN0b3IudHM/ZGQxMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSxjQUFjO0FBQ2QsTUFBYSxNQUFNO0lBSWYsWUFBWSxDQUFVLEVBQUUsQ0FBVTtRQUM5QixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNYLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRVgsSUFBRyxDQUFDLEtBQUssU0FBUyxJQUFJLENBQUMsS0FBSyxTQUFTLEVBQUU7WUFDbkMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDbEI7SUFDTCxDQUFDO0lBRUQsaUNBQWlDO0lBRWpDOzs7O09BSUc7SUFDSCxHQUFHLENBQUMsQ0FBUyxFQUFFLENBQVM7UUFDcEIsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDWCxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNmLENBQUM7SUFFRDs7O09BR0c7SUFDSCxHQUFHLENBQUMsQ0FBUyxFQUFFLEdBQVk7UUFDdkIsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLE1BQU0sRUFBRSxDQUFDO1FBRTFCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXJCLE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQztJQUVEOzs7T0FHRztJQUNILEdBQUcsQ0FBQyxDQUFTLEVBQUUsR0FBWTtRQUN2QixHQUFHLEdBQUcsR0FBRyxJQUFJLElBQUksTUFBTSxFQUFFLENBQUM7UUFFMUIsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckIsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFckIsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsR0FBRyxDQUFDLENBQVM7UUFDVCxPQUFPLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVEOzs7T0FHRztJQUNILEdBQUcsQ0FBQyxDQUFTO1FBQ1QsT0FBTyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFFRDs7O09BR0c7SUFDSCxNQUFNLENBQUMsQ0FBUyxFQUFFLEdBQVk7UUFDMUIsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLE1BQU0sRUFBRSxDQUFDO1FBRTFCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNwQixHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBRW5CLE9BQU8sR0FBRyxDQUFDO0lBRWYsQ0FBQztJQUVEOzs7T0FHRztJQUNILEdBQUcsQ0FBQyxDQUFTO1FBQ1QsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxHQUFHLENBQUMsR0FBWTtRQUNaLEdBQUcsR0FBRyxHQUFHLElBQUksSUFBSSxNQUFNLEVBQUUsQ0FBQztRQUUxQixHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNoQixHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFZixPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFFRDs7T0FFRztJQUNILEdBQUc7UUFDQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSztRQUNELE9BQU8sSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxHQUFHO1FBQ0MsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRXJCLElBQUcsR0FBRyxLQUFLLENBQUMsRUFBRTtZQUNWLE9BQU8sSUFBSSxNQUFNLEVBQUUsQ0FBQztTQUN2QjtRQUVELElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDdEIsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUV0QixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsR0FBRyxDQUFDLENBQVMsRUFBRSxHQUFZO1FBQ3ZCLEdBQUcsR0FBRyxHQUFHLElBQUksSUFBSSxNQUFNLEVBQUUsQ0FBQztRQUMxQixHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ25CLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDbkIsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0lBRUQ7O09BRUc7SUFDSCxHQUFHLENBQUMsR0FBWTtRQUNaLEdBQUcsR0FBRyxHQUFHLElBQUksSUFBSSxNQUFNLEVBQUUsQ0FBQztRQUMxQixHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNoQixHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNoQixPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFFRDs7O09BR0c7SUFDSCxHQUFHLENBQUMsQ0FBUztRQUNULE9BQU8sSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsR0FBRyxDQUFDLENBQVM7UUFDVCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRDs7T0FFRztJQUNILEdBQUc7UUFDQyxPQUFPLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsR0FBRyxDQUFDLE1BQWMsRUFBRSxLQUFhLEVBQUUsR0FBWTtRQUMzQyxLQUFLLEdBQUcsS0FBSyxJQUFJLElBQUksTUFBTSxFQUFFLENBQUM7UUFDOUIsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLE1BQU0sRUFBRSxDQUFDO1FBRTFCLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQ3RCLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUN0QixFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxFQUNyQixFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBRTFCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBRXhDLE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxHQUFHLENBQUMsU0FBaUIsRUFBRSxHQUFXLEVBQUUsR0FBWTtRQUM1QyxHQUFHLEdBQUcsR0FBRyxJQUFJLElBQUksTUFBTSxFQUFFLENBQUM7UUFFMUIsU0FBUyxHQUFHLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM1QixHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDbkMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBRW5DLE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQztDQUNKO0FBak5ELHdCQWlOQztBQUFBLENBQUM7QUFHVyxvQkFBWSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7QUFDNUIsb0JBQVksR0FBRyxJQUFJLE1BQU0sRUFBRSxDQUFDO0FBQzVCLG9CQUFZLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztBQUM1QixvQkFBWSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUMiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuLy8g5LqM57u05ZCR6YePIHt4LCB5fVxyXG5leHBvcnQgY2xhc3MgVmVjdG9yIHtcclxuICAgIHB1YmxpYyB4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgeTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHg/OiBudW1iZXIsIHk/OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnggPSAwO1xyXG4gICAgICAgIHRoaXMueSA9IDA7XHJcblxyXG4gICAgICAgIGlmKHggIT09IHVuZGVmaW5lZCAmJiB5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXQoeCwgeSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLeaTjeS9nC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruWAvFxyXG4gICAgICogQHBhcmFtIHggXHJcbiAgICAgKiBAcGFyYW0geSBcclxuICAgICAqL1xyXG4gICAgc2V0KHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog55u45YqgXHJcbiAgICAgKiBAcGFyYW0gdiBcclxuICAgICAqL1xyXG4gICAgYWRkKHY6IFZlY3Rvciwgb3V0PzogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICBvdXQgPSBvdXQgfHwgbmV3IFZlY3RvcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG91dC54ID0gdGhpcy54ICsgdi54O1xyXG4gICAgICAgIG91dC55ID0gdGhpcy55ICsgdi55O1xyXG5cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog55u45YePXHJcbiAgICAgKiBAcGFyYW0gdiBcclxuICAgICAqL1xyXG4gICAgc3ViKHY6IFZlY3Rvciwgb3V0PzogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICBvdXQgPSBvdXQgfHwgbmV3IFZlY3RvcigpO1xyXG4gICAgICAgXHJcbiAgICAgICAgb3V0LnggPSB0aGlzLnggLSB2Lng7XHJcbiAgICAgICAgb3V0LnkgPSB0aGlzLnkgLSB2Lnk7XHJcblxyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDngrnnp69cclxuICAgICAqIEBwYXJhbSB2IFxyXG4gICAgICovXHJcbiAgICBkb3QodjogVmVjdG9yKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y+J56evXHJcbiAgICAgKiBAcGFyYW0gdiBcclxuICAgICAqL1xyXG4gICAgY3JvKHY6IFZlY3Rvcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueCAqIHYueSAtIHYueCAqIHRoaXMueTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS4juagh+mHj+i/m+ihjOWPieenr1xyXG4gICAgICogQHBhcmFtIG5cclxuICAgICAqL1xyXG4gICAgY3JvTnVtKG46IG51bWJlciwgb3V0PzogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICBvdXQgPSBvdXQgfHwgbmV3IFZlY3RvcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG91dC54ID0gLW4gKiB0aGlzLnk7XHJcbiAgICAgICAgb3V0LnkgPSBuICogdGhpcy54O1xyXG5cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmipXlvbFcclxuICAgICAqIEBwYXJhbSB2IFxyXG4gICAgICovXHJcbiAgICBwcm8odjogVmVjdG9yKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kb3QodikgLyB2LmxlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rOV5ZCRXHJcbiAgICAgKi9cclxuICAgIG5vcihvdXQ/OiBWZWN0b3IpOiBWZWN0b3Ige1xyXG4gICAgICAgIG91dCA9IG91dCB8fCBuZXcgVmVjdG9yKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgb3V0LnggPSAtdGhpcy55O1xyXG4gICAgICAgIG91dC55ID0gdGhpcy54O1xyXG5cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rGC5qihXHJcbiAgICAgKi9cclxuICAgIGxlbigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmh5cG90KHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOW5s+aWueaooe+8iOiKguecgeaxguW5s+aWueagueaTjeS9nO+8iVxyXG4gICAgICovXHJcbiAgICBsZW5fcygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDljZXkvY3ljJZcclxuICAgICAqL1xyXG4gICAgbm9sKCk6IFZlY3RvciB7XHJcbiAgICAgICAgbGV0IGxlbiA9IHRoaXMubGVuKCk7XHJcblxyXG4gICAgICAgIGlmKGxlbiA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy54ID0gdGhpcy54IC8gbGVuO1xyXG4gICAgICAgIHRoaXMueSA9IHRoaXMueSAvIGxlbjtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnvKnmlL5cclxuICAgICAqIEBwYXJhbSBuXHJcbiAgICAgKi9cclxuICAgIHNjbChuOiBudW1iZXIsIG91dD86IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgb3V0ID0gb3V0IHx8IG5ldyBWZWN0b3IoKTtcclxuICAgICAgICBvdXQueCA9IG4gKiB0aGlzLng7XHJcbiAgICAgICAgb3V0LnkgPSBuICogdGhpcy55O1xyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlj43lkJFcclxuICAgICAqL1xyXG4gICAgaW52KG91dD86IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgb3V0ID0gb3V0IHx8IG5ldyBWZWN0b3IoKTtcclxuICAgICAgICBvdXQueCA9IC10aGlzLng7XHJcbiAgICAgICAgb3V0LnkgPSAtdGhpcy55O1xyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3kuKTlkJHph4/mmK/lkKbnm7jnrYlcclxuICAgICAqIEBwYXJhbSB2IFxyXG4gICAgICovXHJcbiAgICBlcWwodjogVmVjdG9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueCA9PT0gdi54ICYmIHRoaXMueSA9PT0gdi55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rGC5Lik5ZCR6YeP5aS56KeSKOW8p+W6puWItilcclxuICAgICAqIEBwYXJhbSB2IFxyXG4gICAgICovXHJcbiAgICBhbmcodjogVmVjdG9yKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5hY29zKHRoaXMuZG90KHYpIC8gKHRoaXMubGVuKCkgKiB2LmxlbigpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhYvpmoblkJHph49cclxuICAgICAqL1xyXG4gICAgY29sKCk6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog57uV5p+Q54K55peL6L2s5ZCR6YePXHJcbiAgICAgKiBAcGFyYW0gcmFkaWFuIOinkuW6pu+8iOW8p+W6puWItu+8iVxyXG4gICAgICogQHBhcmFtIHBvaW50IOe7leeahOeCuVxyXG4gICAgICovXHJcbiAgICByb3QocmFkaWFuOiBudW1iZXIsIHBvaW50OiBWZWN0b3IsIG91dD86IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgcG9pbnQgPSBwb2ludCB8fCBuZXcgVmVjdG9yKCk7XHJcbiAgICAgICAgb3V0ID0gb3V0IHx8IG5ldyBWZWN0b3IoKTtcclxuXHJcbiAgICAgICAgbGV0IGNvcyA9IE1hdGguY29zKHJhZGlhbiksXHJcbiAgICAgICAgICAgIHNpbiA9IE1hdGguc2luKHJhZGlhbiksXHJcbiAgICAgICAgICAgIGR4ID0gdGhpcy54IC0gcG9pbnQueCxcclxuICAgICAgICAgICAgZHkgPSB0aGlzLnkgLSBwb2ludC55O1xyXG5cclxuICAgICAgICBvdXQueCA9IHBvaW50LnggKyAoZHggKiBjb3MgLSBkeSAqIHNpbik7XHJcbiAgICAgICAgb3V0LnkgPSBwb2ludC55ICsgKGR4ICogc2luICsgZHkgKiBjb3MpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmsYLkuIDkuKrlkJHph4/vvIjngrnvvInmjInnhadkaXJlY3Rpb27mlrnlkJHvvIzlu7bplb9sZW7plb/luqblkI7nmoTlnZDmoIdcclxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb25cclxuICAgICAqIEBwYXJhbSBsZW4gXHJcbiAgICAgKi9cclxuICAgIGxvYyhkaXJlY3Rpb246IFZlY3RvciwgbGVuOiBudW1iZXIsIG91dD86IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgb3V0ID0gb3V0IHx8IG5ldyBWZWN0b3IoKTtcclxuXHJcbiAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLm5vbCgpO1xyXG4gICAgICAgIG91dC54ID0gdGhpcy54ICsgZGlyZWN0aW9uLnggKiBsZW47XHJcbiAgICAgICAgb3V0LnkgPSB0aGlzLnkgKyBkaXJlY3Rpb24ueSAqIGxlbjtcclxuXHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgX3RlbXBWZWN0b3IxID0gbmV3IFZlY3RvcigpO1xyXG5leHBvcnQgY29uc3QgX3RlbXBWZWN0b3IyID0gbmV3IFZlY3RvcigpO1xyXG5leHBvcnQgY29uc3QgX3RlbXBWZWN0b3IzID0gbmV3IFZlY3RvcigpO1xyXG5leHBvcnQgY29uc3QgX3RlbXBWZWN0b3I0ID0gbmV3IFZlY3RvcigpO1xyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Vertices = exports.Poly = void 0;\r\nconst vector_1 = __webpack_require__(1);\r\nconst line_1 = __webpack_require__(5);\r\nconst bound_1 = __webpack_require__(6);\r\nconst util_1 = __webpack_require__(0);\r\n// 一个顶点信息包\r\nclass Poly {\r\n    constructor(body, vertexList) {\r\n        this.id = util_1.Util.id();\r\n        this.body = body;\r\n        this.vertexList = vertexList;\r\n        this.axes = exports.Vertices.getAxes(vertexList);\r\n        this.center = exports.Vertices.getCenter(vertexList);\r\n        this.bound = exports.Vertices.getBound(vertexList);\r\n    }\r\n}\r\nexports.Poly = Poly;\r\n;\r\n// 顶点操作工具\r\nexports.Vertices = {\r\n    /**\r\n     * 创造顶点信息包\r\n     * @param body 顶点所属的刚体\r\n     * @param vertices 顶点集\r\n     */\r\n    create(body, vertexList) {\r\n        return new Poly(body, vertexList);\r\n    },\r\n    /**\r\n     * 获取多边形中心点\r\n     * @param vertexList\r\n     */\r\n    getCenter(vertexList) {\r\n        let range = this.getRange(vertexList), centerX = (range.max.x + range.min.x) / 2, centerY = (range.max.y + range.min.y) / 2;\r\n        return new vector_1.Vector(centerX, centerY);\r\n    },\r\n    /**\r\n     * 获取多边形质心\r\n     * @param vertexList\r\n     */\r\n    getCentroid(vertexList) {\r\n        let area = this.getArea(vertexList), centroid = new vector_1.Vector(0, 0), cross = 0, temp, j;\r\n        for (let i = 0; i < vertexList.length; i++) {\r\n            j = (i + 1) % vertexList.length;\r\n            cross = vertexList[i].cro(vertexList[j]);\r\n            temp = vertexList[i].add(vertexList[j]).scl(cross);\r\n            centroid.add(temp, centroid);\r\n        }\r\n        return centroid.scl(1 / (6 * area), centroid);\r\n    },\r\n    /**\r\n     * 获取多边形面积\r\n     * @param vertexList\r\n     */\r\n    getArea(vertexList) {\r\n        let area = 0, j = vertexList.length - 1;\r\n        for (let i = 0; i < vertexList.length; i++) {\r\n            area += (vertexList[j].x - vertexList[i].x) * (vertexList[j].y + vertexList[i].y);\r\n            j = i;\r\n        }\r\n        return area / 2;\r\n    },\r\n    /**\r\n     * 获取多边形的转动惯量\r\n     * 公式来自：https://blog.csdn.net/weixin_34194702/article/details/93587529\r\n     * @param vertexList\r\n     * @param mass 质量\r\n     * @param position\r\n     */\r\n    getInertia(vertexList, mass, position) {\r\n        let numerator = 0, denominator = 0, v = vertexList, cur, next, cross;\r\n        for (let n = 0; n < v.length; n++) {\r\n            cur = v[n].sub(position, cur);\r\n            next = v[(n + 1) % v.length].sub(position, next);\r\n            cross = Math.abs(cur.cro(next));\r\n            numerator += cross * (cur.dot(cur) + cur.dot(next) + next.dot(next));\r\n            denominator += cross;\r\n        }\r\n        return (mass / 6) * (numerator / denominator);\r\n    },\r\n    /**\r\n     * 求顶点围成的所有面\r\n     * @param vertexList\r\n     */\r\n    getEdge(vertexList) {\r\n        let edges = [], v = vertexList, j;\r\n        for (let i = 0; i < v.length; i++) {\r\n            j = (i + 1) % v.length;\r\n            edges.push([v[i], v[j]]);\r\n        }\r\n        return edges;\r\n    },\r\n    /**\r\n     * 求顶点围成的所有面的轴\r\n     * @param vertexList\r\n     */\r\n    getAxes(vertexList) {\r\n        let edges = this.getEdge(vertexList), edgeVector = null, axes = [];\r\n        for (let i = 0; i < edges.length; i++) {\r\n            edgeVector = edges[i][1].sub(edges[i][0]);\r\n            axes.push(edgeVector.nor().nol());\r\n        }\r\n        return axes;\r\n    },\r\n    /**\r\n     * 获取顶点集的范围\r\n     * @param vertexList\r\n     */\r\n    getRange(vertexList) {\r\n        let xList = vertexList.map(v => v.x), yList = vertexList.map(v => v.y);\r\n        return {\r\n            min: new vector_1.Vector(Math.min.apply(Math, xList), Math.min.apply(Math, yList)),\r\n            max: new vector_1.Vector(Math.max.apply(Math, xList), Math.max.apply(Math, yList))\r\n        };\r\n    },\r\n    /**\r\n     * 获取顶点集形成的包围盒\r\n     * @param vertexList\r\n     */\r\n    getBound(vertexList) {\r\n        let range = exports.Vertices.getRange(vertexList);\r\n        return new bound_1.Bound(range.min, range.max);\r\n    },\r\n    /**\r\n     * 使用斜率筛去共线的轴\r\n     * @param axes 要筛选的轴\r\n     */\r\n    uniqueAxes(axes) {\r\n        let axis, tmpAxes = [], axesTable = {}, i, gradient;\r\n        for (i = 0; i < axes.length; i++) {\r\n            axis = axes[i];\r\n            gradient = (axis.y === 0) ? Infinity : (axis.x / axis.y);\r\n            // 限制精度\r\n            gradient = gradient.toFixed(3).toString();\r\n            axesTable[gradient] = axis;\r\n        }\r\n        Object.keys(axesTable).map(item => {\r\n            tmpAxes.push(axesTable[item]);\r\n        });\r\n        return tmpAxes;\r\n    },\r\n    /**\r\n     * 旋转顶点\r\n     * @param poly 多边形\r\n     * @param radian 弧度\r\n     * @param point 绕点\r\n     */\r\n    rotate(poly, radian, point) {\r\n        let vertexList = poly.vertexList, axes = poly.axes, i;\r\n        // 转动顶点\r\n        for (i = 0; i < vertexList.length; i++) {\r\n            vertexList[i].rot(radian, point, vertexList[i]);\r\n        }\r\n        // 转动轴\r\n        for (i = 0; i < axes.length; i++) {\r\n            axes[i].rot(radian, null, axes[i]);\r\n        }\r\n        // 更新几何中心\r\n        poly.center.rot(radian, point, poly.center);\r\n        // 更新包围盒\r\n        poly.bound.update(poly.vertexList);\r\n    },\r\n    /**\r\n     * 位移顶点\r\n     * @param poly 多边形\r\n     * @param distance 位移向量\r\n     */\r\n    translate(poly, distance) {\r\n        let v = poly.vertexList, i;\r\n        // 位移顶点\r\n        for (i = 0; i < v.length; i++) {\r\n            v[i].x += distance.x;\r\n            v[i].y += distance.y;\r\n        }\r\n        poly.center.x += distance.x;\r\n        poly.center.y += distance.y;\r\n        // 位移包围盒\r\n        poly.bound.translate(distance);\r\n    },\r\n    /**\r\n     * 将凹多边形分解为多个子凸多边形\r\n     * @param poly\r\n     */\r\n    divide(poly) {\r\n        // 将拆分出来的多边形保存到这个数组\r\n        let parts = [], v = poly.vertexList.slice(0), partA, partB, vertexListA, vertexListB, axes = poly.axes.slice(0), axesA, axesB, xAxis, vTest, vDiv, dividePointA, dividePointB, len = v.length, i, j, cur, next, next2, flag = false;\r\n        for (i = 0; i < len; i++) {\r\n            cur = i;\r\n            next = (i + 1) % len;\r\n            next2 = (i + 2) % len;\r\n            xAxis = v[next].sub(v[cur]);\r\n            vTest = v[next2].sub(v[cur]);\r\n            if (xAxis.cro(vTest) < 0) {\r\n                for (j = i + 3; j < len; j++) {\r\n                    vDiv = v[j].sub(v[cur]);\r\n                    if (xAxis.cro(vDiv) > 0) {\r\n                        flag = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (flag)\r\n                    break;\r\n            }\r\n        }\r\n        // 获取两个分割点\r\n        dividePointA = v[next],\r\n            dividePointB = v[j];\r\n        // 拆分为两个多边形vertexListA和vertexListB\r\n        vertexListB = v.splice(next2, j - next2);\r\n        vertexListA = v;\r\n        vertexListB.unshift(dividePointA);\r\n        vertexListB.push(dividePointB);\r\n        axesB = axes.splice(next, j - next);\r\n        axesA = axes;\r\n        partA = exports.Vertices.create(poly.body, vertexListA);\r\n        partB = exports.Vertices.create(poly.body, vertexListB);\r\n        partA.axes = axesA;\r\n        partB.axes = axesB;\r\n        // 检测拆分出来的两个多边形是否是凹多边形，若果是，继续递归拆分\r\n        if (this.isConcave(vertexListA)) {\r\n            parts.push(...this.divide(partA));\r\n        }\r\n        else {\r\n            parts.push(partA);\r\n        }\r\n        if (this.isConcave(vertexListB)) {\r\n            parts.push(...this.divide(partB));\r\n        }\r\n        else {\r\n            parts.push(partB);\r\n        }\r\n        return parts;\r\n    },\r\n    /**\r\n     * 将多边形分割为多个小三角形\r\n     * 作用：分割成多个小三角形后，对每个小三角形生成包围盒，在碰撞检测可以遍历小三角形，进行包围盒相交检测，\r\n     * 可以过滤掉多边形没有发生碰撞的部分，大大提升性能\r\n     * 参考：https://blog.csdn.net/zzq61974/article/details/87635763\r\n     * @param poly\r\n     */\r\n    decomposition(poly) {\r\n        let v = poly.vertexList, \r\n        // 当前正在切割的顶点\r\n        curClipVertex = v.slice(0), \r\n        // 保存所有凹点\r\n        caves = [], \r\n        // 当前顶点下标\r\n        curVertexIndex, \r\n        // 上一个顶点的下标\r\n        prevVertexIndex, \r\n        // 下一个顶点的下标\r\n        nextVertexIndex, \r\n        // 当前顶点\r\n        curVertex, \r\n        // 上一个点\r\n        prevVertex, \r\n        // 下一个点\r\n        nextVertex, \r\n        // 顶点集\r\n        vertexList = [], \r\n        // 轴集\r\n        axes = [], \r\n        // 小三角形集\r\n        parts = [], part = null, i;\r\n        // 若该图形顶点小于等于5，不用分割\r\n        if (curClipVertex.length <= 5)\r\n            return [poly];\r\n        // 获取凹点\r\n        caves = this.findCaves(v);\r\n        while (true) {\r\n            // 3个顶点才能构成一个三角形，小于3个顶点说明分割完毕，退出\r\n            if (curClipVertex.length < 3)\r\n                break;\r\n            // 寻找切割点\r\n            for (i = 1; i < curClipVertex.length; i++) {\r\n                curVertexIndex = i;\r\n                prevVertexIndex = i - 1;\r\n                nextVertexIndex = (i + 1) % curClipVertex.length;\r\n                curVertex = curClipVertex[curVertexIndex];\r\n                prevVertex = curClipVertex[prevVertexIndex];\r\n                nextVertex = curClipVertex[nextVertexIndex];\r\n                // 选取顶点\r\n                vertexList = [prevVertex, curVertex, nextVertex];\r\n                // 若当前图形没有凹点（凸多边形）或若当前顶点不是凹点并且当前三角形不包含凹点，则取用\r\n                if (caves.length === 0 ||\r\n                    (caves.indexOf(curVertex) < 0 && !caves.some(point => this.isContains(vertexList, point)))) {\r\n                    break;\r\n                }\r\n                ;\r\n            }\r\n            // 若上一个顶点和当前顶点形成的边不穿过原多边形中（即上一个顶点和当前顶点形成的边是原多边形的一条边）\r\n            // 那么取其边和轴\r\n            if (!line_1.Lines.isIntersectWithVertices([prevVertex, curVertex], v)) {\r\n                axes.push(poly.axes[prevVertexIndex]);\r\n            }\r\n            // 与上面同理\r\n            if (!line_1.Lines.isIntersectWithVertices([curVertex, nextVertex], v)) {\r\n                axes.push(poly.axes[curVertexIndex]);\r\n            }\r\n            // 与上面同理\r\n            if (!line_1.Lines.isIntersectWithVertices([prevVertex, nextVertex], v)) {\r\n                axes.push(poly.axes[nextVertexIndex]);\r\n            }\r\n            part = exports.Vertices.create(poly.body, vertexList);\r\n            part.axes = axes;\r\n            parts.push(part);\r\n            // 在图形中移除一个分割点\r\n            curClipVertex.splice(curVertexIndex, 1);\r\n            vertexList = [];\r\n            axes = [];\r\n        }\r\n        return parts;\r\n    },\r\n    /**\r\n     * 求两顶点围成的多边形的交点\r\n     * 由于在本引擎中，相交的只会是两个凸多边形，所以相交点数量上限为2个，到达两个便return\r\n     * @param edges1\r\n     * @param edges2\r\n     */\r\n    intersection(edges1, edges2) {\r\n        // 待剪辑顶点集\r\n        let intersectPoint = [], i, j;\r\n        for (i = 0; i < edges1.length; i++) {\r\n            for (j = 0; j < edges2.length; j++) {\r\n                if (line_1.Lines.isIntersect(edges1[i], edges2[j])) {\r\n                    intersectPoint.push(line_1.Lines.intersection(edges1[i], edges2[j]));\r\n                    // 求得2个交点时就返回\r\n                    if (intersectPoint.length >= 2)\r\n                        return intersectPoint;\r\n                }\r\n            }\r\n        }\r\n        return intersectPoint;\r\n    },\r\n    /**\r\n     * 判断是否包含顶点（射线法）\r\n     * 参考：https://www.cnblogs.com/anningwang/p/7581545.html\r\n     * @param vertexList\r\n     * @param point 检测的顶点\r\n     */\r\n    isContains(vertexList, point) {\r\n        let v = vertexList, i, j, len = vertexList.length, flag = false;\r\n        for (i = 0, j = len - 1; i < len; j = i++) {\r\n            if (v[i].eql(point))\r\n                return false;\r\n            if (((v[i].y > point.y) != (v[j].y > point.y))\r\n                && (point.x < (v[j].x - v[i].x) * (point.y - v[i].y) / (v[j].y - v[i].y) + v[i].x))\r\n                flag = !flag;\r\n        }\r\n        return flag;\r\n    },\r\n    /**\r\n     * 判断是否为凹多边形\r\n     * @param vertexList\r\n     */\r\n    isConcave(vertexList) {\r\n        let v = vertexList, \r\n        // 上两向量间的叉积\r\n        prevCor, \r\n        // 当前两向量的叉积\r\n        curCor, \r\n        // 上一顶点到当前顶点的向量\r\n        prev2Cur, \r\n        // 当前顶点到下一顶点的向量\r\n        cur2Next, len = v.length, i, j, k;\r\n        for (i = 1; i < len; i++) {\r\n            j = i - 1;\r\n            k = (i + 1) % len;\r\n            prev2Cur = v[i].sub(v[j]);\r\n            cur2Next = v[k].sub(v[i]);\r\n            // 计算向量叉积\r\n            curCor = prev2Cur.cro(cur2Next) >= 0 ? 1 : -1;\r\n            if (prevCor !== undefined && prevCor !== curCor) {\r\n                return true;\r\n            }\r\n            prevCor = curCor;\r\n        }\r\n        return false;\r\n    },\r\n    /**\r\n     * 转换到世界坐标\r\n     * @param point 参考点\r\n     * @param vertexList\r\n     */\r\n    transform2World(point, vertexList) {\r\n        return vertexList.map(v => v.add(point, v));\r\n    },\r\n    /**\r\n     * 转换到本地坐标\r\n     * @param point 参考点\r\n     * @param vertexList\r\n     */\r\n    transform2Local(point, vertexList) {\r\n        return vertexList.map(v => v.sub(point, v));\r\n    },\r\n    /**\r\n     * 求多边形在某个轴的投影\r\n     * @param vertexList\r\n     * @param axis 投影轴\r\n     */\r\n    projection(vertexList, axis) {\r\n        let projectionRange = vertexList.map(v => v.pro(axis));\r\n        return {\r\n            min: Math.min.apply(Math, projectionRange),\r\n            max: Math.max.apply(Math, projectionRange)\r\n        };\r\n    },\r\n    /**\r\n     * 计算顶点集中离给定点最近的顶点\r\n     * @param point 给定点\r\n     * @param vertexList 顶点集\r\n     */\r\n    getClosestVertex(point, vertexList) {\r\n        let v = vertexList, i, min = Infinity, length, index, len = v.length;\r\n        for (i = 0; i < len; i++) {\r\n            length = v[i].sub(point).len();\r\n            if (length < min) {\r\n                min = length;\r\n                index = i;\r\n            }\r\n        }\r\n        return vertexList[index];\r\n    },\r\n    /**\r\n     * 寻找顶点集中所有凹点\r\n     * @param vertexList\r\n     */\r\n    findCaves(vertexList) {\r\n        let caves = [], v = vertexList, prevVertex, curVertex, nextVertex, len = v.length, i;\r\n        for (i = 1; i < len; i++) {\r\n            prevVertex = v[i - 1];\r\n            curVertex = v[i];\r\n            nextVertex = v[(i + 1) % len];\r\n            // 利用叉乘判断\r\n            if (curVertex.sub(prevVertex).cro(nextVertex.sub(curVertex)) < 0) {\r\n                caves.push(curVertex);\r\n            }\r\n        }\r\n        return caves;\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3ZlcnRpY2VzLnRzP2IwNWQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsd0NBQXdDO0FBQ3hDLHNDQUE0QztBQUM1Qyx1Q0FBMkM7QUFFM0Msc0NBQThCO0FBTTlCLFVBQVU7QUFDVixNQUFhLElBQUk7SUFTYixZQUFZLElBQVUsRUFBRSxVQUFzQjtRQUMxQyxJQUFJLENBQUMsRUFBRSxHQUFHLFdBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsSUFBSSxHQUFHLGdCQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxNQUFNLEdBQUcsZ0JBQVEsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLEtBQUssR0FBRyxnQkFBUSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUMvQyxDQUFDO0NBQ0o7QUFqQkQsb0JBaUJDO0FBQUEsQ0FBQztBQUtGLFNBQVM7QUFDSSxnQkFBUSxHQUFHO0lBRXBCOzs7O09BSUc7SUFDSCxNQUFNLENBQUMsSUFBVSxFQUFFLFVBQXNCO1FBQ3JDLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRDs7O09BR0c7SUFDSCxTQUFTLENBQUMsVUFBc0I7UUFDNUIsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsRUFDakMsT0FBTyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQ3pDLE9BQU8sR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxH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R0FBRyxFQUFFO2dCQUNiLEdBQUcsR0FBRyxNQUFNLENBQUM7Z0JBQ2IsS0FBSyxHQUFHLENBQUMsQ0FBQzthQUNiO1NBQ0o7UUFFRCxPQUFPLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsU0FBUyxDQUFDLFVBQXNCO1FBQzVCLElBQUksS0FBSyxHQUFHLEVBQUUsRUFDVixDQUFDLEdBQUcsVUFBVSxFQUNkLFVBQVUsRUFDVixTQUFTLEVBQ1QsVUFBVSxFQUNWLEdBQUcsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUNkLENBQUMsQ0FBQztRQUVOLEtBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3JCLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakIsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztZQUU5QixTQUFTO1lBQ1QsSUFBRyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUM3RCxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQ3pCO1NBQ0o7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0NBQ0oiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBMaW5lcywgTGluZVNlZ21lbnQgfSBmcm9tIFwiLi9saW5lXCI7XHJcbmltcG9ydCB7IEJvdW5kIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9ib3VuZFwiO1xyXG5pbXBvcnQgeyBCb2R5IH0gZnJvbSBcIi4uL2JvZHkvYm9keVwiO1xyXG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4vdXRpbFwiO1xyXG5pbXBvcnQgeyBQb2x5Z29uIH0gZnJvbSBcIi4uL2JvZHkvcG9seWdvblwiO1xyXG5cclxuLy8g6aG254K55YiX6KGo57G75Z6LXHJcbmV4cG9ydCB0eXBlIFZlcnRleExpc3QgPSBBcnJheTxWZWN0b3I+O1xyXG5cclxuLy8g5LiA5Liq6aG254K55L+h5oGv5YyFXHJcbmV4cG9ydCBjbGFzcyBQb2x5IHtcclxuICAgIGlkOiBudW1iZXI7XHJcbiAgICB2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0O1xyXG4gICAgYXhlczogVmVjdG9yW107XHJcbiAgICBib2R5OiBCb2R5O1xyXG4gICAgYm91bmQ6IEJvdW5kO1xyXG4gICAgaXNDb25jYXZlOiBib29sZWFuO1xyXG4gICAgY2VudGVyOiBWZWN0b3I7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYm9keTogQm9keSwgdmVydGV4TGlzdDogVmVydGV4TGlzdCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBVdGlsLmlkKCk7XHJcbiAgICAgICAgdGhpcy5ib2R5ID0gYm9keTtcclxuICAgICAgICB0aGlzLnZlcnRleExpc3QgPSB2ZXJ0ZXhMaXN0O1xyXG4gICAgICAgIHRoaXMuYXhlcyA9IFZlcnRpY2VzLmdldEF4ZXModmVydGV4TGlzdCk7XHJcbiAgICAgICAgdGhpcy5jZW50ZXIgPSBWZXJ0aWNlcy5nZXRDZW50ZXIodmVydGV4TGlzdCk7XHJcbiAgICAgICAgdGhpcy5ib3VuZCA9IFZlcnRpY2VzLmdldEJvdW5kKHZlcnRleExpc3QpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcblxyXG5cclxuLy8g6aG254K55pON5L2c5bel5YW3XHJcbmV4cG9ydCBjb25zdCBWZXJ0aWNlcyA9IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIm+mAoOmhtueCueS/oeaBr+WMhVxyXG4gICAgICogQHBhcmFtIGJvZHkg6aG254K55omA5bGe55qE5Yia5L2TXHJcbiAgICAgKiBAcGFyYW0gdmVydGljZXMg6aG254K56ZuGXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZShib2R5OiBCb2R5LCB2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogUG9seSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5KGJvZHksIHZlcnRleExpc3QpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluWkmui+ueW9ouS4reW/g+eCuVxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGdldENlbnRlcih2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogVmVjdG9yIHtcclxuICAgICAgICBsZXQgcmFuZ2UgPSB0aGlzLmdldFJhbmdlKHZlcnRleExpc3QpLFxyXG4gICAgICAgICAgICBjZW50ZXJYID0gKHJhbmdlLm1heC54ICsgcmFuZ2UubWluLngpIC8gMixcclxuICAgICAgICAgICAgY2VudGVyWSA9IChyYW5nZS5tYXgueSArIHJhbmdlLm1pbi55KSAvIDI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoY2VudGVyWCwgY2VudGVyWSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5aSa6L655b2i6LSo5b+DXHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCBcclxuICAgICAqL1xyXG4gICAgZ2V0Q2VudHJvaWQodmVydGV4TGlzdDogVmVydGV4TGlzdCk6IFZlY3RvciB7XHJcbiAgICAgICAgbGV0IGFyZWEgPSB0aGlzLmdldEFyZWEodmVydGV4TGlzdCksXHJcbiAgICAgICAgICAgIGNlbnRyb2lkID0gbmV3IFZlY3RvcigwLCAwKSxcclxuICAgICAgICAgICAgY3Jvc3MgPSAwLFxyXG4gICAgICAgICAgICB0ZW1wLFxyXG4gICAgICAgICAgICBqO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRleExpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaiA9IChpICsgMSkgJSB2ZXJ0ZXhMaXN0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY3Jvc3MgPSB2ZXJ0ZXhMaXN0W2ldLmNybyh2ZXJ0ZXhMaXN0W2pdKTtcclxuICAgICAgICAgICAgdGVtcCA9IHZlcnRleExpc3RbaV0uYWRkKHZlcnRleExpc3Rbal0pLnNjbChjcm9zcyk7XHJcbiAgICAgICAgICAgIGNlbnRyb2lkLmFkZCh0ZW1wLCBjZW50cm9pZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2VudHJvaWQuc2NsKDEgLyAoNiAqIGFyZWEpLCBjZW50cm9pZCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5aSa6L655b2i6Z2i56evXHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCBcclxuICAgICAqL1xyXG4gICAgZ2V0QXJlYSh2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgYXJlYSA9IDAsXHJcbiAgICAgICAgICAgIGogPSB2ZXJ0ZXhMaXN0Lmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2ZXJ0ZXhMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZWEgKz0gKHZlcnRleExpc3Rbal0ueCAtIHZlcnRleExpc3RbaV0ueCkqKHZlcnRleExpc3Rbal0ueSArIHZlcnRleExpc3RbaV0ueSk7XHJcbiAgICAgICAgICAgIGogPSBpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGFyZWEvMjtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blpJrovrnlvaLnmoTovazliqjmg6/ph49cclxuICAgICAqIOWFrOW8j+adpeiHqu+8mmh0dHBzOi8vYmxvZy5jc2RuLm5ldC93ZWl4aW5fMzQxOTQ3MDIvYXJ0aWNsZS9kZXRhaWxzLzkzNTg3NTI5XHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCBcclxuICAgICAqIEBwYXJhbSBtYXNzIOi0qOmHj1xyXG4gICAgICogQHBhcmFtIHBvc2l0aW9uXHJcbiAgICAgKi9cclxuICAgIGdldEluZXJ0aWEodmVydGV4TGlzdDogVmVydGV4TGlzdCwgbWFzczogbnVtYmVyLCBwb3NpdGlvbjogVmVjdG9yKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgbnVtZXJhdG9yID0gMCxcclxuICAgICAgICAgICAgZGVub21pbmF0b3IgPSAwLFxyXG4gICAgICAgICAgICB2ID0gdmVydGV4TGlzdCxcclxuICAgICAgICAgICAgY3VyLCBuZXh0LFxyXG4gICAgICAgICAgICBjcm9zcztcclxuXHJcbiAgICAgICAgZm9yKGxldCBuID0gMDsgbiA8IHYubGVuZ3RoOyBuKyspIHtcclxuICAgICAgICAgICAgY3VyID0gdltuXS5zdWIocG9zaXRpb24sIGN1cik7XHJcbiAgICAgICAgICAgIG5leHQgPSB2WyhuICsgMSkgJSB2Lmxlbmd0aF0uc3ViKHBvc2l0aW9uLCBuZXh0KTtcclxuXHJcbiAgICAgICAgICAgIGNyb3NzID0gTWF0aC5hYnMoY3VyLmNybyhuZXh0KSk7XHJcbiAgICAgICAgICAgIG51bWVyYXRvciArPSBjcm9zcyAqIChjdXIuZG90KGN1cikgKyBjdXIuZG90KG5leHQpICsgbmV4dC5kb3QobmV4dCkpO1xyXG4gICAgICAgICAgICBkZW5vbWluYXRvciArPSBjcm9zcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAobWFzcyAvIDYpICogKG51bWVyYXRvciAvIGRlbm9taW5hdG9yKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmsYLpobbngrnlm7TmiJDnmoTmiYDmnInpnaJcclxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhMaXN0IFxyXG4gICAgICovXHJcbiAgICBnZXRFZGdlKHZlcnRleExpc3Q6IFZlcnRleExpc3QpOiBMaW5lU2VnbWVudFtdIHtcclxuICAgICAgICBsZXQgZWRnZXMgPSBbXSxcclxuICAgICAgICAgICAgdiA9IHZlcnRleExpc3QsXHJcbiAgICAgICAgICAgIGo7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGogPSAoaSArIDEpJXYubGVuZ3RoO1xyXG4gICAgICAgICAgICBlZGdlcy5wdXNoKFt2W2ldLCB2W2pdXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZWRnZXM7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rGC6aG254K55Zu05oiQ55qE5omA5pyJ6Z2i55qE6L20XHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCBcclxuICAgICAqL1xyXG4gICAgZ2V0QXhlcyh2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogVmVjdG9yW10ge1xyXG4gICAgICAgIGxldCBlZGdlcyA9IHRoaXMuZ2V0RWRnZSh2ZXJ0ZXhMaXN0KSxcclxuICAgICAgICAgICAgZWRnZVZlY3RvciA9IG51bGwsXHJcbiAgICAgICAgICAgIGF4ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGVkZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGVkZ2VWZWN0b3IgPSBlZGdlc1tpXVsxXS5zdWIoZWRnZXNbaV1bMF0pO1xyXG4gICAgICAgICAgICBheGVzLnB1c2goZWRnZVZlY3Rvci5ub3IoKS5ub2woKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXhlcztcclxuICAgIH0sICBcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlumhtueCuembhueahOiMg+WbtFxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGdldFJhbmdlKHZlcnRleExpc3Q6IFZlcnRleExpc3QpOiB7bWluOiBWZWN0b3IsIG1heDogVmVjdG9yfSB7XHJcbiAgICAgICAgbGV0IHhMaXN0ID0gdmVydGV4TGlzdC5tYXAodiA9PiB2LngpLFxyXG4gICAgICAgICAgICB5TGlzdCA9IHZlcnRleExpc3QubWFwKHYgPT4gdi55KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWluOiBuZXcgVmVjdG9yKE1hdGgubWluLmFwcGx5KE1hdGgsIHhMaXN0KSwgTWF0aC5taW4uYXBwbHkoTWF0aCwgeUxpc3QpKSxcclxuICAgICAgICAgICAgbWF4OiBuZXcgVmVjdG9yKE1hdGgubWF4LmFwcGx5KE1hdGgsIHhMaXN0KSwgTWF0aC5tYXguYXBwbHkoTWF0aCwgeUxpc3QpKVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlumhtueCuembhuW9ouaIkOeahOWMheWbtOebklxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGdldEJvdW5kKHZlcnRleExpc3Q6IFZlcnRleExpc3QpOiBCb3VuZCB7XHJcbiAgICAgICAgbGV0IHJhbmdlID0gVmVydGljZXMuZ2V0UmFuZ2UodmVydGV4TGlzdCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChyYW5nZS5taW4sIHJhbmdlLm1heCk7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS9v+eUqOaWnOeOh+etm+WOu+WFsee6v+eahOi9tFxyXG4gICAgICogQHBhcmFtIGF4ZXMg6KaB562b6YCJ55qE6L20XHJcbiAgICAgKi9cclxuICAgIHVuaXF1ZUF4ZXMoYXhlczogVmVjdG9yW10pOiBWZWN0b3JbXSB7XHJcbiAgICAgICAgbGV0IGF4aXMsXHJcbiAgICAgICAgICAgIHRtcEF4ZXMgPSBbXSxcclxuICAgICAgICAgICAgYXhlc1RhYmxlID0ge30sXHJcbiAgICAgICAgICAgIGksIGdyYWRpZW50O1xyXG5cclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBheGlzID0gYXhlc1tpXTtcclxuICAgICAgICAgICAgZ3JhZGllbnQgPSAoYXhpcy55ID09PSAwKSA/IEluZmluaXR5IDogKGF4aXMueCAvIGF4aXMueSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDpmZDliLbnsr7luqZcclxuICAgICAgICAgICAgZ3JhZGllbnQgPSBncmFkaWVudC50b0ZpeGVkKDMpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF4ZXNUYWJsZVtncmFkaWVudF0gPSBheGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgT2JqZWN0LmtleXMoYXhlc1RhYmxlKS5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRtcEF4ZXMucHVzaChheGVzVGFibGVbaXRlbV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdG1wQXhlcztcclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5peL6L2s6aG254K5XHJcbiAgICAgKiBAcGFyYW0gcG9seSDlpJrovrnlvaIgXHJcbiAgICAgKiBAcGFyYW0gcmFkaWFuIOW8p+W6plxyXG4gICAgICogQHBhcmFtIHBvaW50IOe7leeCuVxyXG4gICAgICovXHJcbiAgICByb3RhdGUocG9seTogUG9seSwgcmFkaWFuOiBudW1iZXIsIHBvaW50OiBWZWN0b3IpIHtcclxuICAgICAgICBsZXQgdmVydGV4TGlzdCA9IHBvbHkudmVydGV4TGlzdCxcclxuICAgICAgICAgICAgYXhlcyA9IHBvbHkuYXhlcyxcclxuICAgICAgICAgICAgaTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDovazliqjpobbngrlcclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCB2ZXJ0ZXhMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZlcnRleExpc3RbaV0ucm90KHJhZGlhbiwgcG9pbnQsIHZlcnRleExpc3RbaV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g6L2s5Yqo6L20XHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBheGVzW2ldLnJvdChyYWRpYW4sIG51bGwsIGF4ZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDmm7TmlrDlh6DkvZXkuK3lv4NcclxuICAgICAgICBwb2x5LmNlbnRlci5yb3QocmFkaWFuLCBwb2ludCwgcG9seS5jZW50ZXIpO1xyXG5cclxuICAgICAgICAvLyDmm7TmlrDljIXlm7Tnm5JcclxuICAgICAgICBwb2x5LmJvdW5kLnVwZGF0ZShwb2x5LnZlcnRleExpc3QpO1xyXG4gICAgfSwgIFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5L2N56e76aG254K5XHJcbiAgICAgKiBAcGFyYW0gcG9seSDlpJrovrnlvaIgXHJcbiAgICAgKiBAcGFyYW0gZGlzdGFuY2Ug5L2N56e75ZCR6YePXHJcbiAgICAgKi9cclxuICAgIHRyYW5zbGF0ZShwb2x5OiBQb2x5LCBkaXN0YW5jZTogVmVjdG9yKSB7XHJcbiAgICAgICAgbGV0IHY6IFZlcnRleExpc3QgPSBwb2x5LnZlcnRleExpc3QsIGk7XHJcblxyXG4gICAgICAgIC8vIOS9jeenu+mhtueCuVxyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IHYubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdltpXS54ICs9IGRpc3RhbmNlLng7XHJcbiAgICAgICAgICAgIHZbaV0ueSArPSBkaXN0YW5jZS55O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwb2x5LmNlbnRlci54ICs9IGRpc3RhbmNlLng7XHJcbiAgICAgICAgcG9seS5jZW50ZXIueSArPSBkaXN0YW5jZS55O1xyXG5cclxuICAgICAgICAvLyDkvY3np7vljIXlm7Tnm5JcclxuICAgICAgICBwb2x5LmJvdW5kLnRyYW5zbGF0ZShkaXN0YW5jZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bCG5Ye55aSa6L655b2i5YiG6Kej5Li65aSa5Liq5a2Q5Ye45aSa6L655b2iXHJcbiAgICAgKiBAcGFyYW0gcG9seVxyXG4gICAgICovXHJcbiAgICBkaXZpZGUocG9seTogUG9seSk6IFBvbHlbXSB7XHJcbiAgICAgICAgLy8g5bCG5ouG5YiG5Ye65p2l55qE5aSa6L655b2i5L+d5a2Y5Yiw6L+Z5Liq5pWw57uEXHJcbiAgICAgICAgbGV0IHBhcnRzID0gW10sXHJcbiAgICAgICAgICAgIHYgPSBwb2x5LnZlcnRleExpc3Quc2xpY2UoMCksXHJcbiAgICAgICAgICAgIHBhcnRBOiBQb2x5LCBcclxuICAgICAgICAgICAgcGFydEI6IFBvbHksXHJcbiAgICAgICAgICAgIHZlcnRleExpc3RBOiBWZWN0b3JbXSwgXHJcbiAgICAgICAgICAgIHZlcnRleExpc3RCOiBWZWN0b3JbXSxcclxuICAgICAgICAgICAgYXhlcyA9IHBvbHkuYXhlcy5zbGljZSgwKSxcclxuICAgICAgICAgICAgYXhlc0E6IFZlY3RvcltdLCBcclxuICAgICAgICAgICAgYXhlc0I6IFZlY3RvcltdLFxyXG4gICAgICAgICAgICB4QXhpczogVmVjdG9yLFxyXG4gICAgICAgICAgICB2VGVzdDogVmVjdG9yLFxyXG4gICAgICAgICAgICB2RGl2OiBWZWN0b3IsXHJcbiAgICAgICAgICAgIGRpdmlkZVBvaW50QTogVmVjdG9yLFxyXG4gICAgICAgICAgICBkaXZpZGVQb2ludEI6IFZlY3RvcixcclxuICAgICAgICAgICAgbGVuID0gdi5sZW5ndGgsIGksIGosIGN1ciwgbmV4dCwgbmV4dDIsIFxyXG4gICAgICAgICAgICBmbGFnID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGZvcihpID0gMCA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBjdXIgPSBpO1xyXG4gICAgICAgICAgICBuZXh0ID0gKGkgKyAxKSAlIGxlbjtcclxuICAgICAgICAgICAgbmV4dDIgPSAoaSArIDIpICUgbGVuO1xyXG5cclxuICAgICAgICAgICAgeEF4aXMgPSB2W25leHRdLnN1Yih2W2N1cl0pOyBcclxuICAgICAgICAgICAgdlRlc3QgPSB2W25leHQyXS5zdWIodltjdXJdKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHhBeGlzLmNybyh2VGVzdCkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IoaiA9IGkgKyAzOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2RGl2ID0gdltqXS5zdWIodltjdXJdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZih4QXhpcy5jcm8odkRpdikgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZmxhZykgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOiOt+WPluS4pOS4quWIhuWJsueCuVxyXG4gICAgICAgIGRpdmlkZVBvaW50QSA9IHZbbmV4dF0sXHJcbiAgICAgICAgZGl2aWRlUG9pbnRCID0gdltqXTtcclxuXHJcbiAgICAgICAgLy8g5ouG5YiG5Li65Lik5Liq5aSa6L655b2idmVydGV4TGlzdEHlkox2ZXJ0ZXhMaXN0QlxyXG4gICAgICAgIHZlcnRleExpc3RCID0gdi5zcGxpY2UobmV4dDIsIGogLSBuZXh0Mik7XHJcbiAgICAgICAgdmVydGV4TGlzdEEgPSB2O1xyXG4gICAgICAgIHZlcnRleExpc3RCLnVuc2hpZnQoZGl2aWRlUG9pbnRBKTtcclxuICAgICAgICB2ZXJ0ZXhMaXN0Qi5wdXNoKGRpdmlkZVBvaW50Qik7XHJcblxyXG4gICAgICAgIGF4ZXNCID0gYXhlcy5zcGxpY2UobmV4dCwgaiAtIG5leHQpO1xyXG4gICAgICAgIGF4ZXNBID0gYXhlcztcclxuXHJcbiAgICAgICAgcGFydEEgPSBWZXJ0aWNlcy5jcmVhdGUocG9seS5ib2R5LCB2ZXJ0ZXhMaXN0QSk7XHJcbiAgICAgICAgcGFydEIgPSBWZXJ0aWNlcy5jcmVhdGUocG9seS5ib2R5LCB2ZXJ0ZXhMaXN0Qik7XHJcbiAgICAgICAgcGFydEEuYXhlcyA9IGF4ZXNBO1xyXG4gICAgICAgIHBhcnRCLmF4ZXMgPSBheGVzQjtcclxuXHJcbiAgICAgICAgLy8g5qOA5rWL5ouG5YiG5Ye65p2l55qE5Lik5Liq5aSa6L655b2i5piv5ZCm5piv5Ye55aSa6L655b2i77yM6Iul5p6c5piv77yM57un57ut6YCS5b2S5ouG5YiGXHJcbiAgICAgICAgaWYodGhpcy5pc0NvbmNhdmUodmVydGV4TGlzdEEpKSB7XHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2goLi4udGhpcy5kaXZpZGUocGFydEEpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2gocGFydEEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5pc0NvbmNhdmUodmVydGV4TGlzdEIpKSB7XHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2goLi4udGhpcy5kaXZpZGUocGFydEIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2gocGFydEIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnRzO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWwhuWkmui+ueW9ouWIhuWJsuS4uuWkmuS4quWwj+S4ieinkuW9olxyXG4gICAgICog5L2c55So77ya5YiG5Ymy5oiQ5aSa5Liq5bCP5LiJ6KeS5b2i5ZCO77yM5a+55q+P5Liq5bCP5LiJ6KeS5b2i55Sf5oiQ5YyF5Zu055uS77yM5Zyo56Kw5pKe5qOA5rWL5Y+v5Lul6YGN5Y6G5bCP5LiJ6KeS5b2i77yM6L+b6KGM5YyF5Zu055uS55u45Lqk5qOA5rWL77yMXHJcbiAgICAgKiDlj6/ku6Xov4fmu6TmjonlpJrovrnlvaLmsqHmnInlj5HnlJ/norDmkp7nmoTpg6jliIbvvIzlpKflpKfmj5DljYfmgKfog71cclxuICAgICAqIOWPguiAg++8mmh0dHBzOi8vYmxvZy5jc2RuLm5ldC96enE2MTk3NC9hcnRpY2xlL2RldGFpbHMvODc2MzU3NjNcclxuICAgICAqIEBwYXJhbSBwb2x5XHJcbiAgICAgKi9cclxuICAgIGRlY29tcG9zaXRpb24ocG9seTogUG9seSk6IFBvbHlbXSB7XHJcbiAgICAgICAgbGV0IHYgPSBwb2x5LnZlcnRleExpc3QsXHJcbiAgICAgICAgICAgIC8vIOW9k+WJjeato+WcqOWIh+WJsueahOmhtueCuVxyXG4gICAgICAgICAgICBjdXJDbGlwVmVydGV4ID0gdi5zbGljZSgwKSxcclxuICAgICAgICAgICAgLy8g5L+d5a2Y5omA5pyJ5Ye554K5XHJcbiAgICAgICAgICAgIGNhdmVzOiBWZWN0b3JbXSA9IFtdLFxyXG4gICAgICAgICAgICAvLyDlvZPliY3pobbngrnkuIvmoIdcclxuICAgICAgICAgICAgY3VyVmVydGV4SW5kZXg6IG51bWJlcixcclxuICAgICAgICAgICAgLy8g5LiK5LiA5Liq6aG254K555qE5LiL5qCHXHJcbiAgICAgICAgICAgIHByZXZWZXJ0ZXhJbmRleDogbnVtYmVyLFxyXG4gICAgICAgICAgICAvLyDkuIvkuIDkuKrpobbngrnnmoTkuIvmoIdcclxuICAgICAgICAgICAgbmV4dFZlcnRleEluZGV4OiBudW1iZXIsXHJcbiAgICAgICAgICAgIC8vIOW9k+WJjemhtueCuVxyXG4gICAgICAgICAgICBjdXJWZXJ0ZXg6IFZlY3RvcixcclxuICAgICAgICAgICAgLy8g5LiK5LiA5Liq54K5XHJcbiAgICAgICAgICAgIHByZXZWZXJ0ZXg6IFZlY3RvcixcclxuICAgICAgICAgICAgLy8g5LiL5LiA5Liq54K5XHJcbiAgICAgICAgICAgIG5leHRWZXJ0ZXg6IFZlY3RvcixcclxuICAgICAgICAgICAgLy8g6aG254K56ZuGXHJcbiAgICAgICAgICAgIHZlcnRleExpc3Q6IFZlY3RvcltdID0gW10sXHJcbiAgICAgICAgICAgIC8vIOi9tOmbhlxyXG4gICAgICAgICAgICBheGVzOiBWZWN0b3JbXSA9IFtdLFxyXG4gICAgICAgICAgICAvLyDlsI/kuInop5LlvaLpm4ZcclxuICAgICAgICAgICAgcGFydHM6IFBvbHlbXSA9IFtdLFxyXG5cclxuICAgICAgICAgICAgcGFydDogUG9seSA9IG51bGwsXHJcblxyXG4gICAgICAgICAgICBpO1xyXG5cclxuICAgICAgICAvLyDoi6Xor6Xlm77lvaLpobbngrnlsI/kuo7nrYnkuo4177yM5LiN55So5YiG5YmyXHJcbiAgICAgICAgaWYoY3VyQ2xpcFZlcnRleC5sZW5ndGggPD0gNSkgcmV0dXJuIFtwb2x5XTtcclxuXHJcbiAgICAgICAgLy8g6I635Y+W5Ye554K5XHJcbiAgICAgICAgY2F2ZXMgPSB0aGlzLmZpbmRDYXZlcyh2KTtcclxuXHJcbiAgICAgICAgd2hpbGUodHJ1ZSkge1xyXG5cclxuICAgICAgICAgICAgLy8gM+S4qumhtueCueaJjeiDveaehOaIkOS4gOS4quS4ieinkuW9ou+8jOWwj+S6jjPkuKrpobbngrnor7TmmI7liIblibLlrozmr5XvvIzpgIDlh7pcclxuICAgICAgICAgICAgaWYoY3VyQ2xpcFZlcnRleC5sZW5ndGggPCAzKSBicmVhaztcclxuXHJcbiAgICAgICAgICAgIC8vIOWvu+aJvuWIh+WJsueCuVxyXG4gICAgICAgICAgICBmb3IoaSA9IDE7IGkgPCBjdXJDbGlwVmVydGV4Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJWZXJ0ZXhJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICBwcmV2VmVydGV4SW5kZXggPSBpIC0gMTtcclxuICAgICAgICAgICAgICAgIG5leHRWZXJ0ZXhJbmRleCA9IChpICsgMSklY3VyQ2xpcFZlcnRleC5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgY3VyVmVydGV4ID0gY3VyQ2xpcFZlcnRleFtjdXJWZXJ0ZXhJbmRleF07XHJcbiAgICAgICAgICAgICAgICBwcmV2VmVydGV4ID0gY3VyQ2xpcFZlcnRleFtwcmV2VmVydGV4SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgbmV4dFZlcnRleCA9IGN1ckNsaXBWZXJ0ZXhbbmV4dFZlcnRleEluZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDpgInlj5bpobbngrlcclxuICAgICAgICAgICAgICAgIHZlcnRleExpc3QgPSBbcHJldlZlcnRleCwgY3VyVmVydGV4LCBuZXh0VmVydGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDoi6XlvZPliY3lm77lvaLmsqHmnInlh7nngrnvvIjlh7jlpJrovrnlvaLvvInmiJboi6XlvZPliY3pobbngrnkuI3mmK/lh7nngrnlubbkuJTlvZPliY3kuInop5LlvaLkuI3ljIXlkKvlh7nngrnvvIzliJnlj5bnlKhcclxuICAgICAgICAgICAgICAgIGlmKFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdmVzLmxlbmd0aCA9PT0gMCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIChjYXZlcy5pbmRleE9mKGN1clZlcnRleCkgPCAwICYmICFjYXZlcy5zb21lKHBvaW50ID0+IHRoaXMuaXNDb250YWlucyh2ZXJ0ZXhMaXN0LCBwb2ludCkpKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDoi6XkuIrkuIDkuKrpobbngrnlkozlvZPliY3pobbngrnlvaLmiJDnmoTovrnkuI3nqb/ov4fljp/lpJrovrnlvaLkuK3vvIjljbPkuIrkuIDkuKrpobbngrnlkozlvZPliY3pobbngrnlvaLmiJDnmoTovrnmmK/ljp/lpJrovrnlvaLnmoTkuIDmnaHovrnvvIlcclxuICAgICAgICAgICAgLy8g6YKj5LmI5Y+W5YW26L655ZKM6L20XHJcbiAgICAgICAgICAgIGlmKCFMaW5lcy5pc0ludGVyc2VjdFdpdGhWZXJ0aWNlcyhbcHJldlZlcnRleCwgY3VyVmVydGV4XSwgdikpIHtcclxuICAgICAgICAgICAgICAgIGF4ZXMucHVzaChwb2x5LmF4ZXNbcHJldlZlcnRleEluZGV4XSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOS4juS4iumdouWQjOeQhlxyXG4gICAgICAgICAgICBpZighTGluZXMuaXNJbnRlcnNlY3RXaXRoVmVydGljZXMoW2N1clZlcnRleCwgbmV4dFZlcnRleF0sIHYpKSB7XHJcbiAgICAgICAgICAgICAgICBheGVzLnB1c2gocG9seS5heGVzW2N1clZlcnRleEluZGV4XSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOS4juS4iumdouWQjOeQhlxyXG4gICAgICAgICAgICBpZighTGluZXMuaXNJbnRlcnNlY3RXaXRoVmVydGljZXMoW3ByZXZWZXJ0ZXgsIG5leHRWZXJ0ZXhdLCB2KSkge1xyXG4gICAgICAgICAgICAgICAgYXhlcy5wdXNoKHBvbHkuYXhlc1tuZXh0VmVydGV4SW5kZXhdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcGFydCA9IFZlcnRpY2VzLmNyZWF0ZShwb2x5LmJvZHksIHZlcnRleExpc3QpXHJcbiAgICAgICAgICAgIHBhcnQuYXhlcyA9IGF4ZXM7XHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2gocGFydCk7XHJcblxyXG4gICAgICAgICAgICAvLyDlnKjlm77lvaLkuK3np7vpmaTkuIDkuKrliIblibLngrlcclxuICAgICAgICAgICAgY3VyQ2xpcFZlcnRleC5zcGxpY2UoY3VyVmVydGV4SW5kZXgsIDEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmVydGV4TGlzdCA9IFtdO1xyXG4gICAgICAgICAgICBheGVzID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcGFydHM7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaxguS4pOmhtueCueWbtOaIkOeahOWkmui+ueW9oueahOS6pOeCuVxyXG4gICAgICog55Sx5LqO5Zyo5pys5byV5pOO5Lit77yM55u45Lqk55qE5Y+q5Lya5piv5Lik5Liq5Ye45aSa6L655b2i77yM5omA5Lul55u45Lqk54K55pWw6YeP5LiK6ZmQ5Li6MuS4qu+8jOWIsOi+vuS4pOS4quS+v3JldHVyblxyXG4gICAgICogQHBhcmFtIGVkZ2VzMVxyXG4gICAgICogQHBhcmFtIGVkZ2VzMlxyXG4gICAgICovXHJcbiAgICBpbnRlcnNlY3Rpb24oZWRnZXMxOiBMaW5lU2VnbWVudFtdLCBlZGdlczI6IExpbmVTZWdtZW50W10pOiBWZWN0b3JbXSB7XHJcbiAgICAgICAgICAgIC8vIOW+heWJqui+kemhtueCuembhlxyXG4gICAgICAgIGxldCBpbnRlcnNlY3RQb2ludCA9IFtdLFxyXG4gICAgICAgICAgICBpLCBqO1xyXG5cclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBlZGdlczEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yKGogPSAwOyBqIDwgZWRnZXMyLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZihMaW5lcy5pc0ludGVyc2VjdChlZGdlczFbaV0sIGVkZ2VzMltqXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3RQb2ludC5wdXNoKExpbmVzLmludGVyc2VjdGlvbihlZGdlczFbaV0sIGVkZ2VzMltqXSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDmsYLlvpcy5Liq5Lqk54K55pe25bCx6L+U5ZueXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaW50ZXJzZWN0UG9pbnQubGVuZ3RoID49IDIpIHJldHVybiBpbnRlcnNlY3RQb2ludDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGludGVyc2VjdFBvaW50O1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreaYr+WQpuWMheWQq+mhtueCue+8iOWwhOe6v+azle+8iVxyXG4gICAgICog5Y+C6ICD77yaaHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYW5uaW5nd2FuZy9wLzc1ODE1NDUuaHRtbFxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKiBAcGFyYW0gcG9pbnQg5qOA5rWL55qE6aG254K5XHJcbiAgICAgKi9cclxuICAgIGlzQ29udGFpbnModmVydGV4TGlzdDogVmVydGV4TGlzdCwgcG9pbnQ6IFZlY3Rvcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCB2ID0gdmVydGV4TGlzdCxcclxuICAgICAgICAgICAgaSwgaiwgbGVuID0gdmVydGV4TGlzdC5sZW5ndGgsIFxyXG4gICAgICAgICAgICBmbGFnID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGZvcihpID0gMCwgaiA9IGxlbiAtIDE7IGkgPCBsZW47IGogPSBpKyspIHtcclxuICAgICAgICAgICAgaWYodltpXS5lcWwocG9pbnQpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZigoKHZbaV0ueSA+IHBvaW50LnkpICE9ICh2W2pdLnkgPiBwb2ludC55KSkgXHJcbiAgICAgICAgICAgICYmIChwb2ludC54IDwgKHZbal0ueCAtIHZbaV0ueCkqKHBvaW50LnkgLSB2W2ldLnkpLyh2W2pdLnkgLSB2W2ldLnkpICsgdltpXS54KSlcclxuICAgICAgICAgICAgICAgIGZsYWcgPSAhZmxhZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmbGFnO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreaYr+WQpuS4uuWHueWkmui+ueW9olxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGlzQ29uY2F2ZSh2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IHYgPSB2ZXJ0ZXhMaXN0LFxyXG4gICAgICAgICAgICAvLyDkuIrkuKTlkJHph4/pl7TnmoTlj4nnp69cclxuICAgICAgICAgICAgcHJldkNvciwgXHJcbiAgICAgICAgICAgIC8vIOW9k+WJjeS4pOWQkemHj+eahOWPieenr1xyXG4gICAgICAgICAgICBjdXJDb3IsXHJcbiAgICAgICAgICAgIC8vIOS4iuS4gOmhtueCueWIsOW9k+WJjemhtueCueeahOWQkemHj1xyXG4gICAgICAgICAgICBwcmV2MkN1cixcclxuICAgICAgICAgICAgLy8g5b2T5YmN6aG254K55Yiw5LiL5LiA6aG254K555qE5ZCR6YePXHJcbiAgICAgICAgICAgIGN1cjJOZXh0LFxyXG4gICAgICAgICAgICBsZW4gPSB2Lmxlbmd0aCwgXHJcbiAgICAgICAgICAgIGksIGosIGs7XHJcblxyXG4gICAgICAgIGZvcihpID0gMTsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGogPSBpIC0gMTtcclxuICAgICAgICAgICAgayA9IChpICsgMSklbGVuO1xyXG5cclxuICAgICAgICAgICAgcHJldjJDdXIgPSB2W2ldLnN1Yih2W2pdKTtcclxuICAgICAgICAgICAgY3VyMk5leHQgPSB2W2tdLnN1Yih2W2ldKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOiuoeeul+WQkemHj+WPieenr1xyXG4gICAgICAgICAgICBjdXJDb3IgPSBwcmV2MkN1ci5jcm8oY3VyMk5leHQpID49IDA/IDE6IC0xO1xyXG5cclxuICAgICAgICAgICAgaWYocHJldkNvciAhPT0gdW5kZWZpbmVkICYmIHByZXZDb3IgIT09IGN1ckNvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBwcmV2Q29yID0gY3VyQ29yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOi9rOaNouWIsOS4lueVjOWdkOagh1xyXG4gICAgICogQHBhcmFtIHBvaW50IOWPguiAg+eCuVxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIHRyYW5zZm9ybTJXb3JsZChwb2ludDogVmVjdG9yLCB2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogVmVydGV4TGlzdCB7XHJcbiAgICAgICAgcmV0dXJuIHZlcnRleExpc3QubWFwKHYgPT4gdi5hZGQocG9pbnQsIHYpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDovazmjaLliLDmnKzlnLDlnZDmoIdcclxuICAgICAqIEBwYXJhbSBwb2ludCDlj4LogIPngrlcclxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhMaXN0IFxyXG4gICAgICovXHJcbiAgICB0cmFuc2Zvcm0yTG9jYWwocG9pbnQ6IFZlY3RvciwgdmVydGV4TGlzdDogVmVydGV4TGlzdCk6IFZlcnRleExpc3Qge1xyXG4gICAgICAgIHJldHVybiB2ZXJ0ZXhMaXN0Lm1hcCh2ID0+IHYuc3ViKHBvaW50LCB2KSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rGC5aSa6L655b2i5Zyo5p+Q5Liq6L2055qE5oqV5b2xXHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCBcclxuICAgICAqIEBwYXJhbSBheGlzIOaKleW9sei9tFxyXG4gICAgICovXHJcbiAgICBwcm9qZWN0aW9uKHZlcnRleExpc3Q6IFZlcnRleExpc3QsIGF4aXM6IFZlY3Rvcik6IHttaW46IG51bWJlciwgbWF4OiBudW1iZXJ9IHtcclxuICAgICAgICBsZXQgcHJvamVjdGlvblJhbmdlID0gdmVydGV4TGlzdC5tYXAodiA9PiB2LnBybyhheGlzKSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1pbjogTWF0aC5taW4uYXBwbHkoTWF0aCwgcHJvamVjdGlvblJhbmdlKSxcclxuICAgICAgICAgICAgbWF4OiBNYXRoLm1heC5hcHBseShNYXRoLCBwcm9qZWN0aW9uUmFuZ2UpXHJcbiAgICAgICAgfTsgIFxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+mhtueCuembhuS4reemu+e7meWumueCueacgOi/keeahOmhtueCuVxyXG4gICAgICogQHBhcmFtIHBvaW50IOe7meWumueCuVxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3Qg6aG254K56ZuGXHJcbiAgICAgKi9cclxuICAgIGdldENsb3Nlc3RWZXJ0ZXgocG9pbnQ6IFZlY3RvciwgdmVydGV4TGlzdDogVmVydGV4TGlzdCk6IFZlY3RvciB7XHJcbiAgICAgICAgbGV0IHYgPSB2ZXJ0ZXhMaXN0LFxyXG4gICAgICAgICAgICBpLCBtaW4gPSBJbmZpbml0eSwgbGVuZ3RoLCBpbmRleCxcclxuICAgICAgICAgICAgbGVuID0gdi5sZW5ndGg7XHJcblxyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IHZbaV0uc3ViKHBvaW50KS5sZW4oKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGxlbmd0aCA8IG1pbikge1xyXG4gICAgICAgICAgICAgICAgbWluID0gbGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmVydGV4TGlzdFtpbmRleF07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a+75om+6aG254K56ZuG5Lit5omA5pyJ5Ye554K5XHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCBcclxuICAgICAqL1xyXG4gICAgZmluZENhdmVzKHZlcnRleExpc3Q6IFZlcnRleExpc3QpOiBWZWN0b3JbXSB7XHJcbiAgICAgICAgbGV0IGNhdmVzID0gW10sXHJcbiAgICAgICAgICAgIHYgPSB2ZXJ0ZXhMaXN0LFxyXG4gICAgICAgICAgICBwcmV2VmVydGV4LFxyXG4gICAgICAgICAgICBjdXJWZXJ0ZXgsIFxyXG4gICAgICAgICAgICBuZXh0VmVydGV4LFxyXG4gICAgICAgICAgICBsZW4gPSB2Lmxlbmd0aCxcclxuICAgICAgICAgICAgaTtcclxuXHJcbiAgICAgICAgZm9yKGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgcHJldlZlcnRleCA9IHZbaSAtIDFdO1xyXG4gICAgICAgICAgICBjdXJWZXJ0ZXggPSB2W2ldO1xyXG4gICAgICAgICAgICBuZXh0VmVydGV4ID0gdlsoaSArIDEpICUgbGVuXTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWIqeeUqOWPieS5mOWIpOaWrVxyXG4gICAgICAgICAgICBpZihjdXJWZXJ0ZXguc3ViKHByZXZWZXJ0ZXgpLmNybyhuZXh0VmVydGV4LnN1YihjdXJWZXJ0ZXgpKSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGNhdmVzLnB1c2goY3VyVmVydGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNhdmVzO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n')},function(module,exports,__webpack_require__){"use strict";eval("\r\n/**\r\n * 事件管理器\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Event = void 0;\r\nclass EventEmitter {\r\n    /**\r\n     * 绑定事件\r\n     * @param obj\r\n     * @param eventName\r\n     * @param fn\r\n     */\r\n    bind(obj, eventName, fn) {\r\n        obj.methods[eventName] = fn;\r\n    }\r\n    /**\r\n     * 解绑事件\r\n     * @param obj\r\n     * @param eventName\r\n     */\r\n    unBind(obj, eventName) {\r\n        obj.methods[eventName] = null;\r\n    }\r\n    /**\r\n     * 事件发射\r\n     * @param obj\r\n     * @param eventName 事件名称\r\n     */\r\n    emit(obj, eventName, ...para) {\r\n        obj.methods[eventName] && typeof obj.methods[eventName] === 'function' && obj.methods[eventName](...para);\r\n    }\r\n}\r\nexports.Event = new EventEmitter();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZXZlbnQvZXZlbnRFbWl0dGVyLnRzP2NlOTQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBOztHQUVHOzs7QUFJSCxNQUFNLFlBQVk7SUFFZDs7Ozs7T0FLRztJQUNILElBQUksQ0FBQyxHQUFRLEVBQUUsU0FBaUIsRUFBRSxFQUFZO1FBQzFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsTUFBTSxDQUFDLEdBQVEsRUFBRSxTQUFpQjtRQUM5QixHQUFHLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNsQyxDQUFDO0lBR0Q7Ozs7T0FJRztJQUNILElBQUksQ0FBSSxHQUFRLEVBQUUsU0FBaUIsRUFBRSxHQUFHLElBQVM7UUFDN0MsR0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUssVUFBVSxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUM5RyxDQUFDO0NBQ0o7QUFHWSxhQUFLLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQyIsImZpbGUiOiIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8qKlxyXG4gKiDkuovku7bnrqHnkIblmahcclxuICovXHJcblxyXG5cclxuXHJcbmNsYXNzIEV2ZW50RW1pdHRlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnu5Hlrprkuovku7ZcclxuICAgICAqIEBwYXJhbSBvYmogXHJcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFxyXG4gICAgICogQHBhcmFtIGZuIFxyXG4gICAgICovXHJcbiAgICBiaW5kKG9iajogYW55LCBldmVudE5hbWU6IHN0cmluZywgZm46IEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgb2JqLm1ldGhvZHNbZXZlbnROYW1lXSA9IGZuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6Kej57uR5LqL5Lu2XHJcbiAgICAgKiBAcGFyYW0gb2JqIFxyXG4gICAgICogQHBhcmFtIGV2ZW50TmFtZSBcclxuICAgICAqL1xyXG4gICAgdW5CaW5kKG9iajogYW55LCBldmVudE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIG9iai5tZXRob2RzW2V2ZW50TmFtZV0gPSBudWxsO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS6i+S7tuWPkeWwhFxyXG4gICAgICogQHBhcmFtIG9iaiBcclxuICAgICAqIEBwYXJhbSBldmVudE5hbWUg5LqL5Lu25ZCN56ewIFxyXG4gICAgICovXHJcbiAgICBlbWl0PFQ+KG9iajogYW55LCBldmVudE5hbWU6IHN0cmluZywgLi4ucGFyYTogYW55KSB7XHJcbiAgICAgICAgb2JqLm1ldGhvZHNbZXZlbnROYW1lXSAmJiB0eXBlb2Ygb2JqLm1ldGhvZHNbZXZlbnROYW1lXSA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmoubWV0aG9kc1tldmVudE5hbWVdKC4uLnBhcmEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IEV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcigpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n")},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Arcs = exports.Arc = void 0;\r\nconst vector_1 = __webpack_require__(1);\r\nconst vertices_1 = __webpack_require__(2);\r\nconst bound_1 = __webpack_require__(6);\r\n// 一个圆形信息包\r\nclass Arc {\r\n    constructor(body, center, radius) {\r\n        this.id = body.id;\r\n        this.body = body;\r\n        this.center = center;\r\n        this.radius = radius;\r\n        this.bound = exports.Arcs.getBound(center, radius);\r\n    }\r\n}\r\nexports.Arc = Arc;\r\nexports.Arcs = {\r\n    /**\r\n     * 创造圆形信息包\r\n     * @param body\r\n     */\r\n    create(body) {\r\n        return new Arc(body, body.position.col(), body.radius);\r\n    },\r\n    /**\r\n     * 获取两个圆的圆心间的距离\r\n     * @param circleA\r\n     * @param circleB\r\n     */\r\n    distance(circleA, circleB) {\r\n        return circleA.center.sub(circleB.center).len();\r\n    },\r\n    /**\r\n     * 获取圆形和顶点集间的轴\r\n     * @param vertices 顶点信息\r\n     */\r\n    getAxes(circle, poly) {\r\n        let closestVertex = vertices_1.Vertices.getClosestVertex(circle.center, poly.vertexList);\r\n        return closestVertex.sub(circle.center).nol();\r\n    },\r\n    getBound(center, radius) {\r\n        let min = new vector_1.Vector(center.x - radius, center.y - radius), max = new vector_1.Vector(center.x + radius, center.y + radius);\r\n        return new bound_1.Bound(min, max);\r\n    },\r\n    /**\r\n     * 获取圆形在给定轴上的投影\r\n     * @param axis\r\n     */\r\n    Projection(circle, axis) {\r\n        let len = circle.center.pro(axis);\r\n        return {\r\n            min: len - circle.radius,\r\n            max: len + circle.radius\r\n        };\r\n    },\r\n    /**\r\n     * 查看圆形是否包含某个点\r\n     * @param circle\r\n     * @param point\r\n     */\r\n    isContains(circle, point) {\r\n        return circle.radius * circle.radius - circle.center.sub(point).len_s() > 0;\r\n    },\r\n    /**\r\n     * 位移圆形\r\n     * @param arc\r\n     * @param distance 位移向量\r\n     */\r\n    translate(arc, distance) {\r\n        arc.center.x += distance.x;\r\n        arc.center.y += distance.y;\r\n        // 位移包围盒\r\n        arc.bound.translate(distance);\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2FyY3MudHM/MjcyZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx3Q0FBd0M7QUFFeEMsMENBQTRDO0FBQzVDLHVDQUEyQztBQUkzQyxVQUFVO0FBQ1YsTUFBYSxHQUFHO0lBT1osWUFBWSxJQUFZLEVBQUUsTUFBYyxFQUFFLE1BQWM7UUFDcEQsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxLQUFLLEdBQUcsWUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDL0MsQ0FBQztDQUNKO0FBZEQsa0JBY0M7QUFLWSxZQUFJLEdBQUc7SUFDaEI7OztPQUdHO0lBQ0gsTUFBTSxDQUFDLElBQVk7UUFDZixPQUFPLElBQUksR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMzRCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFFBQVEsQ0FBQyxPQUFZLEVBQUUsT0FBWTtRQUMvQixPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNwRCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsT0FBTyxDQUFDLE1BQVcsRUFBRSxJQUFVO1FBQzNCLElBQUksYUFBYSxHQUFHLG1CQUFRLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDOUUsT0FBTyxhQUFhLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNsRCxDQUFDO0lBRUQsUUFBUSxDQUFDLE1BQWMsRUFBRSxNQUFjO1FBQ25DLElBQUksR0FBRyxHQUFHLElBQUksZUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEVBQ3RELEdBQUcsR0FBRyxJQUFJLGVBQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDO1FBRTNELE9BQU8sSUFBSSxhQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRDs7O09BR0c7SUFDSCxVQUFVLENBQUMsTUFBVyxFQUFFLElBQVk7UUFDaEMsSUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFbEMsT0FBTztZQUNILEdBQUcsRUFBRSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU07WUFDeEIsR0FBRyxFQUFFLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTTtTQUMzQixDQUFDO0lBQ04sQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxVQUFVLENBQUMsTUFBVyxFQUFFLEtBQWE7UUFDakMsT0FBTyxNQUFNLENBQUMsTUFBTSxHQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzlFLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsU0FBUyxDQUFDLEdBQVEsRUFBRSxRQUFnQjtRQUNoQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQzNCLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFFM0IsUUFBUTtRQUNSLEdBQUcsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6IjQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgQ2lyY2xlIH0gZnJvbSBcIi4uL2JvZHkvY2lyY2xlXCI7XHJcbmltcG9ydCB7IFBvbHksIFZlcnRpY2VzIH0gZnJvbSBcIi4vdmVydGljZXNcIjtcclxuaW1wb3J0IHsgQm91bmQgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2JvdW5kXCI7XHJcblxyXG5cclxuXHJcbi8vIOS4gOS4quWchuW9ouS/oeaBr+WMhVxyXG5leHBvcnQgY2xhc3MgQXJjIHtcclxuICAgIGlkOiBudW1iZXI7XHJcbiAgICBjZW50ZXI6IFZlY3RvcjtcclxuICAgIHJhZGl1czogbnVtYmVyO1xyXG4gICAgYm9keTogQ2lyY2xlO1xyXG4gICAgYm91bmQ6IEJvdW5kXHJcblxyXG4gICAgY29uc3RydWN0b3IoYm9keTogQ2lyY2xlLCBjZW50ZXI6IFZlY3RvciwgcmFkaXVzOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmlkID0gYm9keS5pZDtcclxuICAgICAgICB0aGlzLmJvZHkgPSBib2R5O1xyXG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xyXG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xyXG4gICAgICAgIHRoaXMuYm91bmQgPSBBcmNzLmdldEJvdW5kKGNlbnRlciwgcmFkaXVzKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IEFyY3MgPSB7XHJcbiAgICAvKipcclxuICAgICAqIOWIm+mAoOWchuW9ouS/oeaBr+WMhVxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZShib2R5OiBDaXJjbGUpOiBBcmMge1xyXG4gICAgICAgIHJldHVybiBuZXcgQXJjKGJvZHksIGJvZHkucG9zaXRpb24uY29sKCksIGJvZHkucmFkaXVzKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bkuKTkuKrlnIbnmoTlnIblv4Ppl7TnmoTot53nprtcclxuICAgICAqIEBwYXJhbSBjaXJjbGVBIFxyXG4gICAgICogQHBhcmFtIGNpcmNsZUIgXHJcbiAgICAgKi9cclxuICAgIGRpc3RhbmNlKGNpcmNsZUE6IEFyYywgY2lyY2xlQjogQXJjKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gY2lyY2xlQS5jZW50ZXIuc3ViKGNpcmNsZUIuY2VudGVyKS5sZW4oKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blnIblvaLlkozpobbngrnpm4bpl7TnmoTovbRcclxuICAgICAqIEBwYXJhbSB2ZXJ0aWNlcyDpobbngrnkv6Hmga9cclxuICAgICAqL1xyXG4gICAgZ2V0QXhlcyhjaXJjbGU6IEFyYywgcG9seTogUG9seSk6IFZlY3RvciB7XHJcbiAgICAgICAgbGV0IGNsb3Nlc3RWZXJ0ZXggPSBWZXJ0aWNlcy5nZXRDbG9zZXN0VmVydGV4KGNpcmNsZS5jZW50ZXIsIHBvbHkudmVydGV4TGlzdCk7XHJcbiAgICAgICAgcmV0dXJuIGNsb3Nlc3RWZXJ0ZXguc3ViKGNpcmNsZS5jZW50ZXIpLm5vbCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRCb3VuZChjZW50ZXI6IFZlY3RvciwgcmFkaXVzOiBudW1iZXIpOiBCb3VuZCB7XHJcbiAgICAgICAgbGV0IG1pbiA9IG5ldyBWZWN0b3IoY2VudGVyLnggLSByYWRpdXMsIGNlbnRlci55IC0gcmFkaXVzKSxcclxuICAgICAgICAgICAgbWF4ID0gbmV3IFZlY3RvcihjZW50ZXIueCArIHJhZGl1cywgY2VudGVyLnkgKyByYWRpdXMpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKG1pbiwgbWF4KTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blnIblvaLlnKjnu5nlrprovbTkuIrnmoTmipXlvbFcclxuICAgICAqIEBwYXJhbSBheGlzIFxyXG4gICAgICovXHJcbiAgICBQcm9qZWN0aW9uKGNpcmNsZTogQXJjLCBheGlzOiBWZWN0b3IpOiB7bWluOiBudW1iZXIsIG1heDogbnVtYmVyfSB7XHJcbiAgICAgICAgbGV0IGxlbiA9IGNpcmNsZS5jZW50ZXIucHJvKGF4aXMpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtaW46IGxlbiAtIGNpcmNsZS5yYWRpdXMsXHJcbiAgICAgICAgICAgIG1heDogbGVuICsgY2lyY2xlLnJhZGl1c1xyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l55yL5ZyG5b2i5piv5ZCm5YyF5ZCr5p+Q5Liq54K5XHJcbiAgICAgKiBAcGFyYW0gY2lyY2xlIFxyXG4gICAgICogQHBhcmFtIHBvaW50IFxyXG4gICAgICovXHJcbiAgICBpc0NvbnRhaW5zKGNpcmNsZTogQXJjLCBwb2ludDogVmVjdG9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGNpcmNsZS5yYWRpdXMqY2lyY2xlLnJhZGl1cyAtIGNpcmNsZS5jZW50ZXIuc3ViKHBvaW50KS5sZW5fcygpID4gMDsgXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5L2N56e75ZyG5b2iXHJcbiAgICAgKiBAcGFyYW0gYXJjXHJcbiAgICAgKiBAcGFyYW0gZGlzdGFuY2Ug5L2N56e75ZCR6YePXHJcbiAgICAgKi9cclxuICAgIHRyYW5zbGF0ZShhcmM6IEFyYywgZGlzdGFuY2U6IFZlY3Rvcikge1xyXG4gICAgICAgIGFyYy5jZW50ZXIueCArPSBkaXN0YW5jZS54O1xyXG4gICAgICAgIGFyYy5jZW50ZXIueSArPSBkaXN0YW5jZS55O1xyXG5cclxuICAgICAgICAvLyDkvY3np7vljIXlm7Tnm5JcclxuICAgICAgICBhcmMuYm91bmQudHJhbnNsYXRlKGRpc3RhbmNlKTtcclxuICAgIH1cclxufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Lines = void 0;\r\n/**\r\n * 线段操作工具\r\n * line: [start: Vector, end: Vector]\r\n */\r\nexports.Lines = {\r\n    /**\r\n     * 判断点在线段的哪一侧\r\n     * @param line 线段\r\n     * @param point 被检测点\r\n     */\r\n    side(line, point) {\r\n        let v1 = line[1].sub(line[0]), v2 = point.sub(line[0]), cor = v2.cro(v1);\r\n        // > 0：左侧；< 0：右侧；= 0：点在线上\r\n        if (cor === 0)\r\n            return cor;\r\n        else if (cor < 0) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return 1;\r\n        }\r\n    },\r\n    /**\r\n     * 判断两条线段是否相交\r\n     * 参考：https://www.cnblogs.com/tuyang1129/p/9390376.html\r\n     * @param line1 第一条线段\r\n     * @param line2 第二条线段\r\n     */\r\n    isIntersect(line1, line2) {\r\n        let point11 = line1[0], point12 = line1[1], point21 = line2[0], point22 = line2[1];\r\n        return this.side(line1, point21) !== this.side(line1, point22) && this.side(line2, point11) !== this.side(line2, point12);\r\n    },\r\n    /**\r\n     * 查看一条直线是否穿过一个多边形\r\n     * 原理：查看多边形的所有顶点是否在线段的同一侧\r\n     * @param line\r\n     * @param vertexList\r\n     */\r\n    isIntersectWithVertices(line, vertexList) {\r\n        let curCor, prevCor, len = vertexList.length, i;\r\n        for (i = 0; i < len; i++) {\r\n            curCor = this.side(line, vertexList[i]);\r\n            if (curCor === 0)\r\n                continue;\r\n            if (prevCor && prevCor !== curCor)\r\n                return true;\r\n            prevCor = curCor;\r\n        }\r\n        return false;\r\n    },\r\n    /**\r\n     * 求两线段的交点（相似三角形法）\r\n     * 参考：https://blog.csdn.net/Mr_HCW/article/details/82856056\r\n     * @param line1 第一条线段\r\n     * @param line2 第二条线段\r\n     */\r\n    intersection(line1, line2) {\r\n        let v1 = line1[1].sub(line1[0]), v2 = line2[1].sub(line2[0]), tv1 = line1[0].sub(line2[0]), tv2 = line1[1].sub(line2[1]), d1 = Math.abs(tv1.cro(v1) / v1.len()), d2 = Math.abs(tv2.cro(v1) / v1.len()), tv3 = v2.scl(d1 / (d1 + d2));\r\n        return line2[0].add(tv3);\r\n    },\r\n    /**\r\n     * 将线段投影到某个轴\r\n     * @param line\r\n     * @param axis\r\n     */\r\n    projection(line, axis) {\r\n        let n1 = line[0].pro(axis), n2 = line[1].pro(axis);\r\n        if (n1 > n2) {\r\n            return { min: n2, max: n1 };\r\n        }\r\n        else {\r\n            return { min: n1, max: n2 };\r\n        }\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2xpbmUudHM/NjJlMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFXQTs7O0dBR0c7QUFDVSxhQUFLLEdBQUc7SUFFakI7Ozs7T0FJRztJQUNILElBQUksQ0FBQyxJQUFpQixFQUFFLEtBQWE7UUFDakMsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFDekIsRUFBRSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3ZCLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRXJCLHlCQUF5QjtRQUN6QixJQUFHLEdBQUcsS0FBSyxDQUFDO1lBQUUsT0FBTyxHQUFHLENBQUM7YUFDcEIsSUFBRyxHQUFHLEdBQUcsQ0FBQyxFQUFFO1lBQ2IsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUNiO2FBQ0k7WUFDRCxPQUFPLENBQUM7U0FDWDtJQUNMLENBQUM7SUFHRDs7Ozs7T0FLRztJQUNILFdBQVcsQ0FBQyxLQUFrQixFQUFFLEtBQWtCO1FBQzlDLElBQUksT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDbEIsT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDbEIsT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDbEIsT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzlILENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILHVCQUF1QixDQUFDLElBQWlCLEVBQUUsVUFBc0I7UUFDN0QsSUFBSSxNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUVoRCxLQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNyQixNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFeEMsSUFBRyxNQUFNLEtBQUssQ0FBQztnQkFBRSxTQUFTO1lBRTFCLElBQUcsT0FBTyxJQUFJLE9BQU8sS0FBSyxNQUFNO2dCQUFFLE9BQU8sSUFBSSxDQUFDO1lBRTlDLE9BQU8sR0FBRyxNQUFNLENBQUM7U0FDcEI7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCxZQUFZLENBQUMsS0FBa0IsRUFBRSxLQUFrQjtRQUMvQyxJQUFJLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUMzQixFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFDM0IsR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQzVCLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUM1QixFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUNyQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUNyQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUUvQixPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxVQUFVLENBQUMsSUFBaUIsRUFBRSxJQUFZO1FBQ3RDLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQ3RCLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTNCLElBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtZQUNSLE9BQU8sRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztTQUMvQjthQUNJO1lBQ0QsT0FBTyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO1NBQy9CO0lBQ0wsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiNS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBWZXJ0ZXhMaXN0IH0gZnJvbSBcIi4vdmVydGljZXNcIjtcclxuXHJcblxyXG4vKipcclxuICog57q/5q6157G75Z6LXHJcbiAqIFtzdGFydDoge3gsIHl9LCBlbmQ6IHt4LCB5fV1cclxuICovXHJcbmV4cG9ydCB0eXBlIExpbmVTZWdtZW50ID0gVmVjdG9yW107XHJcblxyXG5cclxuLyoqXHJcbiAqIOe6v+auteaTjeS9nOW3peWFt1xyXG4gKiBsaW5lOiBbc3RhcnQ6IFZlY3RvciwgZW5kOiBWZWN0b3JdXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgTGluZXMgPSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3ngrnlnKjnur/mrrXnmoTlk6rkuIDkvqdcclxuICAgICAqIEBwYXJhbSBsaW5lIOe6v+autVxyXG4gICAgICogQHBhcmFtIHBvaW50IOiiq+ajgOa1i+eCuVxyXG4gICAgICovXHJcbiAgICBzaWRlKGxpbmU6IExpbmVTZWdtZW50LCBwb2ludDogVmVjdG9yKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgdjEgPSBsaW5lWzFdLnN1YihsaW5lWzBdKSxcclxuICAgICAgICAgICAgdjIgPSBwb2ludC5zdWIobGluZVswXSksXHJcbiAgICAgICAgICAgIGNvciA9IHYyLmNybyh2MSk7XHJcbiAgICBcclxuICAgICAgICAvLyA+IDDvvJrlt6bkvqfvvJs8IDDvvJrlj7PkvqfvvJs9IDDvvJrngrnlnKjnur/kuIpcclxuICAgICAgICBpZihjb3IgPT09IDApIHJldHVybiBjb3I7XHJcbiAgICAgICAgZWxzZSBpZihjb3IgPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3kuKTmnaHnur/mrrXmmK/lkKbnm7jkuqRcclxuICAgICAqIOWPguiAg++8mmh0dHBzOi8vd3d3LmNuYmxvZ3MuY29tL3R1eWFuZzExMjkvcC85MzkwMzc2Lmh0bWxcclxuICAgICAqIEBwYXJhbSBsaW5lMSDnrKzkuIDmnaHnur/mrrVcclxuICAgICAqIEBwYXJhbSBsaW5lMiDnrKzkuozmnaHnur/mrrVcclxuICAgICAqL1xyXG4gICAgaXNJbnRlcnNlY3QobGluZTE6IExpbmVTZWdtZW50LCBsaW5lMjogTGluZVNlZ21lbnQpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgcG9pbnQxMSA9IGxpbmUxWzBdLFxyXG4gICAgICAgICAgICBwb2ludDEyID0gbGluZTFbMV0sIFxyXG4gICAgICAgICAgICBwb2ludDIxID0gbGluZTJbMF0sXHJcbiAgICAgICAgICAgIHBvaW50MjIgPSBsaW5lMlsxXTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiB0aGlzLnNpZGUobGluZTEsIHBvaW50MjEpICE9PSB0aGlzLnNpZGUobGluZTEsIHBvaW50MjIpICYmIHRoaXMuc2lkZShsaW5lMiwgcG9pbnQxMSkgIT09IHRoaXMuc2lkZShsaW5lMiwgcG9pbnQxMik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l55yL5LiA5p2h55u057q/5piv5ZCm56m/6L+H5LiA5Liq5aSa6L655b2iXHJcbiAgICAgKiDljp/nkIbvvJrmn6XnnIvlpJrovrnlvaLnmoTmiYDmnInpobbngrnmmK/lkKblnKjnur/mrrXnmoTlkIzkuIDkvqdcclxuICAgICAqIEBwYXJhbSBsaW5lIFxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGlzSW50ZXJzZWN0V2l0aFZlcnRpY2VzKGxpbmU6IExpbmVTZWdtZW50LCB2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGN1ckNvciwgcHJldkNvciwgbGVuID0gdmVydGV4TGlzdC5sZW5ndGgsIGk7XHJcblxyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGN1ckNvciA9IHRoaXMuc2lkZShsaW5lLCB2ZXJ0ZXhMaXN0W2ldKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGN1ckNvciA9PT0gMCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBpZihwcmV2Q29yICYmIHByZXZDb3IgIT09IGN1ckNvcikgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICBwcmV2Q29yID0gY3VyQ29yO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOaxguS4pOe6v+auteeahOS6pOeCue+8iOebuOS8vOS4ieinkuW9ouazle+8iVxyXG4gICAgICog5Y+C6ICD77yaaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX0hDVy9hcnRpY2xlL2RldGFpbHMvODI4NTYwNTZcclxuICAgICAqIEBwYXJhbSBsaW5lMSDnrKzkuIDmnaHnur/mrrVcclxuICAgICAqIEBwYXJhbSBsaW5lMiDnrKzkuozmnaHnur/mrrVcclxuICAgICAqL1xyXG4gICAgaW50ZXJzZWN0aW9uKGxpbmUxOiBMaW5lU2VnbWVudCwgbGluZTI6IExpbmVTZWdtZW50KTogVmVjdG9yIHtcclxuICAgICAgICBsZXQgdjEgPSBsaW5lMVsxXS5zdWIobGluZTFbMF0pLFxyXG4gICAgICAgICAgICB2MiA9IGxpbmUyWzFdLnN1YihsaW5lMlswXSksXHJcbiAgICAgICAgICAgIHR2MSA9IGxpbmUxWzBdLnN1YihsaW5lMlswXSksXHJcbiAgICAgICAgICAgIHR2MiA9IGxpbmUxWzFdLnN1YihsaW5lMlsxXSksXHJcbiAgICAgICAgICAgIGQxID0gTWF0aC5hYnModHYxLmNybyh2MSkgLyB2MS5sZW4oKSksXHJcbiAgICAgICAgICAgIGQyID0gTWF0aC5hYnModHYyLmNybyh2MSkgLyB2MS5sZW4oKSksXHJcbiAgICAgICAgICAgIHR2MyA9IHYyLnNjbChkMS8oZDEgKyBkMikpO1xyXG5cclxuICAgICAgICByZXR1cm4gbGluZTJbMF0uYWRkKHR2Myk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bCG57q/5q615oqV5b2x5Yiw5p+Q5Liq6L20XHJcbiAgICAgKiBAcGFyYW0gbGluZSBcclxuICAgICAqIEBwYXJhbSBheGlzIFxyXG4gICAgICovXHJcbiAgICBwcm9qZWN0aW9uKGxpbmU6IExpbmVTZWdtZW50LCBheGlzOiBWZWN0b3IpOiB7IG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciB9IHtcclxuICAgICAgICBsZXQgbjEgPSBsaW5lWzBdLnBybyhheGlzKSxcclxuICAgICAgICAgICAgbjIgPSBsaW5lWzFdLnBybyhheGlzKTtcclxuICAgICAgICBcclxuICAgICAgICBpZihuMSA+IG4yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG1pbjogbjIsIG1heDogbjEgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG1pbjogbjEsIG1heDogbjIgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Bound = void 0;\r\nconst vertices_1 = __webpack_require__(2);\r\n// AABB包围盒（速度扩展的）\r\nclass Bound {\r\n    constructor(min, max) {\r\n        this.set(min, max);\r\n    }\r\n    /**\r\n     * 设置包围盒范围\r\n     *\r\n     *  min ----------|\r\n     *   |            |\r\n     *   |            |\r\n     *   | --------- max\r\n     *\r\n     * @param min 最小值\r\n     * @param max 最大值\r\n     */\r\n    set(min, max) {\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n    /**\r\n     * 位移包围盒\r\n     * @param distance\r\n     */\r\n    translate(distance) {\r\n        this.min.x += distance.x;\r\n        this.min.y += distance.y;\r\n        this.max.x += distance.x;\r\n        this.max.y += distance.y;\r\n    }\r\n    /**\r\n     * 更新包围盒（通常发生在刚体发生旋转，min和max都要重新计算）\r\n     * @param vertexList\r\n     */\r\n    update(vertexList) {\r\n        let range = vertices_1.Vertices.getRange(vertexList);\r\n        this.min.x = range.min.x;\r\n        this.min.y = range.min.y;\r\n        this.max.x = range.max.x;\r\n        this.max.y = range.max.y;\r\n    }\r\n    /**\r\n     * 判断与另一个包围盒是否相交\r\n     * @param bound\r\n     */\r\n    isIntersect(bound) {\r\n        return (this.min.x < bound.max.x && this.max.x > bound.min.x) && (this.min.y < bound.max.y && bound.min.y < this.max.y);\r\n    }\r\n    /**\r\n     * 查看点是否在包围盒中\r\n     * @param point\r\n     */\r\n    isContains(point) {\r\n        return point.x > this.min.x && point.x < this.max.x && point.y > this.min.y && point.y < this.max.y;\r\n    }\r\n}\r\nexports.Bound = Bound;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL2JvdW5kLnRzP2QxMTciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsMENBQTBEO0FBRzFELGlCQUFpQjtBQUNqQixNQUFhLEtBQUs7SUFJZCxZQUFZLEdBQVcsRUFBRSxHQUFXO1FBQ2hDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFFRDs7Ozs7Ozs7OztPQVVHO0lBQ0gsR0FBRyxDQUFDLEdBQVcsRUFBRSxHQUFXO1FBQ3hCLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7SUFDbkIsQ0FBQztJQUVEOzs7T0FHRztJQUNILFNBQVMsQ0FBQyxRQUFnQjtRQUN0QixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxNQUFNLENBQUMsVUFBc0I7UUFDekIsSUFBSSxLQUFLLEdBQUcsbUJBQVEsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFMUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVEOzs7T0FHRztJQUNILFdBQVcsQ0FBQyxLQUFZO1FBQ3BCLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1SCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsVUFBVSxDQUFDLEtBQWE7UUFDcEIsT0FBTyxLQUFLLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3hHLENBQUM7Q0FDSjtBQS9ERCxzQkErREMiLCJmaWxlIjoiNi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBWZXJ0ZXhMaXN0LCBWZXJ0aWNlcyB9IGZyb20gXCIuLi9jb21tb24vdmVydGljZXNcIjtcclxuXHJcblxyXG4vLyBBQUJC5YyF5Zu055uS77yI6YCf5bqm5omp5bGV55qE77yJXHJcbmV4cG9ydCBjbGFzcyBCb3VuZCB7XHJcbiAgICBtaW46IFZlY3RvcjtcclxuICAgIG1heDogVmVjdG9yO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1pbjogVmVjdG9yLCBtYXg6IFZlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuc2V0KG1pbiwgbWF4KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruWMheWbtOebkuiMg+WbtFxyXG4gICAgICogXHJcbiAgICAgKiAgbWluIC0tLS0tLS0tLS18XHJcbiAgICAgKiAgIHwgICAgICAgICAgICB8XHJcbiAgICAgKiAgIHwgICAgICAgICAgICB8XHJcbiAgICAgKiAgIHwgLS0tLS0tLS0tIG1heFxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWluIOacgOWwj+WAvFxyXG4gICAgICogQHBhcmFtIG1heCDmnIDlpKflgLxcclxuICAgICAqL1xyXG4gICAgc2V0KG1pbjogVmVjdG9yLCBtYXg6IFZlY3Rvcikge1xyXG4gICAgICAgIHRoaXMubWluID0gbWluO1xyXG4gICAgICAgIHRoaXMubWF4ID0gbWF4O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5L2N56e75YyF5Zu055uSXHJcbiAgICAgKiBAcGFyYW0gZGlzdGFuY2VcclxuICAgICAqL1xyXG4gICAgdHJhbnNsYXRlKGRpc3RhbmNlOiBWZWN0b3IpIHtcclxuICAgICAgICB0aGlzLm1pbi54ICs9IGRpc3RhbmNlLng7XHJcbiAgICAgICAgdGhpcy5taW4ueSArPSBkaXN0YW5jZS55O1xyXG4gICAgICAgIHRoaXMubWF4LnggKz0gZGlzdGFuY2UueDtcclxuICAgICAgICB0aGlzLm1heC55ICs9IGRpc3RhbmNlLnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmm7TmlrDljIXlm7Tnm5LvvIjpgJrluLjlj5HnlJ/lnKjliJrkvZPlj5HnlJ/ml4vovazvvIxtaW7lkoxtYXjpg73opoHph43mlrDorqHnrpfvvIlcclxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhMaXN0IFxyXG4gICAgICovXHJcbiAgICB1cGRhdGUodmVydGV4TGlzdDogVmVydGV4TGlzdCkge1xyXG4gICAgICAgIGxldCByYW5nZSA9IFZlcnRpY2VzLmdldFJhbmdlKHZlcnRleExpc3QpO1xyXG5cclxuICAgICAgICB0aGlzLm1pbi54ID0gcmFuZ2UubWluLng7XHJcbiAgICAgICAgdGhpcy5taW4ueSA9IHJhbmdlLm1pbi55O1xyXG4gICAgICAgIHRoaXMubWF4LnggPSByYW5nZS5tYXgueDtcclxuICAgICAgICB0aGlzLm1heC55ID0gcmFuZ2UubWF4Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3kuI7lj6bkuIDkuKrljIXlm7Tnm5LmmK/lkKbnm7jkuqRcclxuICAgICAqIEBwYXJhbSBib3VuZCBcclxuICAgICAqL1xyXG4gICAgaXNJbnRlcnNlY3QoYm91bmQ6IEJvdW5kKTogQm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pbi54IDwgYm91bmQubWF4LnggJiYgdGhpcy5tYXgueCA+IGJvdW5kLm1pbi54KSAmJiAodGhpcy5taW4ueSA8IGJvdW5kLm1heC55ICYmIGJvdW5kLm1pbi55IDwgdGhpcy5tYXgueSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmn6XnnIvngrnmmK/lkKblnKjljIXlm7Tnm5LkuK1cclxuICAgICAqIEBwYXJhbSBwb2ludCBcclxuICAgICAqL1xyXG4gICAgaXNDb250YWlucyhwb2ludDogVmVjdG9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHBvaW50LnggPiB0aGlzLm1pbi54ICYmIHBvaW50LnggPCB0aGlzLm1heC54ICYmIHBvaW50LnkgPiB0aGlzLm1pbi55ICYmIHBvaW50LnkgPCB0aGlzLm1heC55O1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Manifold = exports.Collision = exports.Contact = void 0;\r\nconst vector_1 = __webpack_require__(1);\r\nconst util_1 = __webpack_require__(0);\r\n// 接触点信息\r\nclass Contact {\r\n    constructor(vertex) {\r\n        this.vertex = new vector_1.Vector();\r\n        this.vertex.x = vertex.x;\r\n        this.vertex.y = vertex.y;\r\n        this.shareNormal = 0;\r\n        this.shareTangent = 0;\r\n        this.inverseMass = 0;\r\n        this.normalImpulse = 0;\r\n        this.tangentImpulse = 0;\r\n        this.bias = 0;\r\n    }\r\n}\r\nexports.Contact = Contact;\r\n/**\r\n * 一个碰撞结构，包含了碰撞的所有信息\r\n */\r\nclass Collision {\r\n    constructor() {\r\n        // 碰撞法线\r\n        this.normal = new vector_1.Vector();\r\n        // 碰撞切线\r\n        this.tangent = new vector_1.Vector();\r\n        // 穿透向量\r\n        this.penetration = new vector_1.Vector();\r\n    }\r\n}\r\nexports.Collision = Collision;\r\n;\r\n/**\r\n * 碰撞流形\r\n * 主要用于记录相互碰撞的刚体和进行碰撞缓存\r\n */\r\nclass Manifold {\r\n    constructor(collision, timeStamp) {\r\n        // 碰撞接触点\r\n        this.contacts = [];\r\n        this.bodyA = collision.bodyA;\r\n        this.bodyB = collision.bodyB;\r\n        this.partA = collision.partA;\r\n        this.partB = collision.partB;\r\n        this.id = util_1.Util.compositeId(this.partA.id, this.partB.id);\r\n        this.collision = collision;\r\n        this.contacts = collision.contacts;\r\n        this.isActive = true;\r\n        this.confirmedActive = true;\r\n        this.timeCreated = timeStamp;\r\n        this.timeUpdated = timeStamp;\r\n        this.friction = 0;\r\n        this.restitution = 0;\r\n        this.inverseMass = 0;\r\n        this.update(collision, timeStamp);\r\n    }\r\n    /**\r\n     * 更新流形\r\n     * @param collision 碰撞信息\r\n     * @param timeStamp 时间戳\r\n     */\r\n    update(collision, timeStamp) {\r\n        this.collision = collision;\r\n        // 如果该碰撞对真的发生了碰撞\r\n        if (collision.collide) {\r\n            let bodyA, bodyB;\r\n            bodyA = collision.bodyA;\r\n            bodyB = collision.bodyB;\r\n            this.friction = Math.sqrt(bodyA.friction * bodyB.friction);\r\n            this.restitution = (bodyA.restitution + bodyB.restitution) / 2;\r\n            this.inverseMass = bodyA.invMass + bodyB.invMass;\r\n            this.contacts = collision.contacts;\r\n            this.toggleActive(true, timeStamp);\r\n        }\r\n        // 否则\r\n        else {\r\n            this.isActive && this.toggleActive(false, timeStamp);\r\n        }\r\n    }\r\n    /**\r\n     * 更改流形激活状态\r\n     * @param active 激活状态\r\n     * @param timeStamp 时间戳\r\n     */\r\n    toggleActive(active, timeStamp) {\r\n        this.isActive = active;\r\n        if (active) {\r\n            this.timeUpdated = timeStamp;\r\n        }\r\n        else {\r\n            this.contacts = [];\r\n        }\r\n    }\r\n}\r\nexports.Manifold = Manifold;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL21hbmlmb2xkLnRzP2JiZWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0Esd0NBQXdDO0FBQ3hDLHNDQUFzQztBQVl0QyxRQUFRO0FBQ1IsTUFBYSxPQUFPO0lBV2hCLFlBQVksTUFBYztRQVYxQixXQUFNLEdBQVcsSUFBSSxlQUFNLEVBQUUsQ0FBQztRQVcxQixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7UUFDckIsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7UUFDckIsSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUM7UUFDdkIsSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7SUFDbEIsQ0FBQztDQUNKO0FBckJELDBCQXFCQztBQUdEOztHQUVHO0FBRUgsTUFBYSxTQUFTO0lBQXRCO1FBU0ksT0FBTztRQUNQLFdBQU0sR0FBVyxJQUFJLGVBQU0sRUFBRSxDQUFDO1FBQzlCLE9BQU87UUFDUCxZQUFPLEdBQVcsSUFBSSxlQUFNLEVBQUUsQ0FBQztRQUcvQixPQUFPO1FBQ1AsZ0JBQVcsR0FBVyxJQUFJLGVBQU0sRUFBRSxDQUFDO0lBS3ZDLENBQUM7Q0FBQTtBQXJCRCw4QkFxQkM7QUFBQSxDQUFDO0FBR0Y7OztHQUdHO0FBQ0gsTUFBYSxRQUFRO0lBNkJqQixZQUFZLFNBQW9CLEVBQUUsU0FBaUI7UUFuQm5ELFFBQVE7UUFDUixhQUFRLEdBQWMsRUFBRSxDQUFDO1FBbUJyQixJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDO1FBQzdCLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQztRQUM3QixJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUM7UUFDN0IsSUFBSSxDQUFDLEVBQUUsR0FBRyxXQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDekQsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFDM0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDO1FBQ25DLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1FBQzVCLElBQUksQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDO1FBQzdCLElBQUksQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDO1FBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBRXJCLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsTUFBTSxDQUFDLFNBQW9CLEVBQUUsU0FBaUI7UUFDMUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFFM0IsZ0JBQWdCO1FBQ2hCLElBQUcsU0FBUyxDQUFDLE9BQU8sRUFBRTtZQUNsQixJQUFJLEtBQVcsRUFBRSxLQUFXLENBQUM7WUFFN0IsS0FBSyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUM7WUFDeEIsS0FBSyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUM7WUFFeEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzNELElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxLQUFLLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDL0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUM7WUFFakQsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDO1lBQ25DLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1NBQ3RDO1FBQ0QsS0FBSzthQUNBO1lBQ0QsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsQ0FBQztTQUN4RDtJQUNMLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsWUFBWSxDQUFDLE1BQWUsRUFBRSxTQUFpQjtRQUMzQyxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQztRQUV2QixJQUFHLE1BQU0sRUFBRTtZQUNQLElBQUksQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDO1NBQ2hDO2FBQ0k7WUFDRCxJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztTQUN0QjtJQUNMLENBQUM7Q0FDSjtBQTNGRCw0QkEyRkMiLCJmaWxlIjoiNy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvZHkgfSBmcm9tIFwiLi4vYm9keS9ib2R5XCI7XHJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsXCI7XHJcbmltcG9ydCB7IFBvbHkgfSBmcm9tIFwiLi4vY29tbW9uL3ZlcnRpY2VzXCI7XHJcbmltcG9ydCB7IEFyYyB9IGZyb20gXCIuLi9jb21tb24vYXJjc1wiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDnorDmkp7kv6Hmga/vvIznorDmkp7mtYHlvaLvvIzmjqXop6bngrlcclxuICovXHJcblxyXG5leHBvcnQgdHlwZSBHZW9tZXRyeSA9IFBvbHkgfCBBcmM7XHJcblxyXG5cclxuLy8g5o6l6Kem54K55L+h5oGvXHJcbmV4cG9ydCBjbGFzcyBDb250YWN0IHtcclxuICAgIHZlcnRleDogVmVjdG9yID0gbmV3IFZlY3RvcigpO1xyXG4gICAgaW52ZXJzZU1hc3M6IG51bWJlcjtcclxuICAgIHNoYXJlTm9ybWFsOiBudW1iZXI7XHJcbiAgICBzaGFyZVRhbmdlbnQ6IG51bWJlcjtcclxuICAgIG5vcm1hbEltcHVsc2U6IG51bWJlcjtcclxuICAgIHRhbmdlbnRJbXB1bHNlOiBudW1iZXI7XHJcbiAgICBvZmZzZXRBOiBWZWN0b3I7XHJcbiAgICBvZmZzZXRCOiBWZWN0b3I7XHJcbiAgICBiaWFzOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IodmVydGV4OiBWZWN0b3IpIHtcclxuICAgICAgICB0aGlzLnZlcnRleC54ID0gdmVydGV4Lng7XHJcbiAgICAgICAgdGhpcy52ZXJ0ZXgueSA9IHZlcnRleC55O1xyXG4gICAgICAgIHRoaXMuc2hhcmVOb3JtYWwgPSAwO1xyXG4gICAgICAgIHRoaXMuc2hhcmVUYW5nZW50ID0gMDtcclxuICAgICAgICB0aGlzLmludmVyc2VNYXNzID0gMDtcclxuICAgICAgICB0aGlzLm5vcm1hbEltcHVsc2UgPSAwO1xyXG4gICAgICAgIHRoaXMudGFuZ2VudEltcHVsc2UgPSAwO1xyXG4gICAgICAgIHRoaXMuYmlhcyA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5LiA5Liq56Kw5pKe57uT5p6E77yM5YyF5ZCr5LqG56Kw5pKe55qE5omA5pyJ5L+h5oGvXHJcbiAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbGxpc2lvbiB7XHJcbiAgICAvLyDnorDmkp7liJrkvZNBXHJcbiAgICBib2R5QTogQm9keTtcclxuICAgIC8vIOeisOaSnuWImuS9k0JcclxuICAgIGJvZHlCOiBCb2R5O1xyXG4gICAgLy8g56Kw5pKe5a2Q5Zu+5b2iQVxyXG4gICAgcGFydEE6IEdlb21ldHJ5O1xyXG4gICAgLy8g56Kw5pKe5a2Q5Zu+5b2iQlxyXG4gICAgcGFydEI6IEdlb21ldHJ5O1xyXG4gICAgLy8g56Kw5pKe5rOV57q/XHJcbiAgICBub3JtYWw6IFZlY3RvciA9IG5ldyBWZWN0b3IoKTtcclxuICAgIC8vIOeisOaSnuWIh+e6v1xyXG4gICAgdGFuZ2VudDogVmVjdG9yID0gbmV3IFZlY3RvcigpO1xyXG4gICAgLy8g5o6l6Kem54K5XHJcbiAgICBjb250YWN0czogQ29udGFjdFtdO1xyXG4gICAgLy8g56m/6YCP5ZCR6YePXHJcbiAgICBwZW5ldHJhdGlvbjogVmVjdG9yID0gbmV3IFZlY3RvcigpO1xyXG4gICAgLy8g56m/6YCP5rex5bqmXHJcbiAgICBkZXB0aDogbnVtYmVyO1xyXG4gICAgLy8g5piv5ZCm5Y+R55Sf5LqG56Kw5pKeXHJcbiAgICBjb2xsaWRlOiBib29sZWFuO1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiDnorDmkp7mtYHlvaJcclxuICog5Li76KaB55So5LqO6K6w5b2V55u45LqS56Kw5pKe55qE5Yia5L2T5ZKM6L+b6KGM56Kw5pKe57yT5a2YXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWFuaWZvbGQge1xyXG4gICAgLy8gaWRcclxuICAgIGlkOiBzdHJpbmc7XHJcblxyXG4gICAgYm9keUE6IEJvZHk7XHJcbiAgICBib2R5QjogQm9keTtcclxuICAgIHBhcnRBOiBHZW9tZXRyeTtcclxuICAgIHBhcnRCOiBHZW9tZXRyeTtcclxuICAgIC8vIOeisOaSnuS/oeaBr1xyXG4gICAgY29sbGlzaW9uOiBDb2xsaXNpb247XHJcbiAgICAvLyDnorDmkp7mjqXop6bngrlcclxuICAgIGNvbnRhY3RzOiBDb250YWN0W10gPSBbXTtcclxuICAgIC8vIOa/gOa0u+eKtuaAgVxyXG4gICAgLy8g5r+A5rS754q25oCB55qE5oSP5oCd5Y2z5LiK5LiA5qyh5pu05paw5pe25rWB5b2i5piv5ZCm5Y+R55Sf56Kw5pKe77yM6Iul5piv77yM5YiZ6KGo56S66K+l5rWB5b2i5Zyo5r+A5rS754q25oCBXHJcbiAgICBpc0FjdGl2ZTogYm9vbGVhbjtcclxuICAgIC8vIOehruiupOa/gOa0u+eKtuaAgVxyXG4gICAgLy8g56Gu6K6k5r+A5rS754q25oCB5oSP5oCd5Y2z5piv5b2T5YmN5pu05paw5pe25rWB5b2i5piv5ZCm5r+A5rS7XHJcbiAgICBjb25maXJtZWRBY3RpdmU6IGJvb2xlYW47XHJcbiAgICAvLyDmtYHlvaLliJvlu7rml7bpl7RcclxuICAgIHRpbWVDcmVhdGVkOiBudW1iZXI7XHJcbiAgICAvLyDmtYHlvaLmm7TmlrDml7bpl7RcclxuICAgIHRpbWVVcGRhdGVkOiBudW1iZXI7XHJcbiAgICAvLyDmkanmk6bliptcclxuICAgIGZyaWN0aW9uOiBudW1iZXI7XHJcbiAgICAvLyDmgaLlpI3ns7vmlbBcclxuICAgIHJlc3RpdHV0aW9uOiBudW1iZXI7XHJcbiAgICAvLyDotKjph4/lkozlgJLmlbBcclxuICAgIGludmVyc2VNYXNzOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29sbGlzaW9uOiBDb2xsaXNpb24sIHRpbWVTdGFtcDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5ib2R5QSA9IGNvbGxpc2lvbi5ib2R5QTtcclxuICAgICAgICB0aGlzLmJvZHlCID0gY29sbGlzaW9uLmJvZHlCO1xyXG4gICAgICAgIHRoaXMucGFydEEgPSBjb2xsaXNpb24ucGFydEE7XHJcbiAgICAgICAgdGhpcy5wYXJ0QiA9IGNvbGxpc2lvbi5wYXJ0QjtcclxuICAgICAgICB0aGlzLmlkID0gVXRpbC5jb21wb3NpdGVJZCh0aGlzLnBhcnRBLmlkLCB0aGlzLnBhcnRCLmlkKTtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbiA9IGNvbGxpc2lvbjtcclxuICAgICAgICB0aGlzLmNvbnRhY3RzID0gY29sbGlzaW9uLmNvbnRhY3RzO1xyXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY29uZmlybWVkQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnRpbWVDcmVhdGVkID0gdGltZVN0YW1wO1xyXG4gICAgICAgIHRoaXMudGltZVVwZGF0ZWQgPSB0aW1lU3RhbXA7XHJcbiAgICAgICAgdGhpcy5mcmljdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5yZXN0aXR1dGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5pbnZlcnNlTWFzcyA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlKGNvbGxpc2lvbiwgdGltZVN0YW1wKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOabtOaWsOa1geW9olxyXG4gICAgICogQHBhcmFtIGNvbGxpc2lvbiDnorDmkp7kv6Hmga9cclxuICAgICAqIEBwYXJhbSB0aW1lU3RhbXAg5pe26Ze05oizXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZShjb2xsaXNpb246IENvbGxpc2lvbiwgdGltZVN0YW1wOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbiA9IGNvbGxpc2lvbjtcclxuXHJcbiAgICAgICAgLy8g5aaC5p6c6K+l56Kw5pKe5a+555yf55qE5Y+R55Sf5LqG56Kw5pKeXHJcbiAgICAgICAgaWYoY29sbGlzaW9uLmNvbGxpZGUpIHtcclxuICAgICAgICAgICAgbGV0IGJvZHlBOiBCb2R5LCBib2R5QjogQm9keTtcclxuXHJcbiAgICAgICAgICAgIGJvZHlBID0gY29sbGlzaW9uLmJvZHlBO1xyXG4gICAgICAgICAgICBib2R5QiA9IGNvbGxpc2lvbi5ib2R5QjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZnJpY3Rpb24gPSBNYXRoLnNxcnQoYm9keUEuZnJpY3Rpb24gKiBib2R5Qi5mcmljdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdGl0dXRpb24gPSAoYm9keUEucmVzdGl0dXRpb24gKyBib2R5Qi5yZXN0aXR1dGlvbikgLyAyO1xyXG4gICAgICAgICAgICB0aGlzLmludmVyc2VNYXNzID0gYm9keUEuaW52TWFzcyArIGJvZHlCLmludk1hc3M7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRhY3RzID0gY29sbGlzaW9uLmNvbnRhY3RzO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUFjdGl2ZSh0cnVlLCB0aW1lU3RhbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlkKbliJlcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSAmJiB0aGlzLnRvZ2dsZUFjdGl2ZShmYWxzZSwgdGltZVN0YW1wKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmm7TmlLnmtYHlvaLmv4DmtLvnirbmgIFcclxuICAgICAqIEBwYXJhbSBhY3RpdmUg5r+A5rS754q25oCBXHJcbiAgICAgKiBAcGFyYW0gdGltZVN0YW1wIOaXtumXtOaIs1xyXG4gICAgICovXHJcbiAgICB0b2dnbGVBY3RpdmUoYWN0aXZlOiBib29sZWFuLCB0aW1lU3RhbXA6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBhY3RpdmU7XHJcblxyXG4gICAgICAgIGlmKGFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVVcGRhdGVkID0gdGltZVN0YW1wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWN0cyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\n/**\r\n * 刚体基类：所有刚体继承自Body\r\n */\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Body = exports.bodyType = void 0;\r\nconst vector_1 = __webpack_require__(1);\r\nconst util_1 = __webpack_require__(0);\r\nconst eventEmitter_1 = __webpack_require__(3);\r\n/**\r\n * 刚体类型\r\n * 圆形：0\r\n * 多边形：1\r\n * 胶囊体：2\r\n * 平面：3\r\n * 复合体：4\r\n */\r\nvar bodyType;\r\n(function (bodyType) {\r\n    bodyType[bodyType["circle"] = 0] = "circle";\r\n    bodyType[bodyType["polygon"] = 1] = "polygon";\r\n    bodyType[bodyType["capsule"] = 2] = "capsule";\r\n    bodyType[bodyType["composite"] = 3] = "composite";\r\n})(bodyType = exports.bodyType || (exports.bodyType = {}));\r\n;\r\nclass Body {\r\n    constructor(opt, type) {\r\n        this.id = util_1.Util.id();\r\n        this.type = type;\r\n        this.engine = null;\r\n        this.data = null;\r\n        this.origin = new vector_1.Vector(0, 0);\r\n        this.position = new vector_1.Vector(0, 0);\r\n        this.rotation = 0;\r\n        this.velocity = new vector_1.Vector(0, 0);\r\n        this.angularVelocity = 0;\r\n        this.motion = 0;\r\n        this.mass = 10;\r\n        this.area = 0;\r\n        this.density = 1;\r\n        this.inertia = 0;\r\n        this.invInertia = 0;\r\n        this.force = new vector_1.Vector(0, 0);\r\n        this.torque = 0;\r\n        this.friction = 0.4;\r\n        this.restitution = 1;\r\n        this.constraint = null;\r\n        this.fixed = false;\r\n        this.sleeping = false;\r\n        this.sleepCounter = 0;\r\n        this.mask = 1;\r\n        this.parts = [];\r\n        this.bound = null;\r\n        this.collisionNum = 0;\r\n        this.methods = {\r\n            filter: (maskA, maskB) => { return true; },\r\n            beforeAppend: (body) => { },\r\n            afterAppend: (body) => { },\r\n            beforeRemove: (body) => { },\r\n            afterRemove: (body) => { },\r\n            sleepStart: (body) => { },\r\n            sleepEnd: (body) => { }\r\n        };\r\n        util_1.Util.extend(this, opt);\r\n        if (this.fixed)\r\n            this.sleeping = true;\r\n        this.init(opt);\r\n        this.area = this.getArea();\r\n        this.density = this.getDensity();\r\n        this.invMass = this.getInvMass();\r\n        this.position = this.getCentroid();\r\n        this.inertia = this.getInertia();\r\n        this.invInertia = this.getInvInertia();\r\n        this.motion = 0;\r\n        // 设置渲染函数\r\n        this.setRender(() => { });\r\n    }\r\n    /**\r\n     * 初始化一些数据\r\n     */\r\n    init(opt) { }\r\n    /**\r\n     * 计算质量倒数\r\n     */\r\n    getInvMass() {\r\n        return (this.mass === 0 || this.fixed) ? 0 : 1 / this.mass;\r\n    }\r\n    /**\r\n     * 计算转动惯量倒数\r\n     */\r\n    getInvInertia() {\r\n        return (this.inertia === 0 || this.fixed) ? 0 : 1 / this.inertia;\r\n    }\r\n    /**\r\n     * 计算密度\r\n     */\r\n    getDensity() {\r\n        return this.mass / this.area;\r\n    }\r\n    /**\r\n     * 计算面积\r\n     * @override\r\n     */\r\n    getArea() {\r\n        return 1;\r\n    }\r\n    /**\r\n     * 计算质心\r\n     * @override\r\n     */\r\n    getCentroid() {\r\n        return null;\r\n    }\r\n    /**\r\n     * 计算转动惯量\r\n     * @override\r\n     */\r\n    getInertia() {\r\n        return 1;\r\n    }\r\n    /**\r\n     * 设置用户想要携带的信息数据\r\n     * @param data 数据\r\n     */\r\n    setData(data) {\r\n        if (data !== null && data !== undefined) {\r\n            this.data = data;\r\n        }\r\n    }\r\n    /**\r\n     * 设置刚体的引擎属性\r\n     * @param engine\r\n     */\r\n    setEngine(engine) {\r\n        this.engine = engine;\r\n    }\r\n    /**\r\n     * 设置渲染函数\r\n     * @param fn\r\n     */\r\n    setRender(fn) {\r\n        if (fn && typeof fn === \'function\')\r\n            this.render = fn;\r\n    }\r\n    /**\r\n     * 位移刚体\r\n     * @override\r\n     * @param distance 位移向量\r\n     */\r\n    translate(distance) { }\r\n    /**\r\n     * 旋转刚体\r\n     * @override\r\n     * @param angle 角度\r\n     * @param point 绕点\r\n     */\r\n    rotate(angle, point) { }\r\n    /**\r\n     * 发生碰撞\r\n     * @param body\r\n     */\r\n    collide(body) {\r\n        this.collisionNum++;\r\n        // 触发碰撞钩子\r\n        eventEmitter_1.Event.emit(this, \'collide\', this, body);\r\n    }\r\n    /**\r\n     * 发生分离\r\n     */\r\n    separate() {\r\n        this.collisionNum--;\r\n        // 触发分离钩子\r\n        if (this.collisionNum === 0) {\r\n            eventEmitter_1.Event.emit(this, \'isolate\', this);\r\n        }\r\n    }\r\n    /**\r\n     * 应用冲量\r\n     * @param impulse 冲量\r\n     * @param offset 作用点（本地坐标系）\r\n     * @param dt 步长\r\n     */\r\n    applyImpulse(impulse, offset) {\r\n        this.velocity.x += impulse.x * this.invMass;\r\n        this.velocity.y += impulse.y * this.invMass;\r\n        this.angularVelocity += this.invInertia * offset.cro(impulse);\r\n    }\r\n    /**\r\n     * 应用力\r\n     * @param force 力\r\n     * @param offset 作用点（本地坐标系）\r\n     */\r\n    applyForce(force, offset) {\r\n        this.force.x += force.x;\r\n        this.force.y += force.y;\r\n        if (offset !== undefined) {\r\n            this.torque += offset.cro(this.force);\r\n        }\r\n    }\r\n    /**\r\n     * 积分受力\r\n     * @param dt\r\n     */\r\n    integrateForces(dt) {\r\n        if (this.fixed || this.sleeping) {\r\n            return;\r\n        }\r\n        this.velocity.x += dt * this.force.x * this.invMass;\r\n        this.velocity.y += dt * this.force.y * this.invMass;\r\n        this.angularVelocity += dt * this.torque * this.invInertia;\r\n    }\r\n    /**\r\n     * 积分速度\r\n     * - 使用隐式欧拉积分\r\n     * @param dt\r\n     */\r\n    integrateVelocities(dt) {\r\n        if (this.fixed || this.sleeping) {\r\n            return;\r\n        }\r\n        let dx = dt * this.velocity.x, dy = dt * this.velocity.y, dr = dt * this.angularVelocity;\r\n        this.position.x += dx;\r\n        this.position.y += dy;\r\n        this.rotation += dr;\r\n        //位移刚体\r\n        this.translate(new vector_1.Vector(dx, dy));\r\n        // 旋转刚体\r\n        if (this.angularVelocity !== 0) {\r\n            this.rotate(dr, this.position);\r\n        }\r\n        // 更新标量速度\r\n        let speed = Math.hypot(dx, dy), angularSpeed = Math.abs(dr);\r\n        //更新动量\r\n        this.motion = speed * speed + angularSpeed * angularSpeed;\r\n        this.force.x = 0;\r\n        this.force.y = 0;\r\n        this.torque = 0;\r\n    }\r\n}\r\nexports.Body = Body;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9keS9ib2R5LnRzPzdkMzUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOzs7QUFFSCx3Q0FBd0M7QUFFeEMsc0NBQXNDO0FBRXRDLDhDQUE4QztBQUs5Qzs7Ozs7OztHQU9HO0FBQ0gsSUFBWSxRQUtYO0FBTEQsV0FBWSxRQUFRO0lBQ2hCLDJDQUFVO0lBQ1YsNkNBQVc7SUFDWCw2Q0FBVztJQUNYLGlEQUFhO0FBQ2pCLENBQUMsRUFMVyxRQUFRLEdBQVIsZ0JBQVEsS0FBUixnQkFBUSxRQUtuQjtBQUFBLENBQUM7QUFxREYsTUFBYSxJQUFJO0lBa0ZiLFlBQVksR0FBWSxFQUFFLElBQVk7UUFDbEMsSUFBSSxDQUFDLEVBQUUsR0FBRyxXQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDcEIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLGVBQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDL0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLGVBQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDakMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDbEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLGVBQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDakMsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDaEIsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7UUFDZixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztRQUNkLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFD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LE1BQU0sR0FBRyxLQUFLLEdBQUcsS0FBSyxHQUFHLFlBQVksR0FBRyxZQUFZLENBQUM7UUFFMUQsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUNwQixDQUFDO0NBQ0o7QUEzVUQsb0JBMlVDIiwiZmlsZSI6IjguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog5Yia5L2T5Z+657G777ya5omA5pyJ5Yia5L2T57un5om/6IeqQm9keVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBCb3VuZCB9IGZyb20gXCIuLi9jb2xsaXNpb24vYm91bmRcIjtcclxuaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi9jb21tb24vdXRpbFwiO1xyXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tIFwiLi4vY29yZS9lbmdpbmVcIjtcclxuaW1wb3J0IHsgRXZlbnQgfSBmcm9tIFwiLi4vZXZlbnQvZXZlbnRFbWl0dGVyXCI7XHJcbmltcG9ydCB7IFBvbHlnb25PcHQgfSBmcm9tIFwiLi9wb2x5Z29uXCI7XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiDliJrkvZPnsbvlnotcclxuICog5ZyG5b2i77yaMFxyXG4gKiDlpJrovrnlvaLvvJoxXHJcbiAqIOiDtuWbiuS9k++8mjJcclxuICog5bmz6Z2i77yaM1xyXG4gKiDlpI3lkIjkvZPvvJo0XHJcbiAqL1xyXG5leHBvcnQgZW51bSBib2R5VHlwZSB7XHJcbiAgICBjaXJjbGUgPSAwLFxyXG4gICAgcG9seWdvbiA9IDEsXHJcbiAgICBjYXBzdWxlID0gMixcclxuICAgIGNvbXBvc2l0ZSA9IDNcclxufTtcclxuXHJcblxyXG5cclxuXHJcbi8vIGJvZHnphY3nva7mjqXlj6NcclxuZXhwb3J0IGludGVyZmFjZSBCb2R5T3B0IHtcclxuICAgIC8vIOWumuS9jeWOn+eCuVxyXG4gICAgb3JpZ2luOiBWZWN0b3I7XHJcbiAgICAvLyDml4vovazop5LluqZcclxuICAgIHJvdGF0aW9uPzogbnVtYmVyO1xyXG5cclxuICAgIC8vIOWIneWni+mAn+W6plxyXG4gICAgdmVsb2NpdHk/OiBWZWN0b3I7XHJcbiAgICAvLyDliJ3lp4vop5LpgJ/luqZcclxuICAgIGFuZ3VsYXJWZWxvY2l0eT86IG51bWJlcjtcclxuICAgIC8vIOi0qOmHj1xyXG4gICAgbWFzcz86IG51bWJlcjtcclxuICAgIC8vIOWKqOaRqeaTpuWKm1xyXG4gICAgZHluYW1pY0ZyaWN0aW9uPzogbnVtYmVyO1xyXG4gICAgLy8g6Z2Z5pGp5pOm5YqbXHJcbiAgICBzdGF0aWNGcmljdGlvbj86IG51bWJlcjtcclxuICAgIC8vIOaBouWkjeezu+aVsFxyXG4gICAgcmVzdGl0dXRpb24/OiBudW1iZXI7XHJcbiAgICAvLyDnuqbmnZ9cclxuICAgIGNvbnN0cmFpbnQ/OiBWZWN0b3I7XHJcbiAgICAvLyDmmK/lkKblm7rlrppcclxuICAgIGZpeGVkPzogYm9vbGVhbjtcclxuICAgIC8vIOaQuuW4pueahOaVsOaNrlxyXG4gICAgZGF0YT86IGFueTtcclxuICAgIC8vIOeisOaSnueggVxyXG4gICAgbWFzaz86IG51bWJlcjtcclxuXHJcbiAgICAvLyDmlrnms5VcclxuICAgIG1ldGhvZHM/OiB7XHJcbiAgICAgICAgLy8g56Kw5pKe6L+H5ruk5ZmoXHJcbiAgICAgICAgZmlsdGVyOiAobWFza0E6IG51bWJlciwgbWFza0I6IG51bWJlcikgPT4gYm9vbGVhbjtcclxuICAgICAgICAvLyDmjILovb3liY1cclxuICAgICAgICBiZWZvcmVBcHBlbmQ6IChib2R5OiBCb2R5KSA9PiB2b2lkO1xyXG4gICAgICAgIC8vIOaMgui9veWQjlxyXG4gICAgICAgIGFmdGVyQXBwZW5kOiAoYm9keTogQm9keSkgPT4gdm9pZDtcclxuICAgICAgICAvLyDnp7vpmaTliY1cclxuICAgICAgICBiZWZvcmVSZW1vdmU6IChib2R5OiBCb2R5KSA9PiB2b2lkO1xyXG4gICAgICAgIC8vIOenu+mZpOWQjlxyXG4gICAgICAgIGFmdGVyUmVtb3ZlOiAoYm9keTogQm9keSkgPT4gdm9pZDtcclxuICAgICAgICAvLyDlvIDlp4vkvJHnnKBcclxuICAgICAgICBzbGVlcFN0YXJ0OiAoYm9keTogQm9keSkgPT4gdm9pZDtcclxuICAgICAgICAvLyDnu5PmnZ/kvJHnnKBcclxuICAgICAgICBzbGVlcEVuZDogKGJvZHk6IEJvZHkpID0+IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQm9keSB7XHJcbiAgICAvLyBpZFxyXG4gICAgaWQ6IG51bWJlcjtcclxuICAgIC8vIOexu+Wei1xyXG4gICAgdHlwZTogbnVtYmVyO1xyXG4gICAgLy8g5byV5pOO5a6e5L6LXHJcbiAgICBlbmdpbmU6IEVuZ2luZTtcclxuICAgIC8vIOaQuuW4pueahOS7u+aEj+S/oeaBr1xyXG4gICAgZGF0YTogYW55O1xyXG4gICAgLy8g5pys5Zyw5Z2Q5qCH5Y6f54K5XHJcbiAgICBvcmlnaW46IFZlY3RvcjtcclxuICAgIC8vIOS9jee9rlxyXG4gICAgcG9zaXRpb246IFZlY3RvcjsgICBcclxuICAgIC8vIOaWueWQkSBcclxuICAgIHJvdGF0aW9uOiBudW1iZXI7XHJcblxyXG4gICAgLy8g6YCf5bqmXHJcbiAgICB2ZWxvY2l0eTogVmVjdG9yO1xyXG4gICAgLy8g6KeS6YCf5bqmXHJcbiAgICBhbmd1bGFyVmVsb2NpdHk6IG51bWJlcjtcclxuICAgIC8vIOWKqOmHj1xyXG4gICAgbW90aW9uOiBudW1iZXI7XHJcblxyXG4gICAgLy8g6LSo6YePXHJcbiAgICBtYXNzOiBudW1iZXI7XHJcbiAgICAvLyDotKjph4/lgJLmlbBcclxuICAgIGludk1hc3M6IG51bWJlcjtcclxuICAgIC8vIOmdouenr1xyXG4gICAgYXJlYTogbnVtYmVyO1xyXG4gICAgLy8g5a+G5bqmXHJcbiAgICBkZW5zaXR5OiBudW1iZXI7XHJcbiAgICAvLyDovazliqjmg6/ph49cclxuICAgIGluZXJ0aWE6IG51bWJlcjtcclxuICAgIC8vIOi9rOWKqOaDr+mHj+WAkuaVsFxyXG4gICAgaW52SW5lcnRpYTogbnVtYmVyO1xyXG4gICAgLy8g5L2c55So5YqbXHJcbiAgICBmb3JjZTogVmVjdG9yO1xyXG4gICAgLy8g5omt55+pXHJcbiAgICB0b3JxdWU6IG51bWJlcjtcclxuICAgIC8vIOaRqeaTpuezu+aVsFxyXG4gICAgZnJpY3Rpb246IG51bWJlcjtcclxuICAgIC8vIOaBouWkjeezu+aVsFxyXG4gICAgcmVzdGl0dXRpb246IG51bWJlcjtcclxuICAgIC8vIOe6puadn+eCuVxyXG4gICAgY29uc3RyYWludDogVmVjdG9yO1xyXG4gICAgLy8g5Zu65a6aXHJcbiAgICBmaXhlZDogYm9vbGVhbjtcclxuICAgIC8vIOS8keecoFxyXG4gICAgc2xlZXBpbmc6IGJvb2xlYW47XHJcbiAgICAvLyDkvJHnnKDorqHmlbDlmahcclxuICAgIHNsZWVwQ291bnRlcjogbnVtYmVyO1xyXG4gICAgLy8g5Yia5L2T5omA5Y+X55qE56Kw5pKe5Liq5pWwXHJcbiAgICBjb2xsaXNpb25OdW06IG51bWJlcjtcclxuICAgIC8vIOeisOaSnueggVxyXG4gICAgbWFzazogbnVtYmVyO1xyXG4gICAgLy8g5a2Q5Zu+5b2iXHJcbiAgICBwYXJ0cztcclxuICAgIC8vIOWMheWbtOebklxyXG4gICAgYm91bmQ6IEJvdW5kO1xyXG5cclxuICAgIC8vIOaWueazlVxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIC8vIOeisOaSnui/h+a7pOWZqFxyXG4gICAgICAgIGZpbHRlcjogKG1hc2tBOiBudW1iZXIsIG1hc2tCOiBudW1iZXIpID0+IGJvb2xlYW47XHJcbiAgICAgICAgLy8g5oyC6L295YmNXHJcbiAgICAgICAgYmVmb3JlQXBwZW5kOiAoYm9keTogQm9keSkgPT4gdm9pZDtcclxuICAgICAgICAvLyDmjILovb3lkI5cclxuICAgICAgICBhZnRlckFwcGVuZDogKGJvZHk6IEJvZHkpID0+IHZvaWQ7XHJcbiAgICAgICAgLy8g56e76Zmk5YmNXHJcbiAgICAgICAgYmVmb3JlUmVtb3ZlOiAoYm9keTogQm9keSkgPT4gdm9pZDtcclxuICAgICAgICAvLyDnp7vpmaTlkI5cclxuICAgICAgICBhZnRlclJlbW92ZTogKGJvZHk6IEJvZHkpID0+IHZvaWQ7XHJcbiAgICAgICAgLy8g5byA5aeL5LyR55ygXHJcbiAgICAgICAgc2xlZXBTdGFydDogKGJvZHk6IEJvZHkpID0+IHZvaWQ7XHJcbiAgICAgICAgLy8g57uT5p2f5LyR55ygXHJcbiAgICAgICAgc2xlZXBFbmQ6IChib2R5OiBCb2R5KSA9PiB2b2lkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOa4suafk+WHveaVsFxyXG4gICAgcmVuZGVyOiBGdW5jdGlvbjtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0OiBCb2R5T3B0LCB0eXBlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmlkID0gVXRpbC5pZCgpO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5lbmdpbmUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBuZXcgVmVjdG9yKDAsIDApO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjdG9yKDAsIDApO1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSAwO1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjdG9yKDAsIDApO1xyXG4gICAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5ID0gMDtcclxuICAgICAgICB0aGlzLm1vdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5tYXNzID0gMTA7XHJcbiAgICAgICAgdGhpcy5hcmVhID0gMDtcclxuICAgICAgICB0aGlzLmRlbnNpdHkgPSAxO1xyXG4gICAgICAgIHRoaXMuaW5lcnRpYSA9IDA7XHJcbiAgICAgICAgdGhpcy5pbnZJbmVydGlhID0gMDtcclxuICAgICAgICB0aGlzLmZvcmNlID0gbmV3IFZlY3RvcigwLCAwKTtcclxuICAgICAgICB0aGlzLnRvcnF1ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5mcmljdGlvbiA9IDAuNDtcclxuICAgICAgICB0aGlzLnJlc3RpdHV0aW9uID0gMTtcclxuICAgICAgICB0aGlzLmNvbnN0cmFpbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZml4ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNsZWVwaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zbGVlcENvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMubWFzayA9IDE7XHJcbiAgICAgICAgdGhpcy5wYXJ0cyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYm91bmQgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmNvbGxpc2lvbk51bSA9IDA7XHJcbiAgICAgICAgdGhpcy5tZXRob2RzID0ge1xyXG4gICAgICAgICAgICBmaWx0ZXI6IChtYXNrQTogbnVtYmVyLCBtYXNrQjogbnVtYmVyKSA9PiB7IHJldHVybiB0cnVlOyB9LFxyXG4gICAgICAgICAgICBiZWZvcmVBcHBlbmQ6IChib2R5OiBCb2R5KSA9PiB7fSxcclxuICAgICAgICAgICAgYWZ0ZXJBcHBlbmQ6IChib2R5OiBCb2R5KSA9PiB7fSxcclxuICAgICAgICAgICAgYmVmb3JlUmVtb3ZlOiAoYm9keTogQm9keSkgPT4ge30sXHJcbiAgICAgICAgICAgIGFmdGVyUmVtb3ZlOiAoYm9keTogQm9keSkgPT4ge30sXHJcbiAgICAgICAgICAgIHNsZWVwU3RhcnQ6IChib2R5OiBCb2R5KSA9PiB7fSxcclxuICAgICAgICAgICAgc2xlZXBFbmQ6IChib2R5OiBCb2R5KSA9PiB7fVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVXRpbC5leHRlbmQodGhpcywgb3B0KTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5maXhlZCkgdGhpcy5zbGVlcGluZyA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdChvcHQpO1xyXG4gICAgICAgIHRoaXMuYXJlYSA9IHRoaXMuZ2V0QXJlYSgpO1xyXG4gICAgICAgIHRoaXMuZGVuc2l0eSA9IHRoaXMuZ2V0RGVuc2l0eSgpO1xyXG4gICAgICAgIHRoaXMuaW52TWFzcyA9IHRoaXMuZ2V0SW52TWFzcygpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLmdldENlbnRyb2lkKCk7XHJcbiAgICAgICAgdGhpcy5pbmVydGlhID0gdGhpcy5nZXRJbmVydGlhKCk7XHJcbiAgICAgICAgdGhpcy5pbnZJbmVydGlhID0gdGhpcy5nZXRJbnZJbmVydGlhKCk7XHJcbiAgICAgICAgdGhpcy5tb3Rpb24gPSAwO1xyXG5cclxuICAgICAgICAvLyDorr7nva7muLLmn5Plh73mlbBcclxuICAgICAgICB0aGlzLnNldFJlbmRlcigoKSA9PiB7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJ3lp4vljJbkuIDkupvmlbDmja5cclxuICAgICAqL1xyXG4gICAgaW5pdChvcHQ6IFBvbHlnb25PcHQpIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorqHnrpfotKjph4/lgJLmlbBcclxuICAgICAqL1xyXG4gICAgZ2V0SW52TWFzcygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5tYXNzID09PSAwIHx8IHRoaXMuZml4ZWQpPyAwOiAxIC8gdGhpcy5tYXNzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X6L2s5Yqo5oOv6YeP5YCS5pWwXHJcbiAgICAgKi9cclxuICAgIGdldEludkluZXJ0aWEoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuaW5lcnRpYSA9PT0gMCB8fCB0aGlzLmZpeGVkKT8gMDogMSAvIHRoaXMuaW5lcnRpYTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+WvhuW6plxyXG4gICAgICovXHJcbiAgICBnZXREZW5zaXR5KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFzcyAvIHRoaXMuYXJlYTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+mdouenr1xyXG4gICAgICogQG92ZXJyaWRlXHJcbiAgICAgKi9cclxuICAgIGdldEFyZWEoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+i0qOW/g1xyXG4gICAgICogQG92ZXJyaWRlXHJcbiAgICAgKi9cclxuICAgIGdldENlbnRyb2lkKCk6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorqHnrpfovazliqjmg6/ph49cclxuICAgICAqIEBvdmVycmlkZVxyXG4gICAgICovXHJcbiAgICBnZXRJbmVydGlhKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICog6K6+572u55So5oi35oOz6KaB5pC65bim55qE5L+h5oGv5pWw5o2uXHJcbiAgICAgKiBAcGFyYW0gZGF0YSDmlbDmja5cclxuICAgICAqL1xyXG4gICAgc2V0RGF0YShkYXRhOiBhbnkpIHtcclxuICAgICAgICBpZihkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruWImuS9k+eahOW8leaTjuWxnuaAp1xyXG4gICAgICogQHBhcmFtIGVuZ2luZSBcclxuICAgICAqL1xyXG4gICAgc2V0RW5naW5lKGVuZ2luZTogRW5naW5lKSB7XHJcbiAgICAgICAgdGhpcy5lbmdpbmUgPSBlbmdpbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7muLLmn5Plh73mlbBcclxuICAgICAqIEBwYXJhbSBmbiBcclxuICAgICAqL1xyXG4gICAgc2V0UmVuZGVyKGZuOiAoYm9keTogQm9keSwgZHQ6IG51bWJlciwgdGltZVN0YW1wOiBudW1iZXIpID0+IHZvaWQpIHtcclxuICAgICAgICBpZihmbiAmJiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHRoaXMucmVuZGVyID0gZm47XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkvY3np7vliJrkvZNcclxuICAgICAqIEBvdmVycmlkZVxyXG4gICAgICogQHBhcmFtIGRpc3RhbmNlIOS9jeenu+WQkemHj1xyXG4gICAgICovXHJcbiAgICB0cmFuc2xhdGUoZGlzdGFuY2U6IFZlY3Rvcikge31cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaXi+i9rOWImuS9k1xyXG4gICAgICogQG92ZXJyaWRlXHJcbiAgICAgKiBAcGFyYW0gYW5nbGUg6KeS5bqmXHJcbiAgICAgKiBAcGFyYW0gcG9pbnQg57uV54K5XHJcbiAgICAgKi9cclxuICAgIHJvdGF0ZShhbmdsZTogbnVtYmVyLCBwb2ludDogVmVjdG9yKSB7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y+R55Sf56Kw5pKeXHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqL1xyXG4gICAgY29sbGlkZShib2R5OiBCb2R5KSB7XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25OdW0rKztcclxuICAgICAgICAvLyDop6blj5HnorDmkp7pkqnlrZBcclxuICAgICAgICBFdmVudC5lbWl0KHRoaXMsICdjb2xsaWRlJywgdGhpcywgYm9keSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlj5HnlJ/liIbnprtcclxuICAgICAqL1xyXG4gICAgc2VwYXJhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25OdW0tLTtcclxuXHJcbiAgICAgICAgLy8g6Kem5Y+R5YiG56a76ZKp5a2QXHJcbiAgICAgICAgaWYodGhpcy5jb2xsaXNpb25OdW0gPT09IDApIHtcclxuICAgICAgICAgICAgRXZlbnQuZW1pdCh0aGlzLCAnaXNvbGF0ZScsIHRoaXMpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bqU55So5Yay6YePXHJcbiAgICAgKiBAcGFyYW0gaW1wdWxzZSDlhrLph49cclxuICAgICAqIEBwYXJhbSBvZmZzZXQg5L2c55So54K577yI5pys5Zyw5Z2Q5qCH57O777yJXHJcbiAgICAgKiBAcGFyYW0gZHQg5q2l6ZW/XHJcbiAgICAgKi9cclxuICAgIGFwcGx5SW1wdWxzZShpbXB1bHNlOiBWZWN0b3IsIG9mZnNldDogVmVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eS54ICs9IGltcHVsc2UueCAqIHRoaXMuaW52TWFzcztcclxuICAgICAgICB0aGlzLnZlbG9jaXR5LnkgKz0gaW1wdWxzZS55ICogdGhpcy5pbnZNYXNzO1xyXG4gICAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5ICs9IHRoaXMuaW52SW5lcnRpYSAqIG9mZnNldC5jcm8oaW1wdWxzZSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bqU55So5YqbXHJcbiAgICAgKiBAcGFyYW0gZm9yY2Ug5YqbXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IOS9nOeUqOeCue+8iOacrOWcsOWdkOagh+ezu++8iVxyXG4gICAgICovXHJcbiAgICBhcHBseUZvcmNlKGZvcmNlOiBWZWN0b3IsIG9mZnNldD86IFZlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuZm9yY2UueCArPSBmb3JjZS54O1xyXG4gICAgICAgIHRoaXMuZm9yY2UueSArPSBmb3JjZS55O1xyXG5cclxuICAgICAgICBpZihvZmZzZXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnRvcnF1ZSArPSBvZmZzZXQuY3JvKHRoaXMuZm9yY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiDnp6/liIblj5fliptcclxuICAgICAqIEBwYXJhbSBkdCBcclxuICAgICAqL1xyXG4gICAgaW50ZWdyYXRlRm9yY2VzKGR0OiBudW1iZXIpIHtcclxuICAgICAgICBpZih0aGlzLmZpeGVkIHx8IHRoaXMuc2xlZXBpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eS54ICs9IGR0ICogdGhpcy5mb3JjZS54ICogdGhpcy5pbnZNYXNzO1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkueSArPSBkdCAqIHRoaXMuZm9yY2UueSAqIHRoaXMuaW52TWFzcztcclxuICAgICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSArPSBkdCAqIHRoaXMudG9ycXVlICogdGhpcy5pbnZJbmVydGlhOyBcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOenr+WIhumAn+W6plxyXG4gICAgICogLSDkvb/nlKjpmpDlvI/mrKfmi4nnp6/liIZcclxuICAgICAqIEBwYXJhbSBkdCBcclxuICAgICAqL1xyXG4gICAgaW50ZWdyYXRlVmVsb2NpdGllcyhkdDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYodGhpcy5maXhlZCB8fCB0aGlzLnNsZWVwaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkeCA9IGR0ICogdGhpcy52ZWxvY2l0eS54LFxyXG4gICAgICAgICAgICBkeSA9IGR0ICogdGhpcy52ZWxvY2l0eS55LFxyXG4gICAgICAgICAgICBkciA9IGR0ICogdGhpcy5hbmd1bGFyVmVsb2NpdHk7XHJcblxyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueCArPSBkeDtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgKz0gZHk7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbiArPSBkcjtcclxuXHJcbiAgICAgICAgLy/kvY3np7vliJrkvZNcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZShuZXcgVmVjdG9yKGR4LCBkeSkpO1xyXG4gICAgICAgIC8vIOaXi+i9rOWImuS9k1xyXG4gICAgICAgIGlmKHRoaXMuYW5ndWxhclZlbG9jaXR5ICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRlKGRyLCB0aGlzLnBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOabtOaWsOagh+mHj+mAn+W6plxyXG4gICAgICAgIGxldCBzcGVlZCA9IE1hdGguaHlwb3QoZHgsIGR5KSxcclxuICAgICAgICAgICAgYW5ndWxhclNwZWVkID0gTWF0aC5hYnMoZHIpO1xyXG5cclxuICAgICAgICAvL+abtOaWsOWKqOmHj1xyXG4gICAgICAgIHRoaXMubW90aW9uID0gc3BlZWQgKiBzcGVlZCArIGFuZ3VsYXJTcGVlZCAqIGFuZ3VsYXJTcGVlZDtcclxuXHJcbiAgICAgICAgdGhpcy5mb3JjZS54ID0gMDtcclxuICAgICAgICB0aGlzLmZvcmNlLnkgPSAwO1xyXG4gICAgICAgIHRoaXMudG9ycXVlID0gMDtcclxuICAgIH1cclxufSAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\n/**\r\n * 多边形刚体\r\n */\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Polygon = void 0;\r\nconst body_1 = __webpack_require__(8);\r\nconst vertices_1 = __webpack_require__(2);\r\nclass Polygon extends body_1.Body {\r\n    constructor(opt) {\r\n        super(opt, body_1.bodyType.polygon);\r\n        // 用户一开始便设置了旋转的情况\r\n        if (this.rotation) {\r\n            this.rotate(this.rotation, this.position);\r\n        }\r\n    }\r\n    init(opt) {\r\n        // 将向量转化为顶点\r\n        if (opt.vertices) {\r\n            this.vertexList = opt.vertices.slice(0);\r\n        }\r\n        // 顶点数 > 3才构成多边形\r\n        if (this.vertexList && this.vertexList.length < 3)\r\n            return;\r\n        this.parts = this.getParts();\r\n    }\r\n    /**\r\n     * 获取世界坐标\r\n     */\r\n    getPoly() {\r\n        return vertices_1.Vertices.create(this, vertices_1.Vertices.transform2World(this.origin, this.vertexList));\r\n    }\r\n    getArea() {\r\n        return Math.abs(vertices_1.Vertices.getArea(this.vertexList));\r\n    }\r\n    getCentroid() {\r\n        return vertices_1.Vertices.getCentroid(this.vertexList);\r\n    }\r\n    getInertia() {\r\n        return vertices_1.Vertices.getInertia(this.vertexList, this.mass, this.position);\r\n    }\r\n    translate(distance) {\r\n        // 位移图形原点\r\n        this.origin.x += distance.x;\r\n        this.origin.y += distance.y;\r\n        // 位移多边形顶点\r\n        vertices_1.Vertices.translate(this.poly, distance);\r\n        // 若多边形是凹多边形, 位移子多边形包围盒\r\n        if (this.isConcave) {\r\n            for (let i = 0; i < this.parts.length; i++) {\r\n                let part = this.parts[i];\r\n                part.center.x += distance.x;\r\n                part.center.y += distance.y;\r\n                part.bound.translate(distance);\r\n            }\r\n        }\r\n    }\r\n    rotate(radian, point) {\r\n        // 旋转顶点\r\n        vertices_1.Vertices.rotate(this.poly, radian, point);\r\n        // 若多边形是凹多边形, 更新子多边形包围盒\r\n        if (this.isConcave) {\r\n            for (let i = 0; i < this.parts.length; i++) {\r\n                let part = this.parts[i];\r\n                part.center.rot(radian, point, part.center);\r\n                part.bound.update(part.vertexList);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 分割多边形\r\n     * 若是凹多边形，则先分割为多个凸多边形，然后凸多边形再分割为小三角形\r\n     * 若是凸多边形，则直接分割为小三角形\r\n     */\r\n    getParts() {\r\n        let parts = [], poly = this.getPoly();\r\n        // 若是凹多边形\r\n        if (vertices_1.Vertices.isConcave(poly.vertexList)) {\r\n            this.isConcave = true;\r\n            parts = vertices_1.Vertices.divide(poly);\r\n        }\r\n        // 若是凸多边形\r\n        else {\r\n            parts = [poly];\r\n        }\r\n        this.bound = poly.bound;\r\n        this.poly = poly;\r\n        return parts;\r\n    }\r\n}\r\nexports.Polygon = Polygon;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9keS9wb2x5Z29uLnRzP2E2ZWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOzs7QUFFSCxzQ0FBaUQ7QUFDakQsMENBQWdFO0FBWWhFLE1BQWEsT0FBUSxTQUFRLFdBQUk7SUFRN0IsWUFBWSxHQUFlO1FBQ3ZCLEtBQUssQ0FBQyxHQUFHLEVBQUUsZUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTdCLGlCQUFpQjtRQUNqQixJQUFHLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDZCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQzdDO0lBQ0wsQ0FBQztJQUVELElBQUksQ0FBQyxHQUFlO1FBQ2hCLFdBQVc7UUFDWCxJQUFHLEdBQUcsQ0FBQyxRQUFRLEVBQUU7WUFDYixJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzNDO1FBRUQsZ0JBQWdCO1FBQ2hCLElBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBQUUsT0FBTztRQUV6RCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxPQUFPO1FBQ0gsT0FBTyxtQkFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsbUJBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUN6RixDQUFDO0lBRUQsT0FBTztRQUNILE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxtQkFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRUQsV0FBVztRQUNQLE9BQU8sbUJBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFFRCxVQUFVO1FBQ04sT0FBTyxtQkFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzFFLENBQUM7SUFFRCxTQUFTLENBQUMsUUFBZ0I7UUFDdEIsU0FBUztRQUNULElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQztRQUM1QixVQUFVO1FBQ1YsbUJBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztRQUV4Qyx1QkFBdUI7UUFDdkIsSUFBRyxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2YsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN2QyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUV6QixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUM1QixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUM1QixJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUNsQztTQUNKO0lBQ0wsQ0FBQztJQUVELE1BQU0sQ0FBQyxNQUFjLEVBQUUsS0FBYTtRQUNoQyxPQUFPO1FBQ1AsbUJBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFMUMsdUJBQXVCO1FBQ3ZCLElBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNmLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDdkMsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzVDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzthQUN0QztTQUNKO0lBQ0wsQ0FBQztJQUdEOzs7O09BSUc7SUFDSCxRQUFRO1FBQ0osSUFBSSxLQUFLLEdBQUcsRUFBRSxFQUNWLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFFMUIsU0FBUztRQUNULElBQUcsbUJBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQ3BDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1lBQ3RCLEtBQUssR0FBRyxtQkFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNqQztRQUNELFNBQVM7YUFDSjtZQUNELEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ2xCO1FBRUQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBRWpCLE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7Q0FDSjtBQTNHRCwwQkEyR0MiLCJmaWxlIjoiOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDlpJrovrnlvaLliJrkvZNcclxuICovXHJcblxyXG5pbXBvcnQgeyBCb2R5LCBCb2R5T3B0LCBib2R5VHlwZSB9IGZyb20gXCIuL2JvZHlcIjtcclxuaW1wb3J0IHsgVmVydGV4TGlzdCwgUG9seSwgVmVydGljZXMgfSBmcm9tIFwiLi4vY29tbW9uL3ZlcnRpY2VzXCI7XHJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQb2x5Z29uT3B0IGV4dGVuZHMgQm9keU9wdCB7XHJcbiAgICB2ZXJ0aWNlcz86IFZlY3RvcltdO1xyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBQb2x5Z29uIGV4dGVuZHMgQm9keSB7XHJcbiAgICAvLyDlpJrovrnlvaLpobbngrnvvIjmnKzlnLDlnZDmoIfvvIlcclxuICAgIHZlcnRleExpc3Q6IFZlcnRleExpc3Q7XHJcbiAgICAvLyDmmK/lkKbkuLrlh7nlpJrovrnlvaJcclxuICAgIGlzQ29uY2F2ZTogYm9vbGVhbjtcclxuXHJcbiAgICBwb2x5OiBQb2x5O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9wdDogUG9seWdvbk9wdCkge1xyXG4gICAgICAgIHN1cGVyKG9wdCwgYm9keVR5cGUucG9seWdvbik7XHJcblxyXG4gICAgICAgIC8vIOeUqOaIt+S4gOW8gOWni+S+v+iuvue9ruS6huaXi+i9rOeahOaDheWGtVxyXG4gICAgICAgIGlmKHRoaXMucm90YXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5yb3RhdGUodGhpcy5yb3RhdGlvbiwgdGhpcy5wb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXQob3B0OiBQb2x5Z29uT3B0KSB7XHJcbiAgICAgICAgLy8g5bCG5ZCR6YeP6L2s5YyW5Li66aG254K5XHJcbiAgICAgICAgaWYob3B0LnZlcnRpY2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmVydGV4TGlzdCA9IG9wdC52ZXJ0aWNlcy5zbGljZSgwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOmhtueCueaVsCA+IDPmiY3mnoTmiJDlpJrovrnlvaJcclxuICAgICAgICBpZih0aGlzLnZlcnRleExpc3QgJiYgdGhpcy52ZXJ0ZXhMaXN0Lmxlbmd0aCA8IDMpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5wYXJ0cyA9IHRoaXMuZ2V0UGFydHMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS4lueVjOWdkOagh1xyXG4gICAgICovXHJcbiAgICBnZXRQb2x5KCk6IFBvbHkge1xyXG4gICAgICAgIHJldHVybiBWZXJ0aWNlcy5jcmVhdGUodGhpcywgVmVydGljZXMudHJhbnNmb3JtMldvcmxkKHRoaXMub3JpZ2luLCB0aGlzLnZlcnRleExpc3QpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBcmVhKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKFZlcnRpY2VzLmdldEFyZWEodGhpcy52ZXJ0ZXhMaXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2VudHJvaWQoKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gVmVydGljZXMuZ2V0Q2VudHJvaWQodGhpcy52ZXJ0ZXhMaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbmVydGlhKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIFZlcnRpY2VzLmdldEluZXJ0aWEodGhpcy52ZXJ0ZXhMaXN0LCB0aGlzLm1hc3MsIHRoaXMucG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYW5zbGF0ZShkaXN0YW5jZTogVmVjdG9yKSB7XHJcbiAgICAgICAgLy8g5L2N56e75Zu+5b2i5Y6f54K5XHJcbiAgICAgICAgdGhpcy5vcmlnaW4ueCArPSBkaXN0YW5jZS54O1xyXG4gICAgICAgIHRoaXMub3JpZ2luLnkgKz0gZGlzdGFuY2UueTtcclxuICAgICAgICAvLyDkvY3np7vlpJrovrnlvaLpobbngrlcclxuICAgICAgICBWZXJ0aWNlcy50cmFuc2xhdGUodGhpcy5wb2x5LCBkaXN0YW5jZSk7XHJcblxyXG4gICAgICAgIC8vIOiLpeWkmui+ueW9ouaYr+WHueWkmui+ueW9oiwg5L2N56e75a2Q5aSa6L655b2i5YyF5Zu055uSXHJcbiAgICAgICAgaWYodGhpcy5pc0NvbmNhdmUpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMucGFydHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJ0ID0gdGhpcy5wYXJ0c1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBwYXJ0LmNlbnRlci54ICs9IGRpc3RhbmNlLng7XHJcbiAgICAgICAgICAgICAgICBwYXJ0LmNlbnRlci55ICs9IGRpc3RhbmNlLnk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0LmJvdW5kLnRyYW5zbGF0ZShkaXN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcm90YXRlKHJhZGlhbjogbnVtYmVyLCBwb2ludDogVmVjdG9yKSB7XHJcbiAgICAgICAgLy8g5peL6L2s6aG254K5XHJcbiAgICAgICAgVmVydGljZXMucm90YXRlKHRoaXMucG9seSwgcmFkaWFuLCBwb2ludCk7XHJcblxyXG4gICAgICAgIC8vIOiLpeWkmui+ueW9ouaYr+WHueWkmui+ueW9oiwg5pu05paw5a2Q5aSa6L655b2i5YyF5Zu055uSXHJcbiAgICAgICAgaWYodGhpcy5pc0NvbmNhdmUpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMucGFydHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJ0ID0gdGhpcy5wYXJ0c1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBwYXJ0LmNlbnRlci5yb3QocmFkaWFuLCBwb2ludCwgcGFydC5jZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgcGFydC5ib3VuZC51cGRhdGUocGFydC52ZXJ0ZXhMaXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliIblibLlpJrovrnlvaJcclxuICAgICAqIOiLpeaYr+WHueWkmui+ueW9ou+8jOWImeWFiOWIhuWJsuS4uuWkmuS4quWHuOWkmui+ueW9ou+8jOeEtuWQjuWHuOWkmui+ueW9ouWGjeWIhuWJsuS4uuWwj+S4ieinkuW9olxyXG4gICAgICog6Iul5piv5Ye45aSa6L655b2i77yM5YiZ55u05o6l5YiG5Ymy5Li65bCP5LiJ6KeS5b2iXHJcbiAgICAgKi9cclxuICAgIGdldFBhcnRzKCk6IFBvbHlbXSB7XHJcbiAgICAgICAgbGV0IHBhcnRzID0gW10sXHJcbiAgICAgICAgICAgIHBvbHkgPSB0aGlzLmdldFBvbHkoKTtcclxuXHJcbiAgICAgICAgLy8g6Iul5piv5Ye55aSa6L655b2iXHJcbiAgICAgICAgaWYoVmVydGljZXMuaXNDb25jYXZlKHBvbHkudmVydGV4TGlzdCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0NvbmNhdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBwYXJ0cyA9IFZlcnRpY2VzLmRpdmlkZShwb2x5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6Iul5piv5Ye45aSa6L655b2iXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcnRzID0gW3BvbHldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5ib3VuZCA9IHBvbHkuYm91bmQ7XHJcbiAgICAgICAgdGhpcy5wb2x5ID0gcG9seTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnRzO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n')},function(module,exports,__webpack_require__){"use strict";eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Torque = void 0;\r\nconst interface_1 = __webpack_require__(11);\r\nconst bodiesFactory_1 = __webpack_require__(22);\r\nconst util_1 = __webpack_require__(0);\r\nconst line_1 = __webpack_require__(5);\r\nconst arcs_1 = __webpack_require__(4);\r\nconst vector_1 = __webpack_require__(1);\r\ninterface_1.TorqueWorld['body'] = new bodiesFactory_1.BodiesFactory();\r\ninterface_1.TorqueWorld['util'] = util_1.Util;\r\ninterface_1.TorqueWorld['math'] = {\r\n    vector: (x, y) => new vector_1.Vector(x, y)\r\n};\r\ninterface_1.TorqueWorld['geometry'] = {\r\n    vertex: vector_1.Vector,\r\n    line: line_1.Lines,\r\n    arcs: arcs_1.Arcs\r\n};\r\nexports.Torque = interface_1.TorqueWorld;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdG9ycXVlLnRzP2JhZmYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNENBQStDO0FBQy9DLGdEQUFxRDtBQUNyRCxzQ0FBcUM7QUFDckMsc0NBQXNDO0FBQ3RDLHNDQUFxQztBQUNyQyx3Q0FBdUM7QUFFdkMsdUJBQVcsQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLDZCQUFhLEVBQUUsQ0FBQztBQUMxQyx1QkFBVyxDQUFDLE1BQU0sQ0FBQyxHQUFHLFdBQUksQ0FBQztBQUMzQix1QkFBVyxDQUFDLE1BQU0sQ0FBQyxHQUFHO0lBQ2xCLE1BQU0sRUFBRSxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsRUFBRSxDQUFDLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDckQsQ0FBQztBQUNGLHVCQUFXLENBQUMsVUFBVSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLGVBQU07SUFDZCxJQUFJLEVBQUUsWUFBSztJQUNYLElBQUksRUFBRSxXQUFJO0NBQ2IsQ0FBQztBQUVXLGNBQU0sR0FBRyx1QkFBVyxDQUFDIiwiZmlsZSI6IjEwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVG9ycXVlV29ybGQgfSBmcm9tIFwiLi9jb3JlL2ludGVyZmFjZVwiO1xyXG5pbXBvcnQgeyBCb2RpZXNGYWN0b3J5IH0gZnJvbSBcIi4vY29yZS9ib2RpZXNGYWN0b3J5XCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi9jb21tb24vdXRpbFwiO1xyXG5pbXBvcnQgeyBMaW5lcyB9IGZyb20gXCIuL2NvbW1vbi9saW5lXCI7XHJcbmltcG9ydCB7IEFyY3MgfSBmcm9tIFwiLi9jb21tb24vYXJjc1wiO1xyXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9tYXRoL3ZlY3RvclwiO1xyXG5cclxuVG9ycXVlV29ybGRbJ2JvZHknXSA9IG5ldyBCb2RpZXNGYWN0b3J5KCk7XHJcblRvcnF1ZVdvcmxkWyd1dGlsJ10gPSBVdGlsO1xyXG5Ub3JxdWVXb3JsZFsnbWF0aCddID0ge1xyXG4gICAgdmVjdG9yOiAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IG5ldyBWZWN0b3IoeCwgeSlcclxufTtcclxuVG9ycXVlV29ybGRbJ2dlb21ldHJ5J10gPSB7XHJcbiAgICB2ZXJ0ZXg6IFZlY3RvcixcclxuICAgIGxpbmU6IExpbmVzLFxyXG4gICAgYXJjczogQXJjc1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IFRvcnF1ZSA9IFRvcnF1ZVdvcmxkOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n")},function(module,exports,__webpack_require__){"use strict";eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TorqueWorld = void 0;\r\nconst util_1 = __webpack_require__(0);\r\nconst engine_1 = __webpack_require__(12);\r\nconst eventEmitter_1 = __webpack_require__(3);\r\n// Torque主类\r\nclass TorqueWorld {\r\n    constructor(width, height, opt) {\r\n        this.engine = new engine_1.Engine(width, height, opt);\r\n    }\r\n    /**\r\n     * 增加刚体\r\n     * @param body\r\n     */\r\n    append(body) {\r\n        if (Array.isArray(body)) {\r\n            body.map(b => this.append(b));\r\n        }\r\n        else {\r\n            eventEmitter_1.Event.emit(body, 'beforeAppend', body);\r\n            body.setEngine(this.engine);\r\n            this.engine.bodies.push(body);\r\n            eventEmitter_1.Event.emit(body, 'afterAppend', body);\r\n        }\r\n    }\r\n    /**\r\n     * 移除刚体\r\n     * @param body\r\n     */\r\n    remove(body) {\r\n        eventEmitter_1.Event.emit(body, 'beforeRemove', body);\r\n        util_1.Util.remove(this.engine.bodies, body);\r\n        eventEmitter_1.Event.emit(body, 'afterRemove', body);\r\n    }\r\n    /**\r\n     * 清空引擎\r\n     */\r\n    clear() {\r\n        this.engine.bodies.map(body => this.remove(body));\r\n        this.engine.manifoldTable.clear();\r\n    }\r\n    /**\r\n     * 克隆刚体\r\n     * @param body\r\n     */\r\n    clone(body) {\r\n        return null;\r\n    }\r\n    /**\r\n     * 设置引擎参数\r\n     * @param opt\r\n     */\r\n    setEngineOption(opt) {\r\n        this.engine.setOption(opt);\r\n    }\r\n    /**\r\n     * 添加时间步函数\r\n     * @param fn\r\n     */\r\n    step(fn) {\r\n        this.engine.timeStepper.addStep(fn);\r\n    }\r\n    /**\r\n     * 开始运行\r\n     * @param frameNumLimit 限制运行多少帧停下\r\n     */\r\n    start(frameNumLimit) {\r\n        this.engine.timeStepper.start(frameNumLimit);\r\n    }\r\n    /**\r\n     * 暂停运行\r\n     */\r\n    pause() {\r\n        this.engine.timeStepper.pause();\r\n    }\r\n}\r\nexports.TorqueWorld = TorqueWorld;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9pbnRlcmZhY2UudHM/MjY1ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxzQ0FBc0M7QUFDdEMseUNBQTZDO0FBQzdDLDhDQUE4QztBQU85QyxXQUFXO0FBQ1gsTUFBYSxXQUFXO0lBR3BCLFlBQVksS0FBYSxFQUFFLE1BQWMsRUFBRSxHQUFlO1FBQ3RELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxlQUFNLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsTUFBTSxDQUFDLElBQW1CO1FBQ3RCLElBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNwQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2pDO2FBQ0k7WUFDRCxvQkFBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ3ZDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QixvQkFBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3pDO0lBQ0wsQ0FBQztJQUNEOzs7T0FHRztJQUNILE1BQU0sQ0FBQyxJQUFVO1FBQ2Isb0JBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN2QyxXQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3RDLG9CQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSztRQUNELElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNsRCxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN0QyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsS0FBSyxDQUFDLElBQVU7UUFDWixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsZUFBZSxDQUFDLEdBQWM7UUFDMUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVEOzs7T0FHRztJQUNILElBQUksQ0FBQyxFQUF3QjtRQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVEOzs7T0FHRztJQUNILEtBQUssQ0FBQyxhQUFzQjtRQUN4QixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSztRQUNELElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3BDLENBQUM7Q0FDSjtBQTlFRCxrQ0E4RUMiLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb2R5IH0gZnJvbSBcIi4uL2JvZHkvYm9keVwiO1xyXG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsXCI7XHJcbmltcG9ydCB7IEVuZ2luZSwgRW5naW5lT3B0IH0gZnJvbSBcIi4vZW5naW5lXCI7XHJcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSBcIi4uL2V2ZW50L2V2ZW50RW1pdHRlclwiO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBUb3JxdWXkuLvnsbtcclxuZXhwb3J0IGNsYXNzIFRvcnF1ZVdvcmxkIHtcclxuICAgIHByaXZhdGUgZW5naW5lOiBFbmdpbmU7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIG9wdD86IEVuZ2luZU9wdCkge1xyXG4gICAgICAgIHRoaXMuZW5naW5lID0gbmV3IEVuZ2luZSh3aWR0aCwgaGVpZ2h0LCBvcHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5aKe5Yqg5Yia5L2TXHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqL1xyXG4gICAgYXBwZW5kKGJvZHk6IEJvZHkgfCBCb2R5W10pIHtcclxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGJvZHkpKSB7XHJcbiAgICAgICAgICAgIGJvZHkubWFwKGIgPT4gdGhpcy5hcHBlbmQoYikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgRXZlbnQuZW1pdChib2R5LCAnYmVmb3JlQXBwZW5kJywgYm9keSk7XHJcbiAgICAgICAgICAgIGJvZHkuc2V0RW5naW5lKHRoaXMuZW5naW5lKTtcclxuICAgICAgICAgICAgdGhpcy5lbmdpbmUuYm9kaWVzLnB1c2goYm9keSk7XHJcbiAgICAgICAgICAgIEV2ZW50LmVtaXQoYm9keSwgJ2FmdGVyQXBwZW5kJywgYm9keSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDnp7vpmaTliJrkvZNcclxuICAgICAqIEBwYXJhbSBib2R5IFxyXG4gICAgICovXHJcbiAgICByZW1vdmUoYm9keTogQm9keSkge1xyXG4gICAgICAgIEV2ZW50LmVtaXQoYm9keSwgJ2JlZm9yZVJlbW92ZScsIGJvZHkpO1xyXG4gICAgICAgIFV0aWwucmVtb3ZlKHRoaXMuZW5naW5lLmJvZGllcywgYm9keSk7XHJcbiAgICAgICAgRXZlbnQuZW1pdChib2R5LCAnYWZ0ZXJSZW1vdmUnLCBib2R5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOa4heepuuW8leaTjlxyXG4gICAgICovXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLmVuZ2luZS5ib2RpZXMubWFwKGJvZHkgPT4gdGhpcy5yZW1vdmUoYm9keSkpO1xyXG4gICAgICAgIHRoaXMuZW5naW5lLm1hbmlmb2xkVGFibGUuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWFi+mahuWImuS9k1xyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKi9cclxuICAgIGNsb25lKGJvZHk6IEJvZHkpOiBCb2R5IHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruW8leaTjuWPguaVsFxyXG4gICAgICogQHBhcmFtIG9wdCBcclxuICAgICAqL1xyXG4gICAgc2V0RW5naW5lT3B0aW9uKG9wdDogRW5naW5lT3B0KSB7XHJcbiAgICAgICAgdGhpcy5lbmdpbmUuc2V0T3B0aW9uKG9wdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDml7bpl7TmraXlh73mlbBcclxuICAgICAqIEBwYXJhbSBmbiBcclxuICAgICAqL1xyXG4gICAgc3RlcChmbjogKGR0OiBudW1iZXIpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLmVuZ2luZS50aW1lU3RlcHBlci5hZGRTdGVwKGZuKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOW8gOWni+i/kOihjFxyXG4gICAgICogQHBhcmFtIGZyYW1lTnVtTGltaXQg6ZmQ5Yi26L+Q6KGM5aSa5bCR5bin5YGc5LiLXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0KGZyYW1lTnVtTGltaXQ/OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmVuZ2luZS50aW1lU3RlcHBlci5zdGFydChmcmFtZU51bUxpbWl0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaaguWBnOi/kOihjFxyXG4gICAgICovXHJcbiAgICBwYXVzZSgpIHtcclxuICAgICAgICB0aGlzLmVuZ2luZS50aW1lU3RlcHBlci5wYXVzZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///11\n")},function(module,exports,__webpack_require__){"use strict";eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Engine = void 0;\r\nconst vector_1 = __webpack_require__(1);\r\nconst util_1 = __webpack_require__(0);\r\nconst timeStepper_1 = __webpack_require__(13);\r\nconst detector_1 = __webpack_require__(14);\r\nconst resolver_1 = __webpack_require__(18);\r\nconst sleeping_1 = __webpack_require__(20);\r\nconst manifoldTable_1 = __webpack_require__(21);\r\nconst eventEmitter_1 = __webpack_require__(3);\r\n// 主引擎\r\nclass Engine {\r\n    constructor(width, height, opt) {\r\n        this.width = width || 0;\r\n        this.height = height || 0;\r\n        this.gravity = new vector_1.Vector(0, 9);\r\n        this.enableSleeping = true;\r\n        this.enableCollisionDetection = true;\r\n        this.enableCollisionResolve = true;\r\n        this.methods = {\r\n            onTickStart: () => { },\r\n            onTickEnd: () => { },\r\n            beforeUpdate: () => { },\r\n            afterUpdate: () => { },\r\n            beforeRender: () => { },\r\n            afterRender: () => { },\r\n            onStart: () => { },\r\n            onPause: () => { },\r\n            collisionStart: (manifolds) => { },\r\n            collisionActive: (manifolds) => { },\r\n            collisionEnd: (manifolds) => { }\r\n        };\r\n        util_1.Util.merge(this, opt);\r\n        this.bodies = [];\r\n        this.timeStepper = new timeStepper_1.TimeStepper(this, opt);\r\n        this.detector = new detector_1.Detector(this, opt);\r\n        this.manifoldTable = new manifoldTable_1.ManifoldTable(opt);\r\n        this.resolver = new resolver_1.Resolver(this, opt);\r\n        this.sleeping = new sleeping_1.Sleeping(opt);\r\n    }\r\n    /**\r\n     * 引擎更新\r\n     * @param dt 步长\r\n     * @param timeStamp 时间戳\r\n     */\r\n    update(dt, timeStamp) {\r\n        let broadPhasePair = [], collisions = [];\r\n        if (this.enableSleeping) {\r\n            // 更新刚体的休眠/唤醒状态\r\n            this.sleeping.update(this.bodies);\r\n        }\r\n        for (let i = 0; i < this.bodies.length; i++) {\r\n            let force = this.gravity.scl(this.bodies[i].mass * 50);\r\n            // 应用受力\r\n            this.bodies[i].applyForce(force);\r\n            // 积分受力\r\n            this.bodies[i].integrateForces(dt);\r\n        }\r\n        // 解决所有约束\r\n        this.resolver.solveConstraint();\r\n        // 是否开启碰撞检测\r\n        if (this.enableCollisionDetection) {\r\n            // 粗阶段检测\r\n            broadPhasePair = this.detector.broadPhase.detect(this.bodies);\r\n            // 细阶段检测\r\n            collisions = this.detector.narrowPhase.detect(broadPhasePair);\r\n            // console.log(collisions);\r\n            this.manifoldTable.update(collisions, timeStamp);\r\n            // 移除缓存表超时的碰撞对\r\n            this.manifoldTable.filter(timeStamp);\r\n            // 是否开启了碰撞求解\r\n            if (this.enableCollisionResolve) {\r\n                // 若发现有休眠的刚体发生碰撞，则唤醒\r\n                if (this.enableSleeping)\r\n                    this.sleeping.afterCollision(this.manifoldTable.list);\r\n                // 求解碰撞约束\r\n                this.resolver.solveCollision(this.manifoldTable.list, dt);\r\n            }\r\n        }\r\n        for (let i = 0; i < this.bodies.length; i++) {\r\n            // 积分速度\r\n            this.bodies[i].integrateVelocities(dt);\r\n        }\r\n        this.manifoldTable.collisionStart.length &&\r\n            eventEmitter_1.Event.emit(this, 'collisionStart', this.manifoldTable.collisionStart);\r\n        this.manifoldTable.collisionActive.length &&\r\n            eventEmitter_1.Event.emit(this, 'collisionActive', this.manifoldTable.collisionActive);\r\n        this.manifoldTable.collisionEnd.length &&\r\n            eventEmitter_1.Event.emit(this, 'collisionEnd', this.manifoldTable.collisionEnd);\r\n    }\r\n    /**\r\n     * 渲染物理引擎\r\n     * @param dt\r\n     */\r\n    render(dt) {\r\n        for (let i = 0; i < this.bodies.length; i++) {\r\n            if (this.bodies[i].sleeping || this.bodies[i].fixed) {\r\n                continue;\r\n            }\r\n            // 渲染刚体\r\n            this.bodies[i].render(this.bodies[i], dt);\r\n        }\r\n    }\r\n    /**\r\n     * 设置引擎参数\r\n     * @param opt\r\n     */\r\n    setOption(opt) {\r\n        util_1.Util.merge(this, opt);\r\n        util_1.Util.merge(this.timeStepper, opt);\r\n        util_1.Util.merge(this.manifoldTable, opt);\r\n        util_1.Util.merge(this.resolver, opt);\r\n    }\r\n}\r\nexports.Engine = Engine;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9lbmdpbmUudHM/OTViYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx3Q0FBd0M7QUFDeEMsc0NBQXNDO0FBQ3RDLDhDQUE0QztBQUM1QywyQ0FBaUQ7QUFDakQsMkNBQWdEO0FBQ2hELDJDQUFzQztBQUN0QyxnREFBMkQ7QUFHM0QsOENBQThDO0FBbUU5QyxNQUFNO0FBQ04sTUFBYSxNQUFNO0lBMkNmLFlBQVksS0FBYSxFQUFFLE1BQWMsRUFBRSxHQUFlO1FBQ3RELElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLENBQUM7UUFFMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLGVBQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFaEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7UUFDM0IsSUFBSSxDQUFDLHdCQUF3QixHQUFHLElBQUksQ0FBQztRQUNyQyxJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxDQUFDO1FBRW5DLElBQUksQ0FBQyxPQUFPLEdBQUc7WUFDWCxXQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztZQUNyQixTQUFTLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztZQUNuQixZQUFZLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztZQUN0QixXQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztZQUNyQixZQUFZLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztZQUN0QixXQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztZQUNyQixPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztZQUNqQixPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztZQUNqQixjQUFjLEVBQUUsQ0FBQyxTQUFxQixFQUFFLEVBQUUsR0FBRSxDQUFDO1lBQzdDLGVBQWUsRUFB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QUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN0QixXQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDbEMsV0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3BDLFdBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNuQyxDQUFDO0NBQ0o7QUF6S0Qsd0JBeUtDIiwiZmlsZSI6IjEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9keSB9IGZyb20gXCIuLi9ib2R5L2JvZHlcIjtcclxuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuaW1wb3J0IHsgVGltZVN0ZXBwZXIgfSBmcm9tIFwiLi90aW1lU3RlcHBlclwiO1xyXG5pbXBvcnQgeyBEZXRlY3RvciB9IGZyb20gXCIuLi9jb2xsaXNpb24vZGV0ZWN0b3JcIjtcclxuaW1wb3J0IHsgUmVzb2x2ZXIgfSBmcm9tIFwiLi4vcmVzb2x2ZXIvcmVzb2x2ZXJcIjtcclxuaW1wb3J0IHsgU2xlZXBpbmcgfSBmcm9tIFwiLi9zbGVlcGluZ1wiO1xyXG5pbXBvcnQgeyBNYW5pZm9sZFRhYmxlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9tYW5pZm9sZFRhYmxlXCI7XHJcbmltcG9ydCB7IENvbGxpc2lvbiwgTWFuaWZvbGQgfSBmcm9tIFwiLi4vY29sbGlzaW9uL21hbmlmb2xkXCI7XHJcbmltcG9ydCB7IGJyb2FkUGhhc2VQYWlyIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9icm9hZFBoYXNlXCI7XHJcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSBcIi4uL2V2ZW50L2V2ZW50RW1pdHRlclwiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDkuLvlvJXmk45cclxuICovXHJcblxyXG5cclxuXHJcbi8vIOW8leaTjuebuOWFs+mFjee9rumhuVxyXG5leHBvcnQgaW50ZXJmYWNlIEVuZ2luZU9wdCB7XHJcbiAgICAvLyDluKfnjodcclxuICAgIGZwczogbnVtYmVyO1xyXG4gICAgLy8g5piv5ZCm5Zu65a6a5q2l6ZW/XHJcbiAgICBkZWx0YUZpeGVkOiBib29sZWFuO1xyXG5cclxuICAgIC8vIOaYr+WQpuW8gOWQr+eisOaSnuajgOa1i1xyXG4gICAgZW5hYmxlQ29sbGxpc2lvbkRldGVjdGlvbjogYm9vbGVhbjtcclxuICAgIC8vIOaYr+WQpuW8gOWQr+eisOaSnuaxguino1xyXG4gICAgZW5hYmxlQ29sbGlzaW9uUmVzb2x2ZTogYm9vbGVhbjtcclxuICAgIC8vIOaYr+WQpuW8gOWQr+S8keecoFxyXG4gICAgZW5hYmxlU2xlZXBpbmc6IGJvb2xlYW47XHJcbiAgICAvLyDmmK/lkKblvIDlkK/nspfmo4Dmn6VcclxuICAgIGVuYWJsZUJyb2FkUGhhc2U6IGJvb2xlYW47XHJcbiAgICAvLyDmmK/lkKblvIDlkK/nvJPlrZhcclxuICAgIGVuYmFsZUNhY2hlOiBib29sZWFuO1xyXG4gICAgLy8g5piv5ZCm5byA5ZCv57yT5a2Y56e76ZmkXHJcbiAgICBlbmFibGVDYWNoZVJlbW92ZTogYm9vbGVhbjtcclxuXHJcbiAgICAvLyDph43liptcclxuICAgIGdyYXZpdHk6IFZlY3RvcjtcclxuICAgIFxyXG4gICAgLy8g5Yik5a6a5LyR55yg5bin5qCR6ZiI5YC8XHJcbiAgICBzbGVlcFRocmVzaG9sZDogbnVtYmVyO1xyXG4gICAgLy8g5Yik5a6a5LyR55yg5Yqo6YeP6ZiI5YC8XHJcbiAgICBzbGVlcE1vdGlvblRocmVzaG9sZDogbnVtYmVyO1xyXG4gICAgLy8g5Yik5a6a5ZSk6YaS5Yqo6YeP6ZiI5YC8XHJcbiAgICB3YWtlTW90aW9uVGhyZXNob2xkOiBudW1iZXI7XHJcbiAgICAvLyDnvJPlrZjnp7vpmaTml7bpl7TpmIjlgLxcclxuICAgIGNhY2hlUmVtb3ZlVGhyZXNob2xkOiBudW1iZXI7XHJcblxyXG4gICAgLy8g5YWB6K6456m/6YCP5rex5bqmXHJcbiAgICBzbG9wOiBudW1iZXI7XHJcbiAgICAvLyDkvY3nva7kv67mraPlm6DlrZBcclxuICAgIGNvcnJlY3Rpb25GYWN0b3I6IG51bWJlcjtcclxuICAgIC8vIOeisOaSnuaxguino+i/reS7o+asoeaVsFxyXG4gICAgY29sbGlzaW9uSXRlcmF0aW9uczogbnVtYmVyO1xyXG4gICAgLy8g57qm5p2f5rGC6Kej6L+t5Luj5qyh5pWwXHJcbiAgICBjb25zdHJhaW50SXRlcmF0aW9uczogbnVtYmVyO1xyXG5cclxuICAgIC8vIOaWueazlVxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIG9uVGlja1N0YXJ0OiAoKSA9PiB2b2lkOyBcclxuICAgICAgICBvblRpY2tFbmQ6ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgYmVmb3JlVXBkYXRlOiAoKSA9PiB2b2lkO1xyXG4gICAgICAgIGFmdGVyVXBkYXRlOiAoKSA9PiB2b2lkO1xyXG4gICAgICAgIGJlZm9yZVJlbmRlcjogKCkgPT4gdm9pZDtcclxuICAgICAgICBhZnRlclJlbmRlcjogKCkgPT4gdm9pZDtcclxuICAgICAgICBvblN0YXJ0OiAoKSA9PiB2b2lkO1xyXG4gICAgICAgIG9uUGF1c2U6ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgY29sbGlzaW9uU3RhcnQ6IChtYW5pZm9sZHM6IE1hbmlmb2xkW10pID0+IHZvaWQ7XHJcbiAgICAgICAgY29sbGlzaW9uQWN0aXZlOiAobWFuaWZvbGRzOiBNYW5pZm9sZFtdKSA9PiB2b2lkO1xyXG4gICAgICAgIGNvbGxpc2lvbkVuZDogKG1hbmlmb2xkczogTWFuaWZvbGRbXSkgPT4gdm9pZDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8vIOS4u+W8leaTjlxyXG5leHBvcnQgY2xhc3MgRW5naW5lIHtcclxuICAgIC8vIOaooeaLn+eql+WPo+WuveW6plxyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIC8vIOaooeaLn+eql+WPo+mrmOW6plxyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgLy8g5piv5ZCm5byA5ZCv5LyR55yg5py65Yi2XHJcbiAgICBlbmFibGVTbGVlcGluZzogYm9vbGVhbjtcclxuICAgIC8vIOaYr+WQpuW8gOWQr+eisOaSnuajgOa1i1xyXG4gICAgZW5hYmxlQ29sbGlzaW9uRGV0ZWN0aW9uOiBib29sZWFuO1xyXG4gICAgLy8g5piv5ZCm5byA5ZCv56Kw5pKe5rGC6KejXHJcbiAgICBlbmFibGVDb2xsaXNpb25SZXNvbHZlOiBib29sZWFuO1xyXG5cclxuICAgIC8vIOmHjeWKm1xyXG4gICAgZ3Jhdml0eTogVmVjdG9yO1xyXG5cclxuICAgIC8vIOWImuS9k+WIl+ihqFxyXG4gICAgYm9kaWVzOiBCb2R5W107XHJcbiAgICAvLyDml7bpl7TmraXov63ku6PlmahcclxuICAgIHRpbWVTdGVwcGVyOiBUaW1lU3RlcHBlcjtcclxuICAgIC8vIOeisOaSnuajgOa1i+WZqFxyXG4gICAgZGV0ZWN0b3I6IERldGVjdG9yO1xyXG4gICAgLy8g5rWB5b2i6KGoXHJcbiAgICBtYW5pZm9sZFRhYmxlOiBNYW5pZm9sZFRhYmxlO1xyXG4gICAgLy8g57qm5p2f5rGC6Kej5ZmoXHJcbiAgICByZXNvbHZlcjogUmVzb2x2ZXI7XHJcbiAgICAvLyDkvJHnnKDnrqHnkIblmahcclxuICAgIHNsZWVwaW5nOiBTbGVlcGluZztcclxuICAgIC8vIOaWueazlVxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIG9uVGlja1N0YXJ0OiAoKSA9PiB2b2lkOyBcclxuICAgICAgICBvblRpY2tFbmQ6ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgYmVmb3JlVXBkYXRlOiAoKSA9PiB2b2lkO1xyXG4gICAgICAgIGFmdGVyVXBkYXRlOiAoKSA9PiB2b2lkO1xyXG4gICAgICAgIGJlZm9yZVJlbmRlcjogKCkgPT4gdm9pZDtcclxuICAgICAgICBhZnRlclJlbmRlcjogKCkgPT4gdm9pZDtcclxuICAgICAgICBvblN0YXJ0OiAoKSA9PiB2b2lkO1xyXG4gICAgICAgIG9uUGF1c2U6ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgY29sbGlzaW9uU3RhcnQ6IChtYW5pZm9sZHM6IE1hbmlmb2xkW10pID0+IHZvaWQ7XHJcbiAgICAgICAgY29sbGlzaW9uQWN0aXZlOiAobWFuaWZvbGRzOiBNYW5pZm9sZFtdKSA9PiB2b2lkO1xyXG4gICAgICAgIGNvbGxpc2lvbkVuZDogKG1hbmlmb2xkczogTWFuaWZvbGRbXSkgPT4gdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgb3B0PzogRW5naW5lT3B0KSB7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoIHx8IDA7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQgfHwgMDtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmdyYXZpdHkgPSBuZXcgVmVjdG9yKDAsIDkpO1xyXG5cclxuICAgICAgICB0aGlzLmVuYWJsZVNsZWVwaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmVuYWJsZUNvbGxpc2lvbkRldGVjdGlvbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lbmFibGVDb2xsaXNpb25SZXNvbHZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5tZXRob2RzID0ge1xyXG4gICAgICAgICAgICBvblRpY2tTdGFydDogKCkgPT4ge30sXHJcbiAgICAgICAgICAgIG9uVGlja0VuZDogKCkgPT4ge30sXHJcbiAgICAgICAgICAgIGJlZm9yZVVwZGF0ZTogKCkgPT4ge30sXHJcbiAgICAgICAgICAgIGFmdGVyVXBkYXRlOiAoKSA9PiB7fSxcclxuICAgICAgICAgICAgYmVmb3JlUmVuZGVyOiAoKSA9PiB7fSxcclxuICAgICAgICAgICAgYWZ0ZXJSZW5kZXI6ICgpID0+IHt9LFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7fSxcclxuICAgICAgICAgICAgb25QYXVzZTogKCkgPT4ge30sXHJcbiAgICAgICAgICAgIGNvbGxpc2lvblN0YXJ0OiAobWFuaWZvbGRzOiBNYW5pZm9sZFtdKSA9PiB7fSxcclxuICAgICAgICAgICAgY29sbGlzaW9uQWN0aXZlOiAobWFuaWZvbGRzOiBNYW5pZm9sZFtdKSA9PiB7fSxcclxuICAgICAgICAgICAgY29sbGlzaW9uRW5kOiAobWFuaWZvbGRzOiBNYW5pZm9sZFtdKSA9PiB7fVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVXRpbC5tZXJnZSh0aGlzLCBvcHQpO1xyXG5cclxuICAgICAgICB0aGlzLmJvZGllcyA9IFtdO1xyXG4gICAgICAgIHRoaXMudGltZVN0ZXBwZXIgPSBuZXcgVGltZVN0ZXBwZXIodGhpcywgb3B0KTtcclxuICAgICAgICB0aGlzLmRldGVjdG9yID0gbmV3IERldGVjdG9yKHRoaXMsIG9wdCk7XHJcbiAgICAgICAgdGhpcy5tYW5pZm9sZFRhYmxlID0gbmV3IE1hbmlmb2xkVGFibGUob3B0KTtcclxuICAgICAgICB0aGlzLnJlc29sdmVyID0gbmV3IFJlc29sdmVyKHRoaXMsIG9wdCk7XHJcbiAgICAgICAgdGhpcy5zbGVlcGluZyA9IG5ldyBTbGVlcGluZyhvcHQpO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiDlvJXmk47mm7TmlrBcclxuICAgICAqIEBwYXJhbSBkdCDmraXplb9cclxuICAgICAqIEBwYXJhbSB0aW1lU3RhbXAg5pe26Ze05oizXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZShkdDogbnVtYmVyLCB0aW1lU3RhbXA6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBicm9hZFBoYXNlUGFpcjogYnJvYWRQaGFzZVBhaXJbXSA9IFtdLFxyXG4gICAgICAgICAgICBjb2xsaXNpb25zOiBDb2xsaXNpb25bXSA9IFtdO1xyXG5cclxuICAgICAgICBpZih0aGlzLmVuYWJsZVNsZWVwaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIOabtOaWsOWImuS9k+eahOS8keecoC/llKTphpLnirbmgIFcclxuICAgICAgICAgICAgdGhpcy5zbGVlcGluZy51cGRhdGUodGhpcy5ib2RpZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuYm9kaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBmb3JjZSA9IHRoaXMuZ3Jhdml0eS5zY2wodGhpcy5ib2RpZXNbaV0ubWFzcyAqIDUwKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOW6lOeUqOWPl+WKm1xyXG4gICAgICAgICAgICB0aGlzLmJvZGllc1tpXS5hcHBseUZvcmNlKGZvcmNlKTtcclxuICAgICAgICAgICAgLy8g56ev5YiG5Y+X5YqbXHJcbiAgICAgICAgICAgIHRoaXMuYm9kaWVzW2ldLmludGVncmF0ZUZvcmNlcyhkdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDop6PlhrPmiYDmnInnuqbmnZ9cclxuICAgICAgICB0aGlzLnJlc29sdmVyLnNvbHZlQ29uc3RyYWludCgpO1xyXG5cclxuICAgICAgICAvLyDmmK/lkKblvIDlkK/norDmkp7mo4DmtYtcclxuICAgICAgICBpZih0aGlzLmVuYWJsZUNvbGxpc2lvbkRldGVjdGlvbikge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g57KX6Zi25q615qOA5rWLXHJcbiAgICAgICAgICAgIGJyb2FkUGhhc2VQYWlyID0gdGhpcy5kZXRlY3Rvci5icm9hZFBoYXNlLmRldGVjdCh0aGlzLmJvZGllcyk7XHJcbiAgICAgICAgICAgIC8vIOe7humYtuauteajgOa1i1xyXG4gICAgICAgICAgICBjb2xsaXNpb25zID0gdGhpcy5kZXRlY3Rvci5uYXJyb3dQaGFzZS5kZXRlY3QoYnJvYWRQaGFzZVBhaXIpO1xyXG5cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY29sbGlzaW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLm1hbmlmb2xkVGFibGUudXBkYXRlKGNvbGxpc2lvbnMsIHRpbWVTdGFtcCk7XHJcbiAgICAgICAgICAgIC8vIOenu+mZpOe8k+WtmOihqOi2heaXtueahOeisOaSnuWvuVxyXG4gICAgICAgICAgICB0aGlzLm1hbmlmb2xkVGFibGUuZmlsdGVyKHRpbWVTdGFtcCk7XHJcblxyXG4gICAgICAgICAgICAvLyDmmK/lkKblvIDlkK/kuobnorDmkp7msYLop6NcclxuICAgICAgICAgICAgaWYodGhpcy5lbmFibGVDb2xsaXNpb25SZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDoi6Xlj5HnjrDmnInkvJHnnKDnmoTliJrkvZPlj5HnlJ/norDmkp7vvIzliJnllKTphpJcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVNsZWVwaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5zbGVlcGluZy5hZnRlckNvbGxpc2lvbih0aGlzLm1hbmlmb2xkVGFibGUubGlzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5rGC6Kej56Kw5pKe57qm5p2fXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmVyLnNvbHZlQ29sbGlzaW9uKHRoaXMubWFuaWZvbGRUYWJsZS5saXN0LCBkdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmJvZGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyDnp6/liIbpgJ/luqZcclxuICAgICAgICAgICAgdGhpcy5ib2RpZXNbaV0uaW50ZWdyYXRlVmVsb2NpdGllcyhkdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm1hbmlmb2xkVGFibGUuY29sbGlzaW9uU3RhcnQubGVuZ3RoICYmIFxyXG4gICAgICAgIEV2ZW50LmVtaXQodGhpcywgJ2NvbGxpc2lvblN0YXJ0JywgdGhpcy5tYW5pZm9sZFRhYmxlLmNvbGxpc2lvblN0YXJ0KTtcclxuXHJcbiAgICAgICAgdGhpcy5tYW5pZm9sZFRhYmxlLmNvbGxpc2lvbkFjdGl2ZS5sZW5ndGggJiYgXHJcbiAgICAgICAgRXZlbnQuZW1pdCh0aGlzLCAnY29sbGlzaW9uQWN0aXZlJywgdGhpcy5tYW5pZm9sZFRhYmxlLmNvbGxpc2lvbkFjdGl2ZSk7XHJcblxyXG4gICAgICAgIHRoaXMubWFuaWZvbGRUYWJsZS5jb2xsaXNpb25FbmQubGVuZ3RoICYmIFxyXG4gICAgICAgIEV2ZW50LmVtaXQodGhpcywgJ2NvbGxpc2lvbkVuZCcsIHRoaXMubWFuaWZvbGRUYWJsZS5jb2xsaXNpb25FbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5riy5p+T54mp55CG5byV5pOOXHJcbiAgICAgKiBAcGFyYW0gZHQgXHJcbiAgICAgKi9cclxuICAgIHJlbmRlcihkdDogbnVtYmVyKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuYm9kaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuYm9kaWVzW2ldLnNsZWVwaW5nIHx8IHRoaXMuYm9kaWVzW2ldLmZpeGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g5riy5p+T5Yia5L2TXHJcbiAgICAgICAgICAgIHRoaXMuYm9kaWVzW2ldLnJlbmRlcih0aGlzLmJvZGllc1tpXSwgZHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruW8leaTjuWPguaVsFxyXG4gICAgICogQHBhcmFtIG9wdCBcclxuICAgICAqL1xyXG4gICAgc2V0T3B0aW9uKG9wdDogRW5naW5lT3B0KSB7XHJcbiAgICAgICAgVXRpbC5tZXJnZSh0aGlzLCBvcHQpO1xyXG4gICAgICAgIFV0aWwubWVyZ2UodGhpcy50aW1lU3RlcHBlciwgb3B0KTtcclxuICAgICAgICBVdGlsLm1lcmdlKHRoaXMubWFuaWZvbGRUYWJsZSwgb3B0KTtcclxuICAgICAgICBVdGlsLm1lcmdlKHRoaXMucmVzb2x2ZXIsIG9wdCk7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///12\n")},function(module,exports,__webpack_require__){"use strict";eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TimeStepper = void 0;\r\nconst util_1 = __webpack_require__(0);\r\nconst eventEmitter_1 = __webpack_require__(3);\r\n/**\r\n * 时间步迭代器\r\n */\r\nclass TimeStepper {\r\n    constructor(engine, opt) {\r\n        this.engine = engine;\r\n        this.status = false;\r\n        this.tickProcessorList = [];\r\n        this.fps = opt.fps || 60;\r\n        this.deltaFixed = opt.deltaFixed === undefined ? true : opt.deltaFixed;\r\n        this.deltaRecordLimit = 60;\r\n        util_1.Util.merge(this, opt);\r\n        this.dt = 1 / this.fps;\r\n        this.dtMin = this.dt;\r\n        this.dtMax = this.dt * 2;\r\n        this.frameCounter = 0;\r\n        this.frameStamp = 0;\r\n        this.prevTime = 0;\r\n        this.frameTotal = 0;\r\n        this.frameNumLimit = -1;\r\n        this.deltaRecorder = [];\r\n    }\r\n    /**\r\n     * 一次tick，也就是一次模拟\r\n     * @param timeStamp 当前时间戳\r\n     */\r\n    tick(timeStamp = 0) {\r\n        let dt;\r\n        // 固定dt\r\n        if (this.deltaFixed === false) {\r\n            // 动态计算dt\r\n            dt = (timeStamp - this.prevTime) || this.dt;\r\n            this.prevTime = timeStamp;\r\n            // 根据过去的变化步长情况，优化当前步长，使引擎稳定\r\n            this.deltaRecorder.push(dt);\r\n            this.deltaRecorder = this.deltaRecorder.slice(-this.deltaRecordLimit);\r\n            dt = util_1.Util.clamp(Math.min.apply(Math, this.deltaRecorder), this.dtMin, this.dtMax);\r\n            // 更新dt\r\n            this.dt = dt;\r\n        }\r\n        // 动态计算fps\r\n        this.frameCounter += 1;\r\n        if (timeStamp - this.frameStamp >= 1000) {\r\n            this.fps = this.frameCounter * ((timeStamp - this.frameStamp) / 1000);\r\n            this.frameStamp = timeStamp;\r\n            this.frameCounter = 0;\r\n        }\r\n        eventEmitter_1.Event.emit(this.engine, 'onTickStart');\r\n        // 更新物理引擎\r\n        eventEmitter_1.Event.emit(this.engine, 'beforeUpdate');\r\n        this.engine.update(this.dt, timeStamp);\r\n        eventEmitter_1.Event.emit(this.engine, 'afterUpdate');\r\n        // 渲染物理引擎\r\n        eventEmitter_1.Event.emit(this.engine, 'beforeRender');\r\n        this.engine.render(this.dt);\r\n        eventEmitter_1.Event.emit(this.engine, 'afterRender');\r\n        // 执行用户自定义函数\r\n        this.tickProcessorList.map(fn => fn(timeStamp));\r\n        eventEmitter_1.Event.emit(this.engine, 'onTickEnd');\r\n        this.frameTotal++;\r\n        if (this.frameNumLimit > 0 && this.frameTotal >= this.frameNumLimit) {\r\n            this.pause();\r\n            return;\r\n        }\r\n        this.raf = window.requestAnimationFrame(this.tick.bind(this));\r\n    }\r\n    /**\r\n     * 在一次tick中增加额外自定义的处理函数\r\n     * @param fn 要增加的处理函数\r\n     */\r\n    addStep(fn) {\r\n        typeof fn === 'function' && this.tickProcessorList.push(fn);\r\n    }\r\n    /**\r\n     * 开始模拟\r\n     * @param frameNumLimit 限制运行多少帧停下\r\n     */\r\n    start(frameNumLimit) {\r\n        if (this.status)\r\n            return;\r\n        if (frameNumLimit && frameNumLimit > 0) {\r\n            this.frameNumLimit = frameNumLimit;\r\n        }\r\n        this.status = true;\r\n        eventEmitter_1.Event.emit(this.engine, 'onStart');\r\n        this.tick();\r\n    }\r\n    /**\r\n     * 暂停模拟\r\n     */\r\n    pause() {\r\n        if (!this.status)\r\n            return;\r\n        this.status = false;\r\n        this.frameTotal = 0;\r\n        eventEmitter_1.Event.emit(this.engine, 'pause');\r\n        window.cancelAnimationFrame(this.raf);\r\n    }\r\n}\r\nexports.TimeStepper = TimeStepper;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS90aW1lU3RlcHBlci50cz9mZjI1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHNDQUFzQztBQUN0Qyw4Q0FBOEM7QUFHOUM7O0dBRUc7QUFDSCxNQUFhLFdBQVc7SUFtQ3BCLFlBQVksTUFBYyxFQUFFLEdBQWM7UUFDdEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFFckIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDcEIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEVBQUUsQ0FBQztRQUU1QixJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLFVBQVUsS0FBSyxTQUFTLEVBQUMsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDO1FBQ3JFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7UUFFM0IsV0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFFdEIsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUN2QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztRQUNsQixJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxD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QixPQUFPLEVBQUUsS0FBSyxVQUFVLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBR0Q7OztPQUdHO0lBQ0gsS0FBSyxDQUFDLGFBQXNCO1FBQ3hCLElBQUcsSUFBSSxDQUFDLE1BQU07WUFBRSxPQUFPO1FBRXZCLElBQUcsYUFBYSxJQUFJLGFBQWEsR0FBRyxDQUFDLEVBQUU7WUFDbkMsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7U0FDdEM7UUFFRCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztRQUNuQixvQkFBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLO1FBQ0QsSUFBRyxDQUFDLElBQUksQ0FBQyxNQUFNO1lBQUUsT0FBTztRQUV4QixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztRQUNwQixvQkFBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ2pDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUMsQ0FBQztDQUNKO0FBeEpELGtDQXdKQyIsImZpbGUiOiIxMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVuZ2luZSwgRW5naW5lT3B0IH0gZnJvbSBcIi4vZW5naW5lXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuaW1wb3J0IHsgRXZlbnQgfSBmcm9tIFwiLi4vZXZlbnQvZXZlbnRFbWl0dGVyXCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIOaXtumXtOatpei/reS7o+WZqFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRpbWVTdGVwcGVyIHtcclxuICAgIC8vIOS4u+W8leaTjlxyXG4gICAgcHJpdmF0ZSBlbmdpbmU6IEVuZ2luZTtcclxuICAgIC8vIHJlcXVlc3RBbmltYXRpb25GcmFtZeeahGlkXHJcbiAgICBwcml2YXRlIHJhZjogbnVtYmVyO1xyXG4gICAgLy8g6aKd5aSW55qE5aSE55CG5Ye95pWw5YiX6KGoXHJcbiAgICBwcml2YXRlIHRpY2tQcm9jZXNzb3JMaXN0OiBGdW5jdGlvbltdO1xyXG4gICAgLy8g6L+Q6KGM54q25oCB77yI5byA5aeLL+aaguWBnO+8iVxyXG4gICAgcHJpdmF0ZSBzdGF0dXM6IGJvb2xlYW47XHJcblxyXG4gICAgLy8g5bin546HXHJcbiAgICBwcml2YXRlIGZwczogbnVtYmVyO1xyXG4gICAgLy8g5q2l6ZW/IO+8iDEwMDAvZnBz77yJXHJcbiAgICBwcml2YXRlIGR0OiBudW1iZXI7XHJcbiAgICAvLyDlhYHorrjmnIDlsI/mraXplb9cclxuICAgIHByaXZhdGUgZHRNaW46IG51bWJlcjtcclxuICAgIC8vIOWFgeiuuOacgOWkp+atpemVv1xyXG4gICAgcHJpdmF0ZSBkdE1heDogbnVtYmVyO1xyXG4gICAgLy8g5piv5ZCm5Zu65a6a5q2l6ZW/XHJcbiAgICBwcml2YXRlIGRlbHRhRml4ZWQ6IGJvb2xlYW47XHJcbiAgICAvLyDkuIrmrKF0aWNr5omn6KGM5pe26Ze0XHJcbiAgICBwcml2YXRlIHByZXZUaW1lOiBudW1iZXI7XHJcbiAgICAvLyDmraXplb/orrDlvZXlmahcclxuICAgIHByaXZhdGUgZGVsdGFSZWNvcmRlcjogbnVtYmVyW107XHJcbiAgICAvLyDmraXplb/orrDlvZXmlbDph4/kuIrpmZBcclxuICAgIHByaXZhdGUgZGVsdGFSZWNvcmRMaW1pdDogbnVtYmVyO1xyXG4gICAgLy8g5bin6K6h5pWw5ZmoXHJcbiAgICBwcml2YXRlIGZyYW1lQ291bnRlcjogbnVtYmVyO1xyXG4gICAgLy8g5bin5pe26Ze0XHJcbiAgICBwcml2YXRlIGZyYW1lU3RhbXA6IG51bWJlcjtcclxuICAgIC8vIOaAu+W4p+iuoeeul+WZqFxyXG4gICAgcHJpdmF0ZSBmcmFtZVRvdGFsOiBudW1iZXJcclxuICAgIC8vIOW4p+mZkOWItlxyXG4gICAgcHJpdmF0ZSBmcmFtZU51bUxpbWl0OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBFbmdpbmUsIG9wdDogRW5naW5lT3B0KSB7XHJcbiAgICAgICAgdGhpcy5lbmdpbmUgPSBlbmdpbmU7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50aWNrUHJvY2Vzc29yTGlzdCA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLmZwcyA9IG9wdC5mcHMgfHwgNjA7XHJcbiAgICAgICAgdGhpcy5kZWx0YUZpeGVkID0gb3B0LmRlbHRhRml4ZWQgPT09IHVuZGVmaW5lZD8gdHJ1ZTogb3B0LmRlbHRhRml4ZWQ7XHJcbiAgICAgICAgdGhpcy5kZWx0YVJlY29yZExpbWl0ID0gNjA7XHJcblxyXG4gICAgICAgIFV0aWwubWVyZ2UodGhpcywgb3B0KTtcclxuXHJcbiAgICAgICAgdGhpcy5kdCA9IDEgLyB0aGlzLmZwcztcclxuICAgICAgICB0aGlzLmR0TWluID0gdGhpcy5kdDtcclxuICAgICAgICB0aGlzLmR0TWF4ID0gdGhpcy5kdCAqIDI7XHJcbiAgICAgICAgdGhpcy5mcmFtZUNvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMuZnJhbWVTdGFtcCA9IDA7XHJcbiAgICAgICAgdGhpcy5wcmV2VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5mcmFtZVRvdGFsID0gMDtcclxuICAgICAgICB0aGlzLmZyYW1lTnVtTGltaXQgPSAtMTtcclxuICAgICAgICB0aGlzLmRlbHRhUmVjb3JkZXIgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS4gOasoXRpY2vvvIzkuZ/lsLHmmK/kuIDmrKHmqKHmi59cclxuICAgICAqIEBwYXJhbSB0aW1lU3RhbXAg5b2T5YmN5pe26Ze05oizXHJcbiAgICAgKi9cclxuICAgIHRpY2sodGltZVN0YW1wOiBudW1iZXIgPSAwKSB7XHJcbiAgICAgICAgbGV0IGR0OiBudW1iZXI7XHJcblxyXG4gICAgICAgIC8vIOWbuuWummR0XHJcbiAgICAgICAgaWYgKHRoaXMuZGVsdGFGaXhlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICBcclxuICAgICAgICAgICAgLy8g5Yqo5oCB6K6h566XZHRcclxuICAgICAgICAgICAgZHQgPSAodGltZVN0YW1wIC0gdGhpcy5wcmV2VGltZSkgfHwgdGhpcy5kdDtcclxuICAgICAgICAgICAgdGhpcy5wcmV2VGltZSA9IHRpbWVTdGFtcDtcclxuXHJcbiAgICAgICAgICAgIC8vIOagueaNrui/h+WOu+eahOWPmOWMluatpemVv+aDheWGte+8jOS8mOWMluW9k+WJjeatpemVv++8jOS9v+W8leaTjueos+WumlxyXG4gICAgICAgICAgICB0aGlzLmRlbHRhUmVjb3JkZXIucHVzaChkdCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVsdGFSZWNvcmRlciA9IHRoaXMuZGVsdGFSZWNvcmRlci5zbGljZSgtdGhpcy5kZWx0YVJlY29yZExpbWl0KTtcclxuICAgICAgICAgICAgZHQgPSBVdGlsLmNsYW1wKE1hdGgubWluLmFwcGx5KE1hdGgsIHRoaXMuZGVsdGFSZWNvcmRlciksIHRoaXMuZHRNaW4sIHRoaXMuZHRNYXgpO1xyXG5cclxuICAgICAgICAgICAgLy8g5pu05pawZHRcclxuICAgICAgICAgICAgdGhpcy5kdCA9IGR0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5Yqo5oCB6K6h566XZnBzXHJcbiAgICAgICAgdGhpcy5mcmFtZUNvdW50ZXIgKz0gMTtcclxuICAgICAgICBpZiAodGltZVN0YW1wIC0gdGhpcy5mcmFtZVN0YW1wID49IDEwMDApIHtcclxuICAgICAgICAgICAgdGhpcy5mcHMgPSB0aGlzLmZyYW1lQ291bnRlciAqICgodGltZVN0YW1wIC0gdGhpcy5mcmFtZVN0YW1wKSAvIDEwMDApO1xyXG4gICAgICAgICAgICB0aGlzLmZyYW1lU3RhbXAgPSB0aW1lU3RhbXA7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWVDb3VudGVyID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEV2ZW50LmVtaXQodGhpcy5lbmdpbmUsICdvblRpY2tTdGFydCcpO1xyXG5cclxuICAgICAgICAvLyDmm7TmlrDniannkIblvJXmk45cclxuICAgICAgICBFdmVudC5lbWl0KHRoaXMuZW5naW5lLCAnYmVmb3JlVXBkYXRlJyk7XHJcbiAgICAgICAgdGhpcy5lbmdpbmUudXBkYXRlKHRoaXMuZHQsIHRpbWVTdGFtcCk7XHJcbiAgICAgICAgRXZlbnQuZW1pdCh0aGlzLmVuZ2luZSwgJ2FmdGVyVXBkYXRlJyk7XHJcblxyXG4gICAgICAgIC8vIOa4suafk+eJqeeQhuW8leaTjlxyXG4gICAgICAgIEV2ZW50LmVtaXQodGhpcy5lbmdpbmUsICdiZWZvcmVSZW5kZXInKTtcclxuICAgICAgICB0aGlzLmVuZ2luZS5yZW5kZXIodGhpcy5kdCk7XHJcbiAgICAgICAgRXZlbnQuZW1pdCh0aGlzLmVuZ2luZSwgJ2FmdGVyUmVuZGVyJyk7XHJcblxyXG4gICAgICAgIC8vIOaJp+ihjOeUqOaIt+iHquWumuS5ieWHveaVsFxyXG4gICAgICAgIHRoaXMudGlja1Byb2Nlc3Nvckxpc3QubWFwKGZuID0+IGZuKHRpbWVTdGFtcCkpO1xyXG5cclxuICAgICAgICBFdmVudC5lbWl0KHRoaXMuZW5naW5lLCAnb25UaWNrRW5kJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5mcmFtZVRvdGFsKys7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuZnJhbWVOdW1MaW1pdCA+IDAgJiYgdGhpcy5mcmFtZVRvdGFsID49IHRoaXMuZnJhbWVOdW1MaW1pdCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmFmID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnRpY2suYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlnKjkuIDmrKF0aWNr5Lit5aKe5Yqg6aKd5aSW6Ieq5a6a5LmJ55qE5aSE55CG5Ye95pWwXHJcbiAgICAgKiBAcGFyYW0gZm4g6KaB5aKe5Yqg55qE5aSE55CG5Ye95pWwXHJcbiAgICAgKi9cclxuICAgIGFkZFN0ZXAoZm46IChkdDogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICYmIHRoaXMudGlja1Byb2Nlc3Nvckxpc3QucHVzaChmbik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5byA5aeL5qih5oufXHJcbiAgICAgKiBAcGFyYW0gZnJhbWVOdW1MaW1pdCDpmZDliLbov5DooYzlpJrlsJHluKflgZzkuItcclxuICAgICAqL1xyXG4gICAgc3RhcnQoZnJhbWVOdW1MaW1pdD86IG51bWJlcikge1xyXG4gICAgICAgIGlmKHRoaXMuc3RhdHVzKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmKGZyYW1lTnVtTGltaXQgJiYgZnJhbWVOdW1MaW1pdCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5mcmFtZU51bUxpbWl0ID0gZnJhbWVOdW1MaW1pdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gdHJ1ZTtcclxuICAgICAgICBFdmVudC5lbWl0KHRoaXMuZW5naW5lLCAnb25TdGFydCcpO1xyXG4gICAgICAgIHRoaXMudGljaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pqC5YGc5qih5oufXHJcbiAgICAgKi9cclxuICAgIHBhdXNlKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLnN0YXR1cykgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXR1cyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZnJhbWVUb3RhbCA9IDA7XHJcbiAgICAgICAgRXZlbnQuZW1pdCh0aGlzLmVuZ2luZSwgJ3BhdXNlJyk7XHJcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmFmKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n")},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Detector = void 0;\r\nconst broadPhase_1 = __webpack_require__(15);\r\nconst narrowPhase_1 = __webpack_require__(16);\r\n/**\r\n * 碰撞检测\r\n */\r\nclass Detector {\r\n    constructor(engine, opt) {\r\n        this.broadPhase = new broadPhase_1.BroadPhase(engine);\r\n        this.narrowPhase = new narrowPhase_1.NarrowPhase(engine);\r\n    }\r\n}\r\nexports.Detector = Detector;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL2RldGVjdG9yLnRzPzhiODYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkNBQTBDO0FBQzFDLDhDQUE0QztBQUc1Qzs7R0FFRztBQUlILE1BQWEsUUFBUTtJQU1qQixZQUFZLE1BQWMsRUFBRSxHQUFjO1FBQ3RDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSx1QkFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSx5QkFBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9DLENBQUM7Q0FDSjtBQVZELDRCQVVDIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnJvYWRQaGFzZSB9IGZyb20gXCIuL2Jyb2FkUGhhc2VcIjtcclxuaW1wb3J0IHsgTmFycm93UGhhc2UgfSBmcm9tIFwiLi9uYXJyb3dQaGFzZVwiO1xyXG5pbXBvcnQgeyBFbmdpbmUsIEVuZ2luZU9wdCB9IGZyb20gXCIuLi9jb3JlL2VuZ2luZVwiO1xyXG5cclxuLyoqXHJcbiAqIOeisOaSnuajgOa1i1xyXG4gKi9cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIERldGVjdG9yIHtcclxuICAgIC8vIOeyl+ajgOafpVxyXG4gICAgYnJvYWRQaGFzZTogQnJvYWRQaGFzZTtcclxuICAgIC8vIOe7huajgOa1i1xyXG4gICAgbmFycm93UGhhc2U6IE5hcnJvd1BoYXNlOyAgIFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVuZ2luZTogRW5naW5lLCBvcHQ6IEVuZ2luZU9wdCkge1xyXG4gICAgICAgIHRoaXMuYnJvYWRQaGFzZSA9IG5ldyBCcm9hZFBoYXNlKGVuZ2luZSk7XHJcbiAgICAgICAgdGhpcy5uYXJyb3dQaGFzZSA9IG5ldyBOYXJyb3dQaGFzZShlbmdpbmUpO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///14\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.BroadPhase = void 0;\r\nconst util_1 = __webpack_require__(0);\r\nclass BroadPhase {\r\n    constructor(engine) {\r\n        this.engine = engine;\r\n    }\r\n    /**\r\n     * 检测\r\n     * @param bodies 所有刚体\r\n     */\r\n    detect(bodies) {\r\n        return this.sweepAndPrune(bodies);\r\n    }\r\n    /**\r\n     * 查看刚体是否出了可视区\r\n     * @param bound\r\n     */\r\n    isBodyOutWindow(bound) {\r\n        return bound.max.y < 0 || bound.min.x > this.engine.width || bound.min.y > this.engine.height || bound.max.x < 0;\r\n    }\r\n    /**\r\n     * 查看两个刚体是否允许发生碰撞\r\n     * @param bodyA\r\n     * @param bodyB\r\n     */\r\n    canCollide(bodyA, bodyB) {\r\n        // 若bodies[i]的碰撞过滤器过滤了bodies[i]，不进行检测\r\n        if (!bodyA.methods.filter(bodyA.mask, bodyB.mask) || !bodyB.methods.filter(bodyB.mask, bodyA.mask))\r\n            return false;\r\n        // 若刚体已经移出可视区了，跳过\r\n        if (this.isBodyOutWindow(bodyA.bound) || this.isBodyOutWindow(bodyB.bound))\r\n            return false;\r\n        // 两个静态刚体 ，跳过\r\n        if (bodyA.fixed && bodyB.fixed)\r\n            return false;\r\n        // 两个睡眠刚体，跳过\r\n        if (bodyA.sleeping && bodyB.sleeping)\r\n            return false;\r\n        return true;\r\n    }\r\n    /**\r\n     * Sweep & Prune\r\n     * @param bodies\r\n     */\r\n    sweepAndPrune(bodies) {\r\n        let broadPhasePairList = [], i, j, len = bodies.length;\r\n        // 包围盒在x轴上排序 （直接插入排序）\r\n        // 第一次排序时包围盒趋向于无序，这时复杂度为O(n^2) \r\n        // 而因为时间相干性，在之后的每帧包围盒趋向有序，此时直接插入排序效率最高，为O(n^2)\r\n        util_1.Util.insertSort(bodies, (bodyA, bodyB) => bodyA.bound.min.x - bodyB.bound.min.x);\r\n        for (i = 0; i < len; i++) {\r\n            for (j = i + 1; j < len; j++) {\r\n                // 已经不可能发生碰撞了，跳出循环\r\n                if (bodies[i].bound.max.x < bodies[j].bound.min.x)\r\n                    break;\r\n                // 若A，B不可以发生碰撞，返回\r\n                if (!this.canCollide(bodies[i], bodies[j]))\r\n                    continue;\r\n                // 一个个对比包围盒是否相交\r\n                if (bodies[i].bound.isIntersect(bodies[j].bound)) {\r\n                    broadPhasePairList.push({\r\n                        bodyA: bodies[i],\r\n                        bodyB: bodies[j]\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        return broadPhasePairList;\r\n    }\r\n}\r\nexports.BroadPhase = BroadPhase;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL2Jyb2FkUGhhc2UudHM/ZWRmYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxzQ0FBc0M7QUFrQnRDLE1BQWEsVUFBVTtJQUduQixZQUFZLE1BQWM7UUFDdEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDekIsQ0FBQztJQUVEOzs7T0FHRztJQUNILE1BQU0sQ0FBQyxNQUFjO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ssZUFBZSxDQUFDLEtBQVk7UUFDaEMsT0FBTyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3JILENBQUM7SUFFRDs7OztPQUlHO0lBQ0ssVUFBVSxDQUFDLEtBQVcsRUFBRSxLQUFXO1FBQ3ZDLHFDQUFxQztRQUNyQyxJQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFBRSxPQUFPLEtBQUssQ0FBQztRQUVoSCxpQkFBaUI7UUFDakIsSUFBRyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7WUFBRSxPQUFPLEtBQUssQ0FBQztRQUV4RixhQUFhO1FBQ2IsSUFBRyxLQUFLLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLO1lBQUUsT0FBTyxLQUFLLENBQUM7UUFFNUMsWUFBWTtRQUNaLElBQUcsS0FBSyxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUMsUUFBUTtZQUFFLE9BQU8sS0FBSyxDQUFDO1FBRWxELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7O09BR0c7SUFDSyxhQUFhLENBQUMsTUFBYztRQUNoQyxJQUFJLGtCQUFrQixHQUFxQixFQUFFLEVBQ3pDLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFFOUIscUJBQXFCO1FBQ3JCLCtCQUErQjtRQUMvQiw4Q0FBOEM7UUFDOUMsV0FBSSxDQUFDLFVBQVUsQ0FBTyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdkYsS0FBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDckIsS0FBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN6QixrQkFBa0I7Z0JBQ2xCLElBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQUUsTUFBTTtnQkFFeEQsaUJBQWlCO2dCQUNqQixJQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUFFLFNBQVM7Z0JBRXBELGVBQWU7Z0JBQ2YsSUFBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQzdDLGtCQUFrQixDQUFDLElBQUksQ0FBQzt3QkFDcEIsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7d0JBQ2hCLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO3FCQUNuQixDQUFDLENBQUM7aUJBQ047YUFDSjtTQUNKO1FBRUQsT0FBTyxrQkFBa0IsQ0FBQztJQUM5QixDQUFDO0NBQ0o7QUE3RUQsZ0NBNkVDIiwiZmlsZSI6IjE1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9keSB9IGZyb20gXCIuLi9ib2R5L2JvZHlcIjtcclxuaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi9jb21tb24vdXRpbFwiO1xyXG5pbXBvcnQgeyBCb3VuZCB9IGZyb20gXCIuL2JvdW5kXCI7XHJcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gXCIuLi9jb3JlL2VuZ2luZVwiO1xyXG5cclxuLyoqXHJcbiAqIOeyl+ajgOa1i+mYtuaute+8jOS9v+eUqFN3ZWVwICYgUHJ1bmXnrpfms5VcclxuICog5Y+C6ICD77yaaHR0cHM6Ly9saW5rLnNwcmluZ2VyLmNvbS9hcnRpY2xlLzEwLjEwMDcvczAwMzcxLTAxMy0wODgwLTdcclxuICovXHJcblxyXG5cclxuLy8g57KX5qOA5rWL6Zi25q6155Sf5oiQ55qE57uT5p6c5a+557uT5p6EXHJcbmV4cG9ydCB0eXBlIGJyb2FkUGhhc2VQYWlyID0ge1xyXG4gICAgYm9keUE6IEJvZHk7XHJcbiAgICBib2R5QjogQm9keTtcclxufTtcclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEJyb2FkUGhhc2Uge1xyXG4gICAgZW5naW5lOiBFbmdpbmU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBFbmdpbmUpIHtcclxuICAgICAgICB0aGlzLmVuZ2luZSA9IGVuZ2luZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOajgOa1i1xyXG4gICAgICogQHBhcmFtIGJvZGllcyDmiYDmnInliJrkvZNcclxuICAgICAqL1xyXG4gICAgZGV0ZWN0KGJvZGllczogQm9keVtdKTogYnJvYWRQaGFzZVBhaXJbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3dlZXBBbmRQcnVuZShib2RpZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l55yL5Yia5L2T5piv5ZCm5Ye65LqG5Y+v6KeG5Yy6XHJcbiAgICAgKiBAcGFyYW0gYm91bmQgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaXNCb2R5T3V0V2luZG93KGJvdW5kOiBCb3VuZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBib3VuZC5tYXgueSA8IDAgfHwgYm91bmQubWluLnggPiB0aGlzLmVuZ2luZS53aWR0aCB8fCBib3VuZC5taW4ueSA+IHRoaXMuZW5naW5lLmhlaWdodCB8fCBib3VuZC5tYXgueCA8IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmn6XnnIvkuKTkuKrliJrkvZPmmK/lkKblhYHorrjlj5HnlJ/norDmkp5cclxuICAgICAqIEBwYXJhbSBib2R5QSBcclxuICAgICAqIEBwYXJhbSBib2R5QiBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYW5Db2xsaWRlKGJvZHlBOiBCb2R5LCBib2R5QjogQm9keSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIOiLpWJvZGllc1tpXeeahOeisOaSnui/h+a7pOWZqOi/h+a7pOS6hmJvZGllc1tpXe+8jOS4jei/m+ihjOajgOa1i1xyXG4gICAgICAgIGlmKCFib2R5QS5tZXRob2RzLmZpbHRlcihib2R5QS5tYXNrLCBib2R5Qi5tYXNrKSB8fCAhYm9keUIubWV0aG9kcy5maWx0ZXIoYm9keUIubWFzaywgYm9keUEubWFzaykpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDoi6XliJrkvZPlt7Lnu4/np7vlh7rlj6/op4bljLrkuobvvIzot7Pov4dcclxuICAgICAgICBpZih0aGlzLmlzQm9keU91dFdpbmRvdyhib2R5QS5ib3VuZCkgfHwgdGhpcy5pc0JvZHlPdXRXaW5kb3coYm9keUIuYm91bmQpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIOS4pOS4qumdmeaAgeWImuS9kyDvvIzot7Pov4dcclxuICAgICAgICBpZihib2R5QS5maXhlZCAmJiBib2R5Qi5maXhlZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAvLyDkuKTkuKrnnaHnnKDliJrkvZPvvIzot7Pov4dcclxuICAgICAgICBpZihib2R5QS5zbGVlcGluZyAmJiBib2R5Qi5zbGVlcGluZykgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN3ZWVwICYgUHJ1bmVcclxuICAgICAqIEBwYXJhbSBib2RpZXMgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3dlZXBBbmRQcnVuZShib2RpZXM6IEJvZHlbXSk6IGJyb2FkUGhhc2VQYWlyW10ge1xyXG4gICAgICAgIGxldCBicm9hZFBoYXNlUGFpckxpc3Q6IGJyb2FkUGhhc2VQYWlyW10gPSBbXSxcclxuICAgICAgICAgICAgaSwgaiwgbGVuID0gYm9kaWVzLmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICAvLyDljIXlm7Tnm5LlnKh46L205LiK5o6S5bqPIO+8iOebtOaOpeaPkuWFpeaOkuW6j++8iVxyXG4gICAgICAgIC8vIOesrOS4gOasoeaOkuW6j+aXtuWMheWbtOebkui2i+WQkeS6juaXoOW6j++8jOi/meaXtuWkjeadguW6puS4uk8obl4yKSBcclxuICAgICAgICAvLyDogIzlm6DkuLrml7bpl7Tnm7jlubLmgKfvvIzlnKjkuYvlkI7nmoTmr4/luKfljIXlm7Tnm5LotovlkJHmnInluo/vvIzmraTml7bnm7TmjqXmj5LlhaXmjpLluo/mlYjnjofmnIDpq5jvvIzkuLpPKG5eMilcclxuICAgICAgICBVdGlsLmluc2VydFNvcnQ8Qm9keT4oYm9kaWVzLCAoYm9keUEsIGJvZHlCKSA9PiBib2R5QS5ib3VuZC5taW4ueCAtIGJvZHlCLmJvdW5kLm1pbi54KTtcclxuICAgIFxyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvcihqID0gaSArIDE7IGogPCBsZW47IGorKykge1xyXG4gICAgICAgICAgICAgICAgLy8g5bey57uP5LiN5Y+v6IO95Y+R55Sf56Kw5pKe5LqG77yM6Lez5Ye65b6q546vXHJcbiAgICAgICAgICAgICAgICBpZihib2RpZXNbaV0uYm91bmQubWF4LnggPCBib2RpZXNbal0uYm91bmQubWluLngpIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIOiLpUHvvIxC5LiN5Y+v5Lul5Y+R55Sf56Kw5pKe77yM6L+U5ZueXHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5jYW5Db2xsaWRlKGJvZGllc1tpXSwgYm9kaWVzW2pdKSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5LiA5Liq5Liq5a+55q+U5YyF5Zu055uS5piv5ZCm55u45LqkXHJcbiAgICAgICAgICAgICAgICBpZihib2RpZXNbaV0uYm91bmQuaXNJbnRlcnNlY3QoYm9kaWVzW2pdLmJvdW5kKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyb2FkUGhhc2VQYWlyTGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keUE6IGJvZGllc1tpXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keUI6IGJvZGllc1tqXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYnJvYWRQaGFzZVBhaXJMaXN0O1xyXG4gICAgfSBcclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.NarrowPhase = void 0;\r\nconst sat_1 = __webpack_require__(17);\r\nconst arcs_1 = __webpack_require__(4);\r\nconst vertices_1 = __webpack_require__(2);\r\nconst util_1 = __webpack_require__(0);\r\nclass NarrowPhase {\r\n    constructor(engine) {\r\n        this.engine = engine;\r\n        this.SAT = new sat_1.SAT();\r\n    }\r\n    /**\r\n     * 检测\r\n     * @param broadPhasePairList 粗检查生成的潜在碰撞对\r\n     */\r\n    detect(broadPhasePairList) {\r\n        let collisions = [], prevCollision = null, pair, partsA, partsB, partA, partB, i, j, k;\r\n        for (i = 0; i < broadPhasePairList.length; i++) {\r\n            pair = broadPhasePairList[i];\r\n            partsA = pair.bodyA.parts;\r\n            partsB = pair.bodyB.parts;\r\n            for (j = 0; j < partsA.length; j++) {\r\n                partA = partsA[j];\r\n                for (k = 0; k < partsB.length; k++) {\r\n                    partB = partsB[k];\r\n                    // 两个子图形包围盒不相交，跳过\r\n                    if (!partA.bound.isIntersect(partB.bound))\r\n                        continue;\r\n                    prevCollision = this.getPrevCollision(partA, partB, this.engine.manifoldTable);\r\n                    // A,B皆为圆形\r\n                    if (partA instanceof arcs_1.Arc && partB instanceof arcs_1.Arc) {\r\n                        collisions.push(this.SAT.circleCollideCircle(partA, partB, prevCollision));\r\n                    }\r\n                    // A为多边形，B为圆形\r\n                    else if (partA instanceof vertices_1.Poly && partB instanceof arcs_1.Arc) {\r\n                        collisions.push(this.SAT.polygonCollideBody(partA, partB, prevCollision));\r\n                    }\r\n                    // A为圆形，B为多边形\r\n                    else if (partA instanceof arcs_1.Arc && partB instanceof vertices_1.Poly) {\r\n                        collisions.push(this.SAT.polygonCollideBody(partB, partA, prevCollision));\r\n                    }\r\n                    // A,B皆为多边形\r\n                    else {\r\n                        collisions.push(this.SAT.polygonCollideBody(partA, partB, prevCollision));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return collisions;\r\n    }\r\n    /**\r\n     * 获取上一次碰撞\r\n     * @param partA\r\n     * @param partB\r\n     * @param manifoldTable\r\n     */\r\n    getPrevCollision(partA, partB, manifoldTable) {\r\n        let id = util_1.Util.compositeId(partA.id, partB.id), manifold = manifoldTable.table[id];\r\n        if (this.engine.manifoldTable.enableCache && manifold && manifold.isActive) {\r\n            return manifold.collision;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\nexports.NarrowPhase = NarrowPhase;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL25hcnJvd1BoYXNlLnRzP2ZiNDYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsc0NBQTRCO0FBRTVCLHNDQUFxQztBQUNyQywwQ0FBMEM7QUFHMUMsc0NBQXNDO0FBTXRDLE1BQWEsV0FBVztJQVNwQixZQUFZLE1BQWM7UUFDdEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFFckIsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLFNBQUcsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxNQUFNLENBQUMsa0JBQW9DO1FBQ3ZDLElBQUksVUFBVSxHQUFHLEVBQUUsRUFDZixhQUFhLEdBQUcsSUFBSSxFQUNwQixJQUFvQixFQUNwQixNQUFrQixFQUNsQixNQUFrQixFQUNsQixLQUFlLEVBQ2YsS0FBZSxFQUNmLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRVosS0FBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDM0MsSUFBSSxHQUFHLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdCLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztZQUMxQixNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7WUFFMUIsS0FBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUMvQixLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUVsQixLQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQy9CLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBRWxCLGlCQUFpQjtvQkFDakIsSUFBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7d0JBQUUsU0FBUztvQkFFbkQsYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7b0JBRS9FLFVBQVU7b0JBQ1YsSUFBRyxLQUFLLFlBQVksVUFBRyxJQUFJLEtBQUssWUFBWSxVQUFHLEVBQUU7d0JBQzdDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUM7cUJBQzlFO29CQUNELGFBQWE7eUJBQ1IsSUFBRyxLQUFLLFlBQVksZUFBSSxJQUFJLEtBQUssWUFBWSxVQUFHLEVBQUU7d0JBQ25ELFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUM7cUJBQzdFO29CQUNELGFBQWE7eUJBQ1IsSUFBRyxLQUFLLFlBQVksVUFBRyxJQUFJLEtBQUssWUFBWSxlQUFJLEVBQUU7d0JBQ25ELFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUM7cUJBQzdFO29CQUNELFdBQVc7eUJBQ047d0JBQ0QsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFPLEtBQUssRUFBUSxLQUFLLEVBQUUsYUFBYSxDQUFDLENBQUMsQ0FBQztxQkFDekY7aUJBQ0o7YUFDSjtTQUNKO1FBRUQsT0FBTyxVQUFVLENBQUM7SUFDdEIsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsZ0JBQWdCLENBQUMsS0FBZSxFQUFFLEtBQWUsRUFBRSxhQUE0QjtRQUMzRSxJQUFJLEVBQUUsR0FBRyxXQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUN6QyxRQUFRLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUV2QyxJQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFdBQVcsSUFBSSxRQUFRLElBQUksUUFBUSxDQUFDLFFBQVEsRUFBRTtZQUN2RSxPQUFPLFFBQVEsQ0FBQyxTQUFTLENBQUM7U0FDN0I7YUFDSTtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7SUFDTCxDQUFDO0NBQ0o7QUFyRkQsa0NBcUZDIiwiZmlsZSI6IjE2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU0FUIH0gZnJvbSBcIi4vc2F0XCI7XHJcbmltcG9ydCB7IGJyb2FkUGhhc2VQYWlyIH0gZnJvbSBcIi4vYnJvYWRQaGFzZVwiO1xyXG5pbXBvcnQgeyBBcmMgfSBmcm9tIFwiLi4vY29tbW9uL2FyY3NcIjtcclxuaW1wb3J0IHsgUG9seSB9IGZyb20gXCIuLi9jb21tb24vdmVydGljZXNcIjtcclxuaW1wb3J0IHsgRW5naW5lIH0gZnJvbSBcIi4uL2NvcmUvZW5naW5lXCI7XHJcbmltcG9ydCB7IENvbGxpc2lvbiwgR2VvbWV0cnkgfSBmcm9tIFwiLi9tYW5pZm9sZFwiO1xyXG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsXCI7XHJcbmltcG9ydCB7IE1hbmlmb2xkVGFibGUgfSBmcm9tIFwiLi9tYW5pZm9sZFRhYmxlXCI7XHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgTmFycm93UGhhc2Uge1xyXG4gICAgcHJpdmF0ZSBlbmdpbmU6IEVuZ2luZTtcclxuXHJcbiAgICAvLyDliIbnprvovbTmtYvor5VcclxuICAgIHByaXZhdGUgU0FUOiBTQVQ7XHJcbiAgICAvLyDnorDmkp7lr7lcclxuICAgIGNvbGxpc2lvbnM6IENvbGxpc2lvbltdO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IEVuZ2luZSkge1xyXG4gICAgICAgIHRoaXMuZW5naW5lID0gZW5naW5lO1xyXG5cclxuICAgICAgICB0aGlzLlNBVCA9IG5ldyBTQVQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOajgOa1i1xyXG4gICAgICogQHBhcmFtIGJyb2FkUGhhc2VQYWlyTGlzdCDnspfmo4Dmn6XnlJ/miJDnmoTmvZzlnKjnorDmkp7lr7lcclxuICAgICAqL1xyXG4gICAgZGV0ZWN0KGJyb2FkUGhhc2VQYWlyTGlzdDogYnJvYWRQaGFzZVBhaXJbXSk6IENvbGxpc2lvbltdIHtcclxuICAgICAgICBsZXQgY29sbGlzaW9ucyA9IFtdLFxyXG4gICAgICAgICAgICBwcmV2Q29sbGlzaW9uID0gbnVsbCxcclxuICAgICAgICAgICAgcGFpcjogYnJvYWRQaGFzZVBhaXIsXHJcbiAgICAgICAgICAgIHBhcnRzQTogR2VvbWV0cnlbXSxcclxuICAgICAgICAgICAgcGFydHNCOiBHZW9tZXRyeVtdLFxyXG4gICAgICAgICAgICBwYXJ0QTogR2VvbWV0cnksXHJcbiAgICAgICAgICAgIHBhcnRCOiBHZW9tZXRyeSxcclxuICAgICAgICAgICAgaSwgaiwgaztcclxuXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgYnJvYWRQaGFzZVBhaXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHBhaXIgPSBicm9hZFBoYXNlUGFpckxpc3RbaV07XHJcbiAgICAgICAgICAgIHBhcnRzQSA9IHBhaXIuYm9keUEucGFydHM7XHJcbiAgICAgICAgICAgIHBhcnRzQiA9IHBhaXIuYm9keUIucGFydHM7XHJcblxyXG4gICAgICAgICAgICBmb3IoaiA9IDA7IGogPCBwYXJ0c0EubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHBhcnRBID0gcGFydHNBW2pdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihrID0gMDsgayA8IHBhcnRzQi5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRCID0gcGFydHNCW2tdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDkuKTkuKrlrZDlm77lvaLljIXlm7Tnm5LkuI3nm7jkuqTvvIzot7Pov4dcclxuICAgICAgICAgICAgICAgICAgICBpZighcGFydEEuYm91bmQuaXNJbnRlcnNlY3QocGFydEIuYm91bmQpKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkNvbGxpc2lvbiA9IHRoaXMuZ2V0UHJldkNvbGxpc2lvbihwYXJ0QSwgcGFydEIsIHRoaXMuZW5naW5lLm1hbmlmb2xkVGFibGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBLELnmobkuLrlnIblvaJcclxuICAgICAgICAgICAgICAgICAgICBpZihwYXJ0QSBpbnN0YW5jZW9mIEFyYyAmJiBwYXJ0QiBpbnN0YW5jZW9mIEFyYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25zLnB1c2godGhpcy5TQVQuY2lyY2xlQ29sbGlkZUNpcmNsZShwYXJ0QSwgcGFydEIsIHByZXZDb2xsaXNpb24pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQeS4uuWkmui+ueW9ou+8jELkuLrlnIblvaJcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHBhcnRBIGluc3RhbmNlb2YgUG9seSAmJiBwYXJ0QiBpbnN0YW5jZW9mIEFyYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25zLnB1c2godGhpcy5TQVQucG9seWdvbkNvbGxpZGVCb2R5KHBhcnRBLCBwYXJ0QiwgcHJldkNvbGxpc2lvbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBB5Li65ZyG5b2i77yMQuS4uuWkmui+ueW9olxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocGFydEEgaW5zdGFuY2VvZiBBcmMgJiYgcGFydEIgaW5zdGFuY2VvZiBQb2x5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpc2lvbnMucHVzaCh0aGlzLlNBVC5wb2x5Z29uQ29sbGlkZUJvZHkocGFydEIsIHBhcnRBLCBwcmV2Q29sbGlzaW9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEsQueahuS4uuWkmui+ueW9olxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25zLnB1c2godGhpcy5TQVQucG9seWdvbkNvbGxpZGVCb2R5KDxQb2x5PnBhcnRBLCA8UG9seT5wYXJ0QiwgcHJldkNvbGxpc2lvbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbGxpc2lvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bkuIrkuIDmrKHnorDmkp5cclxuICAgICAqIEBwYXJhbSBwYXJ0QSBcclxuICAgICAqIEBwYXJhbSBwYXJ0QiBcclxuICAgICAqIEBwYXJhbSBtYW5pZm9sZFRhYmxlIFxyXG4gICAgICovXHJcbiAgICBnZXRQcmV2Q29sbGlzaW9uKHBhcnRBOiBHZW9tZXRyeSwgcGFydEI6IEdlb21ldHJ5LCBtYW5pZm9sZFRhYmxlOiBNYW5pZm9sZFRhYmxlKTogQ29sbGlzaW9uIHtcclxuICAgICAgICBsZXQgaWQgPSBVdGlsLmNvbXBvc2l0ZUlkKHBhcnRBLmlkLCBwYXJ0Qi5pZCksXHJcbiAgICAgICAgICAgIG1hbmlmb2xkID0gbWFuaWZvbGRUYWJsZS50YWJsZVtpZF07XHJcblxyXG4gICAgICAgIGlmKHRoaXMuZW5naW5lLm1hbmlmb2xkVGFibGUuZW5hYmxlQ2FjaGUgJiYgbWFuaWZvbGQgJiYgbWFuaWZvbGQuaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hbmlmb2xkLmNvbGxpc2lvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///16\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.SAT = void 0;\r\nconst vector_1 = __webpack_require__(1);\r\nconst vertices_1 = __webpack_require__(2);\r\nconst arcs_1 = __webpack_require__(4);\r\nconst manifold_1 = __webpack_require__(7);\r\n/**\r\n * 分离轴算法\r\n * 参考：https://gamedevelopment.tutsplus.com/tutorials/collision-detection-using-the-separating-axis-theorem--gamedev-169\r\n */\r\nclass SAT {\r\n    /**\r\n     * 多边形 - 多边形或圆形（geometry）\r\n     * @param poly\r\n     * @param geometry\r\n     * @param prevCollision\r\n     */\r\n    polygonCollideBody(poly, geometry, prevCollision) {\r\n        let canReuse = this.canReuseCollision(poly, geometry, prevCollision), collision = null, result = null, oldContacts = null;\r\n        // 若能用缓存，使用缓存\r\n        if (canReuse) {\r\n            collision = prevCollision;\r\n            oldContacts = prevCollision.contacts;\r\n            result = this.detect(poly, geometry, [collision.normal]);\r\n            if (result.minOverlap < 0) {\r\n                collision.collide = false;\r\n                return collision;\r\n            }\r\n        }\r\n        // 若不能用缓存，则进行完整的测试\r\n        else {\r\n            let axes = this.filterAxes(poly, geometry);\r\n            collision = new manifold_1.Collision();\r\n            result = this.detect(poly, geometry, axes);\r\n            // 若发现两个刚体投影的重叠部分是负的，即表示它们没相交\r\n            if (result.minOverlap < 0) {\r\n                collision.collide = false;\r\n                return collision;\r\n            }\r\n            let normal = this.reviseNormal(axes[result.index], poly, geometry);\r\n            collision.normal.x = normal.x;\r\n            collision.normal.y = normal.y;\r\n            collision.tangent = normal.nor(collision.tangent);\r\n            collision.partA = poly;\r\n            collision.partB = geometry;\r\n            collision.bodyA = poly.body;\r\n            collision.bodyB = geometry.body;\r\n        }\r\n        collision.depth = result.minOverlap;\r\n        collision.penetration = collision.normal.scl(collision.depth, collision.penetration);\r\n        collision.contacts = this.findContacts(poly, geometry, collision.normal, collision.depth);\r\n        collision.collide = true;\r\n        // warm start\r\n        if (oldContacts) {\r\n            for (let i = 0; i < oldContacts.length; i++) {\r\n                if (collision.contacts[i]) {\r\n                    collision.contacts[i].normalImpulse = oldContacts[i].normalImpulse;\r\n                    collision.contacts[i].tangentImpulse = oldContacts[i].tangentImpulse;\r\n                }\r\n            }\r\n        }\r\n        return collision;\r\n    }\r\n    /**\r\n     * 圆形 - 圆形\r\n     * @param circleA\r\n     * @param circleB\r\n     * @param prevCollision\r\n     */\r\n    circleCollideCircle(arcA, arcB, prevCollision) {\r\n        let axis = arcA.center.sub(arcB.center, vector_1._tempVector1), overlaps = (arcA.radius + arcB.radius) - axis.len(), collision = new manifold_1.Collision();\r\n        // 两圆心距离比两圆半径和要大，即没有发生碰撞\r\n        if (overlaps < 0) {\r\n            collision.collide = false;\r\n            return collision;\r\n        }\r\n        let normal = this.reviseNormal(axis, arcA, arcB).nol();\r\n        collision.partA = arcA;\r\n        collision.partB = arcB;\r\n        collision.bodyA = arcA.body;\r\n        collision.bodyB = arcB.body;\r\n        collision.normal.x = normal.x;\r\n        collision.normal.y = normal.y;\r\n        collision.tangent = normal.nor(collision.tangent).nol();\r\n        collision.depth = overlaps;\r\n        collision.penetration = normal.scl(overlaps, collision.penetration);\r\n        arcA.center.loc(normal.inv(vector_1._tempVector1), arcA.radius - overlaps / 2, vector_1._tempVector1);\r\n        collision.contacts = [new manifold_1.Contact(vector_1._tempVector1)];\r\n        collision.collide = true;\r\n        return collision;\r\n    }\r\n    /**\r\n     * --------------------------------------------------------------------------------------------------\r\n     */\r\n    /**\r\n     * 进行分离轴检测\r\n     * @param poly\r\n     * @param geometry\r\n     * @param collision\r\n     * @param axes\r\n     */\r\n    detect(poly, geometry, axes) {\r\n        let minOverlap = Infinity, overlaps, len = axes.length, i, index;\r\n        // 将两个刚体投影到所有轴上\r\n        for (i = 0; i < len; i++) {\r\n            overlaps = this.minOverlaps(poly, geometry, axes[i]);\r\n            if (overlaps < 0) {\r\n                return {\r\n                    minOverlap: overlaps,\r\n                    index\r\n                };\r\n            }\r\n            if (overlaps < minOverlap) {\r\n                minOverlap = overlaps;\r\n                index = i;\r\n            }\r\n        }\r\n        return {\r\n            minOverlap,\r\n            index\r\n        };\r\n    }\r\n    /**\r\n     * 过滤有可能的轴和顶点集\r\n     * @param poly\r\n     * @param geometry\r\n     */\r\n    filterAxes(poly, geometry) {\r\n        let axes = [];\r\n        // 若geometry是多边形\r\n        if (geometry instanceof vertices_1.Poly) {\r\n            axes.push(...poly.axes);\r\n            axes.push(...geometry.axes);\r\n        }\r\n        // 是圆形\r\n        else {\r\n            axes.push(arcs_1.Arcs.getAxes(geometry, poly), ...poly.axes);\r\n        }\r\n        return vertices_1.Vertices.uniqueAxes(axes);\r\n    }\r\n    /**\r\n     * 修正碰撞法线方向，使其始终背向刚体A\r\n     * @param normal 要修正的法线\r\n     * @param bodyA 刚体A\r\n     * @param bodyB 刚体B\r\n     */\r\n    reviseNormal(normal, geometryA, geometryB) {\r\n        if (normal.dot(geometryB.center.sub(geometryA.center, vector_1._tempVector1)) > 0) {\r\n            return normal.inv();\r\n        }\r\n        return normal.col();\r\n    }\r\n    /**\r\n     * 求最小投影重叠\r\n     * @param poly\r\n     * @param geometry\r\n     * @param axis 投影轴\r\n     */\r\n    minOverlaps(poly, geometry, axis) {\r\n        let projection1, projection2;\r\n        // 若geometry是多边形\r\n        if (geometry instanceof vertices_1.Poly) {\r\n            projection1 = vertices_1.Vertices.projection(poly.vertexList, axis),\r\n                projection2 = vertices_1.Vertices.projection(geometry.vertexList, axis);\r\n        }\r\n        // 是圆形\r\n        else {\r\n            projection1 = vertices_1.Vertices.projection(poly.vertexList, axis),\r\n                projection2 = arcs_1.Arcs.Projection(geometry, axis);\r\n        }\r\n        return Math.min(projection1.max - projection2.min, projection2.max - projection1.min);\r\n    }\r\n    /**\r\n     * 寻找碰撞点\r\n     * @param poly\r\n     * @param geometry\r\n     * @param collision\r\n     */\r\n    findContacts(poly, geometry, normal, depth) {\r\n        let potentialContactsA = [], potentialContactsB = [], contacts = [], normalInv = normal.inv(), i;\r\n        if (geometry instanceof vertices_1.Poly) {\r\n            let vertexListA = poly.vertexList, vertexListB = geometry.vertexList;\r\n            // 寻找多边形A最接近多边形B的两个点\r\n            potentialContactsA = this.orderProjectionVertexInNormalDirection(vertexListA, normal);\r\n            for (i = 0; i < potentialContactsA.length; i++) {\r\n                // 查看这些点是否在多边形B内部\r\n                if (vertices_1.Vertices.isContains(vertexListB, potentialContactsA[i])) {\r\n                    // 如果是，则这个点记为一个碰撞点\r\n                    contacts.push(new manifold_1.Contact(potentialContactsA[i]));\r\n                }\r\n                else {\r\n                    if (i !== 0)\r\n                        break;\r\n                }\r\n            }\r\n            if (contacts.length >= 2)\r\n                return contacts;\r\n            // 同理上面\r\n            potentialContactsB = this.orderProjectionVertexInNormalDirection(vertexListB, normalInv);\r\n            for (i = 0; i < potentialContactsB.length; i++) {\r\n                if (vertices_1.Vertices.isContains(vertexListA, potentialContactsB[i])) {\r\n                    contacts.push(new manifold_1.Contact(potentialContactsB[i]));\r\n                }\r\n                else {\r\n                    if (i !== 0)\r\n                        break;\r\n                }\r\n            }\r\n            // 边界情况：即没有碰撞点的情况\r\n            if (contacts.length < 1) {\r\n                contacts.push(new manifold_1.Contact(potentialContactsA[0]));\r\n            }\r\n        }\r\n        else {\r\n            contacts.push(new manifold_1.Contact(geometry.center.loc(normal, geometry.radius - depth / 2)));\r\n        }\r\n        return contacts;\r\n    }\r\n    /**\r\n     * 将顶点按照在法线上投影的大小顺序排序\r\n     * @param vertexList\r\n     * @param normal\r\n     */\r\n    orderProjectionVertexInNormalDirection(vertexList, normal) {\r\n        return vertexList.slice(0).sort((vertexA, vertexB) => vertexA.dot(normal) - vertexB.dot(normal));\r\n    }\r\n    /**\r\n     * 查看碰撞缓存是否可以复用\r\n     * @param geometryA\r\n     * @param geometryB\r\n     * @param prevCollision 上一次的碰撞\r\n     */\r\n    canReuseCollision(geometryA, geometryB, prevCollision) {\r\n        // 若上次碰撞的缓存存在\r\n        if (prevCollision) {\r\n            let bodyA = geometryA.body, bodyB = geometryB.body, motion = Math.sqrt(bodyA.motion + bodyB.motion);\r\n            // 若上次碰撞判定为真，且当前碰撞对刚体趋于静止，可复用\r\n            return prevCollision.collide && motion < 0.1;\r\n        }\r\n        // 碰撞缓存不存在，直接判定无法复用\r\n        return false;\r\n    }\r\n}\r\nexports.SAT = SAT;\r\n;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL3NhdC50cz9kZTk5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLHdDQUFzRDtBQUN0RCwwQ0FBZ0U7QUFDaEUsc0NBQTJDO0FBQzNDLDBDQUEwRDtBQUkxRDs7O0dBR0c7QUFFSCxNQUFhLEdBQUc7SUFFWjs7Ozs7T0FLRztJQUNILGtCQUFrQixDQUFDLElBQVUsRUFBRSxRQUFrQixFQUFFLGFBQXdCO1FBQ3ZFLElBQUksUUFBUSxHQUFZLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLGFBQWEsQ0FBQyxFQUN6RSxTQUFTLEdBQWMsSUFBSSxFQUMzQixNQUFNLEdBQUcsSUFBSSxFQUNiLFdBQVcsR0FBYyxJQUFJLENBQUM7UUFFbEMsYUFBYTtRQUNiLElBQUcsUUFBUSxFQUFFO1lBQ1QsU0FBUyxHQUFHLGFBQWEsQ0FBQztZQUMxQixXQUFXLEdBQUcsYUFBYSxDQUFDLFFBQVEsQ0FBQztZQUVyQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFFekQsSUFBRyxNQUFNLENBQUMsVUFBVSxHQUFHLENBQUMsRUFBRTtnQkFDdEIsU0FBUyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7Z0JBQzFCLE9BQU8sU0FBUyxDQUFDO2FBQ3BCO1NBQ0o7UUFDRCxrQkFBa0I7YUFDYjtZQUNELElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRTNDLFNBQVMsR0FBRyxJQUFJLG9CQUFTLEVBQUUsQ0FBQztZQUU1QixNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBRTNDLDZCQUE2QjtZQUM3QixJQUFHLE1BQU0sQ0FBQyxVQUFVLEdBQUcsQ0FB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QUMsQ0FBQyxDQUFDO2FBQ3JEO1NBQ0o7YUFDSTtZQUNELFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxrQkFBTyxDQUFPLFFBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBUSxRQUFTLENBQUMsTUFBTSxHQUFHLEtBQUssR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDcEc7UUFFRCxPQUFPLFFBQVEsQ0FBQztJQUNwQixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNLLHNDQUFzQyxDQUFDLFVBQXNCLEVBQUUsTUFBYztRQUNqRixPQUFPLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDckcsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ssaUJBQWlCLENBQUMsU0FBbUIsRUFBRSxTQUFtQixFQUFFLGFBQXdCO1FBQ3hGLGFBQWE7UUFDYixJQUFHLGFBQWEsRUFBRTtZQUNkLElBQUksS0FBSyxHQUFHLFNBQVMsQ0FBQyxJQUFJLEVBQ3RCLEtBQUssR0FBRyxTQUFTLENBQUMsSUFBSSxFQUN0QixNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUVwRCw2QkFBNkI7WUFDN0IsT0FBTyxhQUFhLENBQUMsT0FBTyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUM7U0FDaEQ7UUFFRCxtQkFBbUI7UUFDbkIsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztDQUNKO0FBMVNELGtCQTBTQztBQUFBLENBQUMiLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWN0b3IsIF90ZW1wVmVjdG9yMSB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBQb2x5LCBWZXJ0ZXhMaXN0LCBWZXJ0aWNlcyB9IGZyb20gXCIuLi9jb21tb24vdmVydGljZXNcIjtcclxuaW1wb3J0IHsgQXJjcywgQXJjIH0gZnJvbSBcIi4uL2NvbW1vbi9hcmNzXCI7XHJcbmltcG9ydCB7IENvbGxpc2lvbiwgQ29udGFjdCwgR2VvbWV0cnkgfSBmcm9tIFwiLi9tYW5pZm9sZFwiO1xyXG5cclxuXHJcblxyXG4vKipcclxuICog5YiG56a76L20566X5rOVXHJcbiAqIOWPguiAg++8mmh0dHBzOi8vZ2FtZWRldmVsb3BtZW50LnR1dHNwbHVzLmNvbS90dXRvcmlhbHMvY29sbGlzaW9uLWRldGVjdGlvbi11c2luZy10aGUtc2VwYXJhdGluZy1heGlzLXRoZW9yZW0tLWdhbWVkZXYtMTY5XHJcbiAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIFNBVCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlpJrovrnlvaIgLSDlpJrovrnlvaLmiJblnIblvaLvvIhnZW9tZXRyee+8iVxyXG4gICAgICogQHBhcmFtIHBvbHlcclxuICAgICAqIEBwYXJhbSBnZW9tZXRyeSBcclxuICAgICAqIEBwYXJhbSBwcmV2Q29sbGlzaW9uXHJcbiAgICAgKi9cclxuICAgIHBvbHlnb25Db2xsaWRlQm9keShwb2x5OiBQb2x5LCBnZW9tZXRyeTogR2VvbWV0cnksIHByZXZDb2xsaXNpb246IENvbGxpc2lvbik6IENvbGxpc2lvbiB7XHJcbiAgICAgICAgbGV0IGNhblJldXNlOiBib29sZWFuID0gdGhpcy5jYW5SZXVzZUNvbGxpc2lvbihwb2x5LCBnZW9tZXRyeSwgcHJldkNvbGxpc2lvbiksXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbjogQ29sbGlzaW9uID0gbnVsbCxcclxuICAgICAgICAgICAgcmVzdWx0ID0gbnVsbCxcclxuICAgICAgICAgICAgb2xkQ29udGFjdHM6IENvbnRhY3RbXSA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g6Iul6IO955So57yT5a2Y77yM5L2/55So57yT5a2YXHJcbiAgICAgICAgaWYoY2FuUmV1c2UpIHtcclxuICAgICAgICAgICAgY29sbGlzaW9uID0gcHJldkNvbGxpc2lvbjtcclxuICAgICAgICAgICAgb2xkQ29udGFjdHMgPSBwcmV2Q29sbGlzaW9uLmNvbnRhY3RzO1xyXG5cclxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5kZXRlY3QocG9seSwgZ2VvbWV0cnksIFtjb2xsaXNpb24ubm9ybWFsXSk7XHJcblxyXG4gICAgICAgICAgICBpZihyZXN1bHQubWluT3ZlcmxhcCA8IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvbi5jb2xsaWRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sbGlzaW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOiLpeS4jeiDveeUqOe8k+WtmO+8jOWImei/m+ihjOWujOaVtOeahOa1i+ivlVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgYXhlcyA9IHRoaXMuZmlsdGVyQXhlcyhwb2x5LCBnZW9tZXRyeSk7XHJcblxyXG4gICAgICAgICAgICBjb2xsaXNpb24gPSBuZXcgQ29sbGlzaW9uKCk7XHJcblxyXG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmRldGVjdChwb2x5LCBnZW9tZXRyeSwgYXhlcyk7XHJcblxyXG4gICAgICAgICAgICAvLyDoi6Xlj5HnjrDkuKTkuKrliJrkvZPmipXlvbHnmoTph43lj6Dpg6jliIbmmK/otJ/nmoTvvIzljbPooajnpLrlroPku6zmsqHnm7jkuqRcclxuICAgICAgICAgICAgaWYocmVzdWx0Lm1pbk92ZXJsYXAgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xsaXNpb24uY29sbGlkZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbGxpc2lvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IG5vcm1hbCA9IHRoaXMucmV2aXNlTm9ybWFsKGF4ZXNbcmVzdWx0LmluZGV4XSwgcG9seSwgZ2VvbWV0cnkpO1xyXG5cclxuICAgICAgICAgICAgY29sbGlzaW9uLm5vcm1hbC54ID0gbm9ybWFsLng7XHJcbiAgICAgICAgICAgIGNvbGxpc2lvbi5ub3JtYWwueSA9IG5vcm1hbC55O1xyXG4gICAgICAgICAgICBjb2xsaXNpb24udGFuZ2VudCA9IG5vcm1hbC5ub3IoY29sbGlzaW9uLnRhbmdlbnQpO1xyXG5cclxuICAgICAgICAgICAgY29sbGlzaW9uLnBhcnRBID0gcG9seTtcclxuICAgICAgICAgICAgY29sbGlzaW9uLnBhcnRCID0gZ2VvbWV0cnk7XHJcbiAgICAgICAgICAgIGNvbGxpc2lvbi5ib2R5QSA9IHBvbHkuYm9keTtcclxuICAgICAgICAgICAgY29sbGlzaW9uLmJvZHlCID0gZ2VvbWV0cnkuYm9keTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbGxpc2lvbi5kZXB0aCA9IHJlc3VsdC5taW5PdmVybGFwO1xyXG4gICAgICAgIGNvbGxpc2lvbi5wZW5ldHJhdGlvbiA9IGNvbGxpc2lvbi5ub3JtYWwuc2NsKGNvbGxpc2lvbi5kZXB0aCwgY29sbGlzaW9uLnBlbmV0cmF0aW9uKTtcclxuICAgICAgICBjb2xsaXNpb24uY29udGFjdHMgPSB0aGlzLmZpbmRDb250YWN0cyhwb2x5LCBnZW9tZXRyeSwgY29sbGlzaW9uLm5vcm1hbCwgY29sbGlzaW9uLmRlcHRoKTtcclxuICAgICAgICBjb2xsaXNpb24uY29sbGlkZSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIHdhcm0gc3RhcnRcclxuICAgICAgICBpZihvbGRDb250YWN0cykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgb2xkQ29udGFjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKGNvbGxpc2lvbi5jb250YWN0c1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxpc2lvbi5jb250YWN0c1tpXS5ub3JtYWxJbXB1bHNlID0gb2xkQ29udGFjdHNbaV0ubm9ybWFsSW1wdWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb24uY29udGFjdHNbaV0udGFuZ2VudEltcHVsc2UgPSBvbGRDb250YWN0c1tpXS50YW5nZW50SW1wdWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbGxpc2lvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWchuW9oiAtIOWchuW9olxyXG4gICAgICogQHBhcmFtIGNpcmNsZUEgXHJcbiAgICAgKiBAcGFyYW0gY2lyY2xlQiBcclxuICAgICAqIEBwYXJhbSBwcmV2Q29sbGlzaW9uXHJcbiAgICAgKi9cclxuICAgIGNpcmNsZUNvbGxpZGVDaXJjbGUoYXJjQTogQXJjLCBhcmNCOiBBcmMsIHByZXZDb2xsaXNpb246IENvbGxpc2lvbik6IENvbGxpc2lvbiB7XHJcbiAgICAgICAgbGV0IGF4aXM6IFZlY3RvciA9IGFyY0EuY2VudGVyLnN1YihhcmNCLmNlbnRlciwgX3RlbXBWZWN0b3IxKSxcclxuICAgICAgICAgICAgb3ZlcmxhcHM6IG51bWJlciA9IChhcmNBLnJhZGl1cyArIGFyY0IucmFkaXVzKSAtIGF4aXMubGVuKCksXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbjogQ29sbGlzaW9uID0gbmV3IENvbGxpc2lvbigpO1xyXG5cclxuICAgICAgICAvLyDkuKTlnIblv4Pot53nprvmr5TkuKTlnIbljYrlvoTlkozopoHlpKfvvIzljbPmsqHmnInlj5HnlJ/norDmkp5cclxuICAgICAgICBpZihvdmVybGFwcyA8IDApIHtcclxuICAgICAgICAgICAgY29sbGlzaW9uLmNvbGxpZGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbGxpc2lvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBub3JtYWwgPSB0aGlzLnJldmlzZU5vcm1hbChheGlzLCBhcmNBLCBhcmNCKS5ub2woKTtcclxuXHJcbiAgICAgICAgY29sbGlzaW9uLnBhcnRBID0gYXJjQTtcclxuICAgICAgICBjb2xsaXNpb24ucGFydEIgPSBhcmNCO1xyXG4gICAgICAgIGNvbGxpc2lvbi5ib2R5QSA9IGFyY0EuYm9keTtcclxuICAgICAgICBjb2xsaXNpb24uYm9keUIgPSBhcmNCLmJvZHk7XHJcblxyXG4gICAgICAgIGNvbGxpc2lvbi5ub3JtYWwueCA9IG5vcm1hbC54O1xyXG4gICAgICAgIGNvbGxpc2lvbi5ub3JtYWwueSA9IG5vcm1hbC55O1xyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50ID0gbm9ybWFsLm5vcihjb2xsaXNpb24udGFuZ2VudCkubm9sKCk7XHJcblxyXG4gICAgICAgIGNvbGxpc2lvbi5kZXB0aCA9IG92ZXJsYXBzO1xyXG4gICAgICAgIGNvbGxpc2lvbi5wZW5ldHJhdGlvbiA9IG5vcm1hbC5zY2wob3ZlcmxhcHMsIGNvbGxpc2lvbi5wZW5ldHJhdGlvbik7XHJcblxyXG4gICAgICAgIGFyY0EuY2VudGVyLmxvYyhub3JtYWwuaW52KF90ZW1wVmVjdG9yMSksIGFyY0EucmFkaXVzIC0gb3ZlcmxhcHMvMiwgX3RlbXBWZWN0b3IxKVxyXG5cclxuICAgICAgICBjb2xsaXNpb24uY29udGFjdHMgPSBbbmV3IENvbnRhY3QoX3RlbXBWZWN0b3IxKV07XHJcbiAgICAgICAgY29sbGlzaW9uLmNvbGxpZGUgPSB0cnVlO1xyXG5cclxuICAgICAgICByZXR1cm4gY29sbGlzaW9uO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDov5vooYzliIbnprvovbTmo4DmtYtcclxuICAgICAqIEBwYXJhbSBwb2x5IFxyXG4gICAgICogQHBhcmFtIGdlb21ldHJ5IFxyXG4gICAgICogQHBhcmFtIGNvbGxpc2lvbiBcclxuICAgICAqIEBwYXJhbSBheGVzIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGRldGVjdChwb2x5OiBQb2x5LCBnZW9tZXRyeTogR2VvbWV0cnksIGF4ZXM6IFZlY3RvcltdKTogeyBtaW5PdmVybGFwOiBudW1iZXIsIGluZGV4OiBudW1iZXIgfSB7XHJcbiAgICAgICAgbGV0IG1pbk92ZXJsYXAgPSBJbmZpbml0eSxcclxuICAgICAgICAgICAgb3ZlcmxhcHMsIFxyXG4gICAgICAgICAgICBsZW4gPSBheGVzLmxlbmd0aCxcclxuICAgICAgICAgICAgaSwgaW5kZXg7XHJcblxyXG4gICAgICAgIC8vIOWwhuS4pOS4quWImuS9k+aKleW9seWIsOaJgOaciei9tOS4ilxyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIG92ZXJsYXBzID0gdGhpcy5taW5PdmVybGFwcyhwb2x5LCBnZW9tZXRyeSwgYXhlc1tpXSk7XHJcblxyXG4gICAgICAgICAgICBpZihvdmVybGFwcyA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluT3ZlcmxhcDogb3ZlcmxhcHMsIFxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKG92ZXJsYXBzIDwgbWluT3ZlcmxhcCkge1xyXG4gICAgICAgICAgICAgICAgbWluT3ZlcmxhcCA9IG92ZXJsYXBzO1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtaW5PdmVybGFwLCBcclxuICAgICAgICAgICAgaW5kZXhcclxuICAgICAgICB9XHJcbiAgICB9IFxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOi/h+a7pOacieWPr+iDveeahOi9tOWSjOmhtueCuembhlxyXG4gICAgICogQHBhcmFtIHBvbHkgXHJcbiAgICAgKiBAcGFyYW0gZ2VvbWV0cnkgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZmlsdGVyQXhlcyhwb2x5OiBQb2x5LCBnZW9tZXRyeTogR2VvbWV0cnkpOiBWZWN0b3JbXSB7XHJcbiAgICAgICAgbGV0IGF4ZXM6IFZlY3RvcltdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g6IulZ2VvbWV0cnnmmK/lpJrovrnlvaJcclxuICAgICAgICBpZihnZW9tZXRyeSBpbnN0YW5jZW9mIFBvbHkpIHtcclxuICAgICAgICAgICAgYXhlcy5wdXNoKC4uLnBvbHkuYXhlcyk7XHJcbiAgICAgICAgICAgIGF4ZXMucHVzaCguLi5nZW9tZXRyeS5heGVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5piv5ZyG5b2iXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGF4ZXMucHVzaChBcmNzLmdldEF4ZXMoPEFyYz5nZW9tZXRyeSwgcG9seSksIC4uLnBvbHkuYXhlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gVmVydGljZXMudW5pcXVlQXhlcyhheGVzKTtcclxuICAgIH1cclxuXHJcbiBcclxuICAgIC8qKlxyXG4gICAgICog5L+u5q2j56Kw5pKe5rOV57q/5pa55ZCR77yM5L2/5YW25aeL57uI6IOM5ZCR5Yia5L2TQVxyXG4gICAgICogQHBhcmFtIG5vcm1hbCDopoHkv67mraPnmoTms5Xnur9cclxuICAgICAqIEBwYXJhbSBib2R5QSDliJrkvZNBXHJcbiAgICAgKiBAcGFyYW0gYm9keUIg5Yia5L2TQlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJldmlzZU5vcm1hbChub3JtYWw6IFZlY3RvciwgZ2VvbWV0cnlBOiBHZW9tZXRyeSwgZ2VvbWV0cnlCOiBHZW9tZXRyeSk6IFZlY3RvciB7XHJcbiAgICAgICAgaWYgKG5vcm1hbC5kb3QoZ2VvbWV0cnlCLmNlbnRlci5zdWIoZ2VvbWV0cnlBLmNlbnRlciwgX3RlbXBWZWN0b3IxKSkgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub3JtYWwuaW52KCk7XHJcbiAgICAgICAgfSBcclxuXHJcbiAgICAgICAgcmV0dXJuIG5vcm1hbC5jb2woKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaxguacgOWwj+aKleW9semHjeWPoFxyXG4gICAgICogQHBhcmFtIHBvbHkgXHJcbiAgICAgKiBAcGFyYW0gZ2VvbWV0cnlcclxuICAgICAqIEBwYXJhbSBheGlzIOaKleW9sei9tFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1pbk92ZXJsYXBzKHBvbHk6IFBvbHksIGdlb21ldHJ5OiBHZW9tZXRyeSwgYXhpczogVmVjdG9yKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgcHJvamVjdGlvbjEsXHJcbiAgICAgICAgICAgIHByb2plY3Rpb24yO1xyXG5cclxuICAgICAgICAvLyDoi6VnZW9tZXRyeeaYr+Wkmui+ueW9olxyXG4gICAgICAgIGlmKGdlb21ldHJ5IGluc3RhbmNlb2YgUG9seSkge1xyXG4gICAgICAgICAgICBwcm9qZWN0aW9uMSA9IFZlcnRpY2VzLnByb2plY3Rpb24ocG9seS52ZXJ0ZXhMaXN0LCBheGlzKSxcclxuICAgICAgICAgICAgcHJvamVjdGlvbjIgPSBWZXJ0aWNlcy5wcm9qZWN0aW9uKCg8UG9seT5nZW9tZXRyeSkudmVydGV4TGlzdCwgYXhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOaYr+WchuW9olxyXG4gICAgICAgIGVsc2UgeyBcclxuICAgICAgICAgICAgcHJvamVjdGlvbjEgPSBWZXJ0aWNlcy5wcm9qZWN0aW9uKHBvbHkudmVydGV4TGlzdCwgYXhpcyksXHJcbiAgICAgICAgICAgIHByb2plY3Rpb24yID0gQXJjcy5Qcm9qZWN0aW9uKCg8QXJjPmdlb21ldHJ5KSwgYXhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gTWF0aC5taW4ocHJvamVjdGlvbjEubWF4IC0gcHJvamVjdGlvbjIubWluLCBwcm9qZWN0aW9uMi5tYXggLSBwcm9qZWN0aW9uMS5taW4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a+75om+56Kw5pKe54K5XHJcbiAgICAgKiBAcGFyYW0gcG9seSBcclxuICAgICAqIEBwYXJhbSBnZW9tZXRyeSBcclxuICAgICAqIEBwYXJhbSBjb2xsaXNpb24gXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZmluZENvbnRhY3RzKHBvbHk6IFBvbHksIGdlb21ldHJ5OiBHZW9tZXRyeSwgbm9ybWFsOiBWZWN0b3IsIGRlcHRoOiBudW1iZXIpOiBDb250YWN0W10ge1xyXG4gICAgICAgIGxldCBwb3RlbnRpYWxDb250YWN0c0E6IFZlY3RvcltdID0gW10sXHJcbiAgICAgICAgICAgIHBvdGVudGlhbENvbnRhY3RzQjogVmVjdG9yW10gPSBbXSxcclxuICAgICAgICAgICAgY29udGFjdHM6IENvbnRhY3RbXSA9IFtdLFxyXG4gICAgICAgICAgICBub3JtYWxJbnYgPSBub3JtYWwuaW52KCksXHJcbiAgICAgICAgICAgIGk7XHJcblxyXG4gICAgICAgIGlmKGdlb21ldHJ5IGluc3RhbmNlb2YgUG9seSkge1xyXG4gICAgICAgICAgICBsZXQgdmVydGV4TGlzdEEgPSBwb2x5LnZlcnRleExpc3QsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhMaXN0QiA9ICg8UG9seT5nZW9tZXRyeSkudmVydGV4TGlzdDtcclxuXHJcbiAgICAgICAgICAgIC8vIOWvu+aJvuWkmui+ueW9okHmnIDmjqXov5HlpJrovrnlvaJC55qE5Lik5Liq54K5XHJcbiAgICAgICAgICAgIHBvdGVudGlhbENvbnRhY3RzQSA9IHRoaXMub3JkZXJQcm9qZWN0aW9uVmVydGV4SW5Ob3JtYWxEaXJlY3Rpb24odmVydGV4TGlzdEEsIG5vcm1hbCk7XHJcblxyXG4gICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBwb3RlbnRpYWxDb250YWN0c0EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIOafpeeci+i/meS6m+eCueaYr+WQpuWcqOWkmui+ueW9okLlhoXpg6hcclxuICAgICAgICAgICAgICAgIGlmKFZlcnRpY2VzLmlzQ29udGFpbnModmVydGV4TGlzdEIsIHBvdGVudGlhbENvbnRhY3RzQVtpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/vvIzliJnov5nkuKrngrnorrDkuLrkuIDkuKrnorDmkp7ngrlcclxuICAgICAgICAgICAgICAgICAgICBjb250YWN0cy5wdXNoKG5ldyBDb250YWN0KHBvdGVudGlhbENvbnRhY3RzQVtpXSkpO1xyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGkgIT09IDApIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihjb250YWN0cy5sZW5ndGggPj0gMikgcmV0dXJuIGNvbnRhY3RzO1xyXG5cclxuICAgICAgICAgICAgLy8g5ZCM55CG5LiK6Z2iXHJcbiAgICAgICAgICAgIHBvdGVudGlhbENvbnRhY3RzQiA9IHRoaXMub3JkZXJQcm9qZWN0aW9uVmVydGV4SW5Ob3JtYWxEaXJlY3Rpb24odmVydGV4TGlzdEIsIG5vcm1hbEludik7XHJcblxyXG4gICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBwb3RlbnRpYWxDb250YWN0c0IubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKFZlcnRpY2VzLmlzQ29udGFpbnModmVydGV4TGlzdEEsIHBvdGVudGlhbENvbnRhY3RzQltpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWN0cy5wdXNoKG5ldyBDb250YWN0KHBvdGVudGlhbENvbnRhY3RzQltpXSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaSAhPT0gMCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDovrnnlYzmg4XlhrXvvJrljbPmsqHmnInnorDmkp7ngrnnmoTmg4XlhrVcclxuICAgICAgICAgICAgaWYoY29udGFjdHMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgY29udGFjdHMucHVzaChuZXcgQ29udGFjdChwb3RlbnRpYWxDb250YWN0c0FbMF0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29udGFjdHMucHVzaChuZXcgQ29udGFjdCgoPEFyYz5nZW9tZXRyeSkuY2VudGVyLmxvYyhub3JtYWwsICg8QXJjPmdlb21ldHJ5KS5yYWRpdXMgLSBkZXB0aC8yKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRhY3RzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bCG6aG254K55oyJ54Wn5Zyo5rOV57q/5LiK5oqV5b2x55qE5aSn5bCP6aG65bqP5o6S5bqPXHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCBcclxuICAgICAqIEBwYXJhbSBub3JtYWwgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb3JkZXJQcm9qZWN0aW9uVmVydGV4SW5Ob3JtYWxEaXJlY3Rpb24odmVydGV4TGlzdDogVmVydGV4TGlzdCwgbm9ybWFsOiBWZWN0b3IpOiBWZWN0b3JbXSB7XHJcbiAgICAgICAgcmV0dXJuIHZlcnRleExpc3Quc2xpY2UoMCkuc29ydCgodmVydGV4QSwgdmVydGV4QikgPT4gdmVydGV4QS5kb3Qobm9ybWFsKSAtIHZlcnRleEIuZG90KG5vcm1hbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l55yL56Kw5pKe57yT5a2Y5piv5ZCm5Y+v5Lul5aSN55SoXHJcbiAgICAgKiBAcGFyYW0gZ2VvbWV0cnlBXHJcbiAgICAgKiBAcGFyYW0gZ2VvbWV0cnlCXHJcbiAgICAgKiBAcGFyYW0gcHJldkNvbGxpc2lvbiDkuIrkuIDmrKHnmoTnorDmkp5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYW5SZXVzZUNvbGxpc2lvbihnZW9tZXRyeUE6IEdlb21ldHJ5LCBnZW9tZXRyeUI6IEdlb21ldHJ5LCBwcmV2Q29sbGlzaW9uOiBDb2xsaXNpb24pOiBib29sZWFuIHtcclxuICAgICAgICAvLyDoi6XkuIrmrKHnorDmkp7nmoTnvJPlrZjlrZjlnKhcclxuICAgICAgICBpZihwcmV2Q29sbGlzaW9uKSB7XHJcbiAgICAgICAgICAgIGxldCBib2R5QSA9IGdlb21ldHJ5QS5ib2R5LFxyXG4gICAgICAgICAgICAgICAgYm9keUIgPSBnZW9tZXRyeUIuYm9keSxcclxuICAgICAgICAgICAgICAgIG1vdGlvbiA9IE1hdGguc3FydChib2R5QS5tb3Rpb24gKyBib2R5Qi5tb3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgLy8g6Iul5LiK5qyh56Kw5pKe5Yik5a6a5Li655yf77yM5LiU5b2T5YmN56Kw5pKe5a+55Yia5L2T6LaL5LqO6Z2Z5q2i77yM5Y+v5aSN55SoXHJcbiAgICAgICAgICAgIHJldHVybiBwcmV2Q29sbGlzaW9uLmNvbGxpZGUgJiYgbW90aW9uIDwgMC4xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDnorDmkp7nvJPlrZjkuI3lrZjlnKjvvIznm7TmjqXliKTlrprml6Dms5XlpI3nlKhcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Resolver = void 0;\r\nconst util_1 = __webpack_require__(0);\r\nconst collision_1 = __webpack_require__(19);\r\n/**\r\n * 碰撞求解器\r\n */\r\nclass Resolver {\r\n    constructor(engine, opt) {\r\n        this.engine = engine;\r\n        this.velocityIterations = 10;\r\n        this.constraintIterations = 6;\r\n        this.slop = 0.02;\r\n        this.biasFactor = 0.3;\r\n        this.collisionSolver = new collision_1.CollisionSolver(this);\r\n        util_1.Util.merge(this, opt);\r\n    }\r\n    /**\r\n     *\r\n     * @param manifolds\r\n     * @param dt\r\n     */\r\n    solveCollision(manifolds, dt) {\r\n        this.collisionSolver.preSolveVelocity(manifolds, dt);\r\n        for (let i = 0; i < this.velocityIterations; i++) {\r\n            this.collisionSolver.solveVelocity(manifolds, dt);\r\n        }\r\n    }\r\n    solveConstraint() {\r\n    }\r\n}\r\nexports.Resolver = Resolver;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb2x2ZXIvcmVzb2x2ZXIudHM/YWJhYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxzQ0FBc0M7QUFDdEMsNENBQThDO0FBSTlDOztHQUVHO0FBR0gsTUFBYSxRQUFRO0lBY2pCLFlBQVksTUFBYyxFQUFFLEdBQWM7UUFDdEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFFckIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsb0JBQW9CLEdBQUcsQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSwyQkFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWpELFdBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsY0FBYyxDQUFDLFNBQXFCLEVBQUUsRUFBVTtRQUM1QyxJQUFJLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNyRCxLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzdDLElBQUksQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQztTQUNyRDtJQUNMLENBQUM7SUFFRCxlQUFlO0lBRWYsQ0FBQztDQUVKO0FBMUNELDRCQTBDQyIsImZpbGUiOiIxOC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVuZ2luZU9wdCwgRW5naW5lIH0gZnJvbSBcIi4uL2NvcmUvZW5naW5lXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuaW1wb3J0IHsgQ29sbGlzaW9uU29sdmVyIH0gZnJvbSBcIi4vY29sbGlzaW9uXCI7XHJcbmltcG9ydCB7IE1hbmlmb2xkIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9tYW5pZm9sZFwiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDnorDmkp7msYLop6PlmahcclxuICovXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFJlc29sdmVyIHtcclxuICAgIC8vIOW8leaTjuWunuS+i1xyXG4gICAgZW5naW5lOiBFbmdpbmU7XHJcbiAgICAvLyDnorDmkp7msYLop6Plrp7kvotcclxuICAgIGNvbGxpc2lvblNvbHZlcjogQ29sbGlzaW9uU29sdmVyO1xyXG4gICAgLy8g56Kw5pKe5rGC6Kej6L+t5Luj5qyh5pWwXHJcbiAgICB2ZWxvY2l0eUl0ZXJhdGlvbnM6IG51bWJlcjtcclxuICAgIC8vIOe6puadn+axguino+i/reS7o+asoeaVsFxyXG4gICAgY29uc3RyYWludEl0ZXJhdGlvbnM6IG51bWJlcjtcclxuICAgIC8vIOepv+mAj+S/ruato+ivr+W3rlxyXG4gICAgc2xvcDogbnVtYmVyO1xyXG4gICAgLy8g5YGP56e75Zug5a2QXHJcbiAgICBiaWFzRmFjdG9yOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBFbmdpbmUsIG9wdDogRW5naW5lT3B0KSB7XHJcbiAgICAgICAgdGhpcy5lbmdpbmUgPSBlbmdpbmU7XHJcblxyXG4gICAgICAgIHRoaXMudmVsb2NpdHlJdGVyYXRpb25zID0gMTA7XHJcbiAgICAgICAgdGhpcy5jb25zdHJhaW50SXRlcmF0aW9ucyA9IDY7XHJcbiAgICAgICAgdGhpcy5zbG9wID0gMC4wMjtcclxuICAgICAgICB0aGlzLmJpYXNGYWN0b3IgPSAwLjM7XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Tb2x2ZXIgPSBuZXcgQ29sbGlzaW9uU29sdmVyKHRoaXMpO1xyXG5cclxuICAgICAgICBVdGlsLm1lcmdlKHRoaXMsIG9wdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtYW5pZm9sZHMgXHJcbiAgICAgKiBAcGFyYW0gZHQgXHJcbiAgICAgKi9cclxuICAgIHNvbHZlQ29sbGlzaW9uKG1hbmlmb2xkczogTWFuaWZvbGRbXSwgZHQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uU29sdmVyLnByZVNvbHZlVmVsb2NpdHkobWFuaWZvbGRzLCBkdCk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudmVsb2NpdHlJdGVyYXRpb25zOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25Tb2x2ZXIuc29sdmVWZWxvY2l0eShtYW5pZm9sZHMsIGR0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc29sdmVDb25zdHJhaW50KCkge1xyXG5cclxuICAgIH1cclxuXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///18\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.CollisionSolver = void 0;\r\nconst vector_1 = __webpack_require__(1);\r\nconst util_1 = __webpack_require__(0);\r\n/**\r\n * 碰撞求解器\r\n */\r\nclass CollisionSolver {\r\n    constructor(resolver) {\r\n        this.resolver = resolver;\r\n    }\r\n    /**\r\n     * 预处理\r\n     * @param manifolds 碰撞流形\r\n     * @param dt 步长\r\n     */\r\n    preSolveVelocity(manifolds, dt) {\r\n        let manifold, collision, contact, bodyA, bodyB, normal, tangent, contactNum, i, j;\r\n        for (i = 0; i < manifolds.length; ++i) {\r\n            manifold = manifolds[i];\r\n            if (!manifold.isActive)\r\n                continue;\r\n            collision = manifold.collision;\r\n            normal = collision.normal;\r\n            tangent = collision.tangent;\r\n            bodyA = collision.bodyA;\r\n            bodyB = collision.bodyB;\r\n            contactNum = manifold.contacts.length;\r\n            for (j = 0; j < collision.contacts.length; j++) {\r\n                contact = collision.contacts[j];\r\n                // 接触点到刚体A质心的距离\r\n                contact.offsetA = contact.vertex.sub(bodyA.position),\r\n                    // 接触点到刚体B质心的距离\r\n                    contact.offsetB = contact.vertex.sub(bodyB.position);\r\n                let invMassNormal = manifold.inverseMass, invMassTangent = manifold.inverseMass, r1 = contact.offsetA, r2 = contact.offsetB, rn1 = contact.offsetA.dot(normal), rn2 = contact.offsetB.dot(normal), rt1 = contact.offsetA.dot(tangent), rt2 = contact.offsetB.dot(tangent);\r\n                // 计算 J(M^-1)(J^T).\r\n                invMassNormal += bodyA.invInertia * (r1.dot(r1) - rn1 * rn1);\r\n                invMassNormal += bodyB.invInertia * (r2.dot(r2) - rn2 * rn2);\r\n                invMassTangent += bodyA.invInertia * (r1.dot(r1) - rt1 * rt1);\r\n                invMassTangent += bodyB.invInertia * (r2.dot(r2) - rt2 * rt2);\r\n                // 保存 J(M^-1)(J^T)得倒数\r\n                contact.shareNormal = 1 / (invMassNormal * contactNum);\r\n                contact.shareTangent = 1 / (invMassTangent * contactNum);\r\n                contact.bias = this.resolver.biasFactor * 1 / dt * Math.max(0, collision.depth + this.resolver.slop);\r\n                let normalImpulse = contact.normalImpulse, tangentImpulse = contact.tangentImpulse, impulse = vector_1._tempVector1;\r\n                if (normalImpulse !== 0 || tangentImpulse !== 0) {\r\n                    impulse.x = (normal.x * normalImpulse) + (tangent.x * tangentImpulse);\r\n                    impulse.y = (normal.y * normalImpulse) + (tangent.y * tangentImpulse);\r\n                    if (!bodyA.sleeping && !bodyA.fixed) {\r\n                        bodyA.applyImpulse(impulse, contact.offsetA);\r\n                    }\r\n                    if (!bodyB.sleeping && !bodyB.fixed) {\r\n                        bodyB.applyImpulse(impulse.inv(impulse), contact.offsetB);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 正式处理\r\n     * 使用sequential impulse进行快速收敛\r\n     * 参考：https://kevinyu.net/2018/01/17/understanding-constraint-solver-in-physics-engine/\r\n     * @param manifolds\r\n     * @private dt\r\n     */\r\n    solveVelocity(manifolds, dt) {\r\n        let manifold, collision, contact, bodyA, bodyB, normal, tangent, normalImpulse, tangentImpulse, maxFriction, relativeNormal, relativeTangent, impulse = vector_1._tempVector3, i, j;\r\n        for (i = 0; i < manifolds.length; i++) {\r\n            manifold = manifolds[i];\r\n            if (!manifold.isActive)\r\n                continue;\r\n            collision = manifold.collision;\r\n            normal = collision.normal;\r\n            tangent = collision.tangent;\r\n            bodyA = collision.bodyA;\r\n            bodyB = collision.bodyB;\r\n            for (j = 0; j < collision.contacts.length; j++) {\r\n                contact = collision.contacts[j];\r\n                let velocityPointA, // 刚体A质心相对碰撞点的速度\r\n                velocityPointB, // 刚体B质心相对碰撞点的速度\r\n                relativeVelocity; // 相对速度\r\n                vector_1._tempVector1.x = 0;\r\n                vector_1._tempVector1.y = 0;\r\n                vector_1._tempVector2.x = 0;\r\n                vector_1._tempVector2.y = 0;\r\n                contact.offsetA.croNum(bodyA.angularVelocity, vector_1._tempVector1);\r\n                contact.offsetB.croNum(bodyB.angularVelocity, vector_1._tempVector2);\r\n                velocityPointA = bodyA.velocity.add(vector_1._tempVector1, vector_1._tempVector1);\r\n                velocityPointB = bodyB.velocity.add(vector_1._tempVector2, vector_1._tempVector2);\r\n                relativeVelocity = velocityPointB.sub(velocityPointA, vector_1._tempVector1);\r\n                // 计算法向相对速度\r\n                relativeNormal = normal.dot(relativeVelocity);\r\n                // 计算法向冲量\r\n                normalImpulse = manifold.restitution * (relativeNormal + contact.bias) * contact.shareNormal;\r\n                // sequential impulse方法，收敛法向冲量\r\n                let oldNormalImpulse = contact.normalImpulse;\r\n                contact.normalImpulse = Math.max(contact.normalImpulse + normalImpulse, 0);\r\n                normalImpulse = contact.normalImpulse - oldNormalImpulse;\r\n                // 应用冲量\r\n                impulse.x = normal.x * normalImpulse;\r\n                impulse.y = normal.y * normalImpulse;\r\n                if (!bodyA.sleeping && !bodyA.fixed) {\r\n                    bodyA.applyImpulse(impulse, contact.offsetA);\r\n                }\r\n                if (!bodyB.sleeping && !bodyB.fixed) {\r\n                    bodyB.applyImpulse(impulse.inv(impulse), contact.offsetB);\r\n                }\r\n                // --------------------------------------------------------------------------------------------\r\n                contact.offsetA.croNum(bodyA.angularVelocity, vector_1._tempVector1);\r\n                contact.offsetB.croNum(bodyB.angularVelocity, vector_1._tempVector2);\r\n                velocityPointA = bodyA.velocity.add(vector_1._tempVector1, vector_1._tempVector1);\r\n                velocityPointB = bodyB.velocity.add(vector_1._tempVector2, vector_1._tempVector2);\r\n                relativeVelocity = velocityPointB.sub(velocityPointA, vector_1._tempVector1);\r\n                // 计算切向相对速度\r\n                relativeTangent = tangent.dot(relativeVelocity);\r\n                // 计算切向冲量\r\n                tangentImpulse = relativeTangent * contact.shareTangent;\r\n                // 计算最大摩擦力\r\n                maxFriction = manifold.friction * contact.normalImpulse;\r\n                // sequential impulse方法，收敛切向冲量\r\n                let oldTangentImpulse = contact.tangentImpulse;\r\n                contact.tangentImpulse = util_1.Util.clamp(contact.tangentImpulse + tangentImpulse, -maxFriction, maxFriction);\r\n                tangentImpulse = contact.tangentImpulse - oldTangentImpulse;\r\n                // 应用冲量\r\n                !bodyA.sleeping && bodyA.applyImpulse(tangent.scl(tangentImpulse, vector_1._tempVector1), contact.offsetA);\r\n                !bodyB.sleeping && bodyB.applyImpulse(tangent.scl(-tangentImpulse, vector_1._tempVector2), contact.offsetB);\r\n                impulse.x = tangent.x * tangentImpulse;\r\n                impulse.y = tangent.y * tangentImpulse;\r\n                if (!bodyA.sleeping && !bodyA.fixed) {\r\n                    bodyA.applyImpulse(impulse, contact.offsetA);\r\n                }\r\n                if (!bodyB.sleeping && !bodyB.fixed) {\r\n                    bodyB.applyImpulse(impulse.inv(impulse), contact.offsetB);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.CollisionSolver = CollisionSolver;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb2x2ZXIvY29sbGlzaW9uLnRzPzMxYTIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsd0NBQWtGO0FBQ2xGLHNDQUFzQztBQUt0Qzs7R0FFRztBQUVILE1BQWEsZUFBZTtJQUd4QixZQUFZLFFBQWtCO1FBQzFCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0lBQzdCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsZ0JBQWdCLENBQUMsU0FBcUIsRUFBRSxFQUFVO1FBQzlDLElBQUksUUFBa0IsRUFDbEIsU0FBb0IsRUFDcEIsT0FBZ0IsRUFDaEIsS0FBVyxFQUNYLEtBQVcsRUFDWCxNQUFjLEVBQ2QsT0FBZSxFQUNmLFVBQVUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRXJCLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtZQUNuQyxRQUFRLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXhCLElBQUcsQ0FBQyxRQUFRLENBQUMsUUFBUTtnQkFBRSxTQUFTO1lBRWhDLFNBQVMsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDO1lBQy9CLE1BQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDO1lBQzFCLE9BQU8sR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDO1lBQzVCLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDO1lBQ3hCLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDO1lBQ3hCLFVBQVUsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztZQUV0QyxLQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUMzQyxPQUFPLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFaEMsZUFBZTtnQkFDZixPQUFPLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7b0JBQ3BELGVBQWU7b0JBQ2YsT0FBTyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBRXJELElBQUksYUFBYSxHQUFHLFFBQVEsQ0FBQyxXQUFXLEVBQ3BDLGNBQWMsR0FBRyxRQUFRLENBQUMsV0FBVyxFQUNyQyxFQUFFLEdBQUcsT0FBTyxDQUFDLE9BQU8sRUFDcEIsRUFBRSxHQUFHLE9BQU8sQ0FBQyxPQUFPLEVBQ3BCLEdBQUcsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFDakMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUNqQyxHQUFHLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQ2xDLEdBQUcsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFFdkMsbUJBQW1CO2dCQUNuQixhQUFhLElBQUksS0FBSyxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUM3RCxhQUFhLElBQUksS0FBSyxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUM3RCxjQUFjLElBQUksS0FBSyxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUM5RCxjQUFjLElBQUksS0FBSyxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUU5RCxxQkFBcUI7Z0JBQ3JCLE9BQU8sQ0FBQyxXQUFXLEdBQUcsQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLFVBQVUsQ0FBQyxDQUFDO2dCQUN2RCxPQUFPLENBQUMsWUFBWSxHQUFHLENBQUMsR0FBRyxDQUFDLGNBQWMsR0FBRyxVQUFVLENBQUMsQ0FBQztnQkFFekQsT0FBTyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFFckcsSUFBSSxhQUFhLEdBQUcsT0FBTyxDQUFDLGFBQWEsRUFDckMsY0FBYyxHQUFHLE9BQU8sQ0FBQyxjQUFjLEVBQ3ZDLE9BQU8sR0FBRyxxQkFBWSxDQUFDO2dCQUUzQixJQUFJLGFBQWEsS0FBSyxDQUFDLElBQUksY0FBYyxLQUFLLENBQUMsRUFBRTtvQkFDN0MsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxDQUFDO29CQUN0RSxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsY0FBYyxDQUFDLENBQUM7b0JBRXRFLElBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRTt3QkFDaEMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO3FCQUNoRDtvQkFFRCxJQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUU7d0JBQ2hDLEtBQUssQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7cUJBQzdEO2lCQUNKO2FBQ0o7U0FDSjtJQUVMLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxhQUFhLENBQUMsU0FBcUIsRUFBRSxFQUFVO1FBQzNDLElBQUksUUFBa0IsRUFDbEIsU0FBb0IsRUFDcEIsT0FBZ0IsRUFDaEIsS0FBVyxFQUNYLEtBQVcsRUFDWCxNQUFjLEVBQ2QsT0FBZSxFQUNmLGFBQWEsRUFDYixjQUFjLEVBQ2QsV0FBVyxFQUNYLGNBQWMsRUFDZCxlQUFlLEVBQ2YsT0FBTyxHQUFHLHFCQUFZLEVBQ3RCLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFVCxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbkMsUUFBUSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV4QixJQUFHLENBQUMsUUFBUSxDQUFDLFFBQVE7Z0JBQUUsU0FBUztZQUVoQyxTQUFTLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQztZQUMvQixNQUFNLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQztZQUMxQixPQUFPLEdBQUcsU0FBUyxDQUFDLE9BQU8sQ0FBQztZQUM1QixLQUFLLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQztZQUN4QixLQUFLLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQztZQUV4QixLQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUMzQyxPQUFPLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFaEMsSUFBSSxjQUFjLEVBQUUsZ0JBQWdCO2dCQUNoQyxjQUFjLEVBQUUsZ0JBQWdCO2dCQUNoQyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU87Z0JBRTdCLHFCQUFZLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDbkIscUJBQVksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNuQixxQkFBWSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ25CLHFCQUFZLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFFbkIsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxxQkFBWSxDQUFDLENBQUM7Z0JBQzVELE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUscUJBQVksQ0FBQyxDQUFDO2dCQUM1RCxjQUFjLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMscUJBQVksRUFBRSxxQkFBWSxDQUFDLENBQUM7Z0JBQ2hFLGNBQWMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxxQkFBWSxFQUFFLHFCQUFZLENBQUMsQ0FBQztnQkFDaEUsZ0JBQWdCLEdBQUcsY0FBYyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUscUJBQVksQ0FBQyxDQUFDO2dCQUVwRSxXQUFXO2dCQUNYLGNBQWMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUM7Z0JBQzlDLFNBQVM7Z0JBQ1QsYUFBYSxHQUFHLFFBQVEsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxjQUFjLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7Z0JBRTdGLDhCQUE4QjtnQkFDOUIsSUFBSSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDO2dCQUM3QyxPQUFPLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLGFBQWEsR0FBRyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzNFLGFBQWEsR0FBRyxPQUFPLENBQUMsYUFBYSxHQUFHLGdCQUFnQixDQUFDO2dCQUV6RCxPQUFPO2dCQUNQLE9BQU8sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUM7Z0JBQ3JDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUM7Z0JBRXJDLElBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRTtvQkFDaEMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO2lCQUNoRDtnQkFFRCxJQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUU7b0JBQ2hDLEtBQUssQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7aUJBQzdEO2dCQUVELCtGQUErRjtnQkFFL0YsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxxQkFBWSxDQUFDLENBQUM7Z0JBQzVELE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUscUJBQVksQ0FBQyxDQUFDO2dCQUM1RCxjQUFjLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMscUJBQVksRUFBRSxxQkFBWSxDQUFDLENBQUM7Z0JBQ2hFLGNBQWMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxxQkFBWSxFQUFFLHFCQUFZLENBQUMsQ0FBQztnQkFDaEUsZ0JBQWdCLEdBQUcsY0FBYyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUscUJBQVksQ0FBQyxDQUFDO2dCQUVwRSxXQUFXO2dCQUNYLGVBQWUsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUM7Z0JBQ2hELFNBQVM7Z0JBQ1QsY0FBYyxHQUFHLGVBQWUsR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDO2dCQUN4RCxVQUFVO2dCQUNWLFdBQVcsR0FBRyxRQUFRLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUM7Z0JBRXhELDhCQUE4QjtnQkFDOUIsSUFBSSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDO2dCQUMvQyxPQUFPLENBQUMsY0FBYyxHQUFHLFdBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxjQUFjLEVBQUUsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUM7Z0JBQ3hHLGNBQWMsR0FBRyxPQUFPLENBQUMsY0FBYyxHQUFHLGlCQUFpQixDQUFDO2dCQUU1RCxPQUFPO2dCQUNQLENBQUMsS0FBSyxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLHFCQUFZLENBQUMsRUFBRSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ2xHLENBQUMsS0FBSyxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxjQUFjLEVBQUUscUJBQVksQ0FBQyxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFFbkcsT0FBTyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxHQUFHLGNBQWMsQ0FBQztnQkFDdkMsT0FBTyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxHQUFHLGNBQWMsQ0FBQztnQkFFdkMsSUFBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFO29CQUNoQyxLQUFLLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7aUJBQ2hEO2dCQUVELElBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRTtvQkFDaEMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztpQkFDN0Q7YUFDSjtTQUNKO0lBQ0wsQ0FBQztDQUVKO0FBcE1ELDBDQW9NQyIsImZpbGUiOiIxOS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc29sdmVyIH0gZnJvbSBcIi4vcmVzb2x2ZXJcIjtcclxuaW1wb3J0IHsgQm9keSB9IGZyb20gXCIuLi9ib2R5L2JvZHlcIjtcclxuaW1wb3J0IHsgVmVjdG9yLCBfdGVtcFZlY3RvcjIsIF90ZW1wVmVjdG9yMSwgX3RlbXBWZWN0b3IzIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuaW1wb3J0IHsgTWFuaWZvbGQsIENvbGxpc2lvbiwgQ29udGFjdCB9IGZyb20gXCIuLi9jb2xsaXNpb24vbWFuaWZvbGRcIjtcclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIOeisOaSnuaxguino+WZqFxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBDb2xsaXNpb25Tb2x2ZXIge1xyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogUmVzb2x2ZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IocmVzb2x2ZXI6IFJlc29sdmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6aKE5aSE55CGXHJcbiAgICAgKiBAcGFyYW0gbWFuaWZvbGRzIOeisOaSnua1geW9olxyXG4gICAgICogQHBhcmFtIGR0IOatpemVv1xyXG4gICAgICovXHJcbiAgICBwcmVTb2x2ZVZlbG9jaXR5KG1hbmlmb2xkczogTWFuaWZvbGRbXSwgZHQ6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBtYW5pZm9sZDogTWFuaWZvbGQsXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbjogQ29sbGlzaW9uLFxyXG4gICAgICAgICAgICBjb250YWN0OiBDb250YWN0LFxyXG4gICAgICAgICAgICBib2R5QTogQm9keSxcclxuICAgICAgICAgICAgYm9keUI6IEJvZHksXHJcbiAgICAgICAgICAgIG5vcm1hbDogVmVjdG9yLFxyXG4gICAgICAgICAgICB0YW5nZW50OiBWZWN0b3IsXHJcbiAgICAgICAgICAgIGNvbnRhY3ROdW0sIGksIGo7XHJcblxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBtYW5pZm9sZHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgbWFuaWZvbGQgPSBtYW5pZm9sZHNbaV07XHJcblxyXG4gICAgICAgICAgICBpZighbWFuaWZvbGQuaXNBY3RpdmUpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgY29sbGlzaW9uID0gbWFuaWZvbGQuY29sbGlzaW9uO1xyXG4gICAgICAgICAgICBub3JtYWwgPSBjb2xsaXNpb24ubm9ybWFsO1xyXG4gICAgICAgICAgICB0YW5nZW50ID0gY29sbGlzaW9uLnRhbmdlbnQ7XHJcbiAgICAgICAgICAgIGJvZHlBID0gY29sbGlzaW9uLmJvZHlBO1xyXG4gICAgICAgICAgICBib2R5QiA9IGNvbGxpc2lvbi5ib2R5QjtcclxuICAgICAgICAgICAgY29udGFjdE51bSA9IG1hbmlmb2xkLmNvbnRhY3RzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGZvcihqID0gMDsgaiA8IGNvbGxpc2lvbi5jb250YWN0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29udGFjdCA9IGNvbGxpc2lvbi5jb250YWN0c1tqXTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDmjqXop6bngrnliLDliJrkvZNB6LSo5b+D55qE6Led56a7XHJcbiAgICAgICAgICAgICAgICBjb250YWN0Lm9mZnNldEEgPSBjb250YWN0LnZlcnRleC5zdWIoYm9keUEucG9zaXRpb24pLFxyXG4gICAgICAgICAgICAgICAgLy8g5o6l6Kem54K55Yiw5Yia5L2TQui0qOW/g+eahOi3neemu1xyXG4gICAgICAgICAgICAgICAgY29udGFjdC5vZmZzZXRCID0gY29udGFjdC52ZXJ0ZXguc3ViKGJvZHlCLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IGludk1hc3NOb3JtYWwgPSBtYW5pZm9sZC5pbnZlcnNlTWFzcyxcclxuICAgICAgICAgICAgICAgICAgICBpbnZNYXNzVGFuZ2VudCA9IG1hbmlmb2xkLmludmVyc2VNYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIHIxID0gY29udGFjdC5vZmZzZXRBLFxyXG4gICAgICAgICAgICAgICAgICAgIHIyID0gY29udGFjdC5vZmZzZXRCLFxyXG4gICAgICAgICAgICAgICAgICAgIHJuMSA9IGNvbnRhY3Qub2Zmc2V0QS5kb3Qobm9ybWFsKSxcclxuICAgICAgICAgICAgICAgICAgICBybjIgPSBjb250YWN0Lm9mZnNldEIuZG90KG5vcm1hbCksXHJcbiAgICAgICAgICAgICAgICAgICAgcnQxID0gY29udGFjdC5vZmZzZXRBLmRvdCh0YW5nZW50KSxcclxuICAgICAgICAgICAgICAgICAgICBydDIgPSBjb250YWN0Lm9mZnNldEIuZG90KHRhbmdlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIOiuoeeulyBKKE1eLTEpKEpeVCkuXHJcbiAgICAgICAgICAgICAgICBpbnZNYXNzTm9ybWFsICs9IGJvZHlBLmludkluZXJ0aWEgKiAocjEuZG90KHIxKSAtIHJuMSAqIHJuMSk7XHJcbiAgICAgICAgICAgICAgICBpbnZNYXNzTm9ybWFsICs9IGJvZHlCLmludkluZXJ0aWEgKiAocjIuZG90KHIyKSAtIHJuMiAqIHJuMik7XHJcbiAgICAgICAgICAgICAgICBpbnZNYXNzVGFuZ2VudCArPSBib2R5QS5pbnZJbmVydGlhICogKHIxLmRvdChyMSkgLSBydDEgKiBydDEpO1xyXG4gICAgICAgICAgICAgICAgaW52TWFzc1RhbmdlbnQgKz0gYm9keUIuaW52SW5lcnRpYSAqIChyMi5kb3QocjIpIC0gcnQyICogcnQyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDkv53lrZggSihNXi0xKShKXlQp5b6X5YCS5pWwXHJcbiAgICAgICAgICAgICAgICBjb250YWN0LnNoYXJlTm9ybWFsID0gMSAvIChpbnZNYXNzTm9ybWFsICogY29udGFjdE51bSk7XHJcbiAgICAgICAgICAgICAgICBjb250YWN0LnNoYXJlVGFuZ2VudCA9IDEgLyAoaW52TWFzc1RhbmdlbnQgKiBjb250YWN0TnVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb250YWN0LmJpYXMgPSB0aGlzLnJlc29sdmVyLmJpYXNGYWN0b3IgKiAxIC8gZHQgKiBNYXRoLm1heCgwLCBjb2xsaXNpb24uZGVwdGggKyB0aGlzLnJlc29sdmVyLnNsb3ApO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBub3JtYWxJbXB1bHNlID0gY29udGFjdC5ub3JtYWxJbXB1bHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhbmdlbnRJbXB1bHNlID0gY29udGFjdC50YW5nZW50SW1wdWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpbXB1bHNlID0gX3RlbXBWZWN0b3IxO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG5vcm1hbEltcHVsc2UgIT09IDAgfHwgdGFuZ2VudEltcHVsc2UgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpbXB1bHNlLnggPSAobm9ybWFsLnggKiBub3JtYWxJbXB1bHNlKSArICh0YW5nZW50LnggKiB0YW5nZW50SW1wdWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1wdWxzZS55ID0gKG5vcm1hbC55ICogbm9ybWFsSW1wdWxzZSkgKyAodGFuZ2VudC55ICogdGFuZ2VudEltcHVsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFib2R5QS5zbGVlcGluZyAmJiAhYm9keUEuZml4ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keUEuYXBwbHlJbXB1bHNlKGltcHVsc2UsIGNvbnRhY3Qub2Zmc2V0QSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZighYm9keUIuc2xlZXBpbmcgJiYgIWJvZHlCLmZpeGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlCLmFwcGx5SW1wdWxzZShpbXB1bHNlLmludihpbXB1bHNlKSwgY29udGFjdC5vZmZzZXRCKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiDmraPlvI/lpITnkIZcclxuICAgICAqIOS9v+eUqHNlcXVlbnRpYWwgaW1wdWxzZei/m+ihjOW/q+mAn+aUtuaVm1xyXG4gICAgICog5Y+C6ICD77yaaHR0cHM6Ly9rZXZpbnl1Lm5ldC8yMDE4LzAxLzE3L3VuZGVyc3RhbmRpbmctY29uc3RyYWludC1zb2x2ZXItaW4tcGh5c2ljcy1lbmdpbmUvXHJcbiAgICAgKiBAcGFyYW0gbWFuaWZvbGRzXHJcbiAgICAgKiBAcHJpdmF0ZSBkdFxyXG4gICAgICovXHJcbiAgICBzb2x2ZVZlbG9jaXR5KG1hbmlmb2xkczogTWFuaWZvbGRbXSwgZHQ6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBtYW5pZm9sZDogTWFuaWZvbGQsXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbjogQ29sbGlzaW9uLFxyXG4gICAgICAgICAgICBjb250YWN0OiBDb250YWN0LFxyXG4gICAgICAgICAgICBib2R5QTogQm9keSxcclxuICAgICAgICAgICAgYm9keUI6IEJvZHksXHJcbiAgICAgICAgICAgIG5vcm1hbDogVmVjdG9yLFxyXG4gICAgICAgICAgICB0YW5nZW50OiBWZWN0b3IsXHJcbiAgICAgICAgICAgIG5vcm1hbEltcHVsc2UsXHJcbiAgICAgICAgICAgIHRhbmdlbnRJbXB1bHNlLFxyXG4gICAgICAgICAgICBtYXhGcmljdGlvbixcclxuICAgICAgICAgICAgcmVsYXRpdmVOb3JtYWwsXHJcbiAgICAgICAgICAgIHJlbGF0aXZlVGFuZ2VudCxcclxuICAgICAgICAgICAgaW1wdWxzZSA9IF90ZW1wVmVjdG9yMyxcclxuICAgICAgICAgICAgaSwgajtcclxuXHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG1hbmlmb2xkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBtYW5pZm9sZCA9IG1hbmlmb2xkc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmKCFtYW5pZm9sZC5pc0FjdGl2ZSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBjb2xsaXNpb24gPSBtYW5pZm9sZC5jb2xsaXNpb247XHJcbiAgICAgICAgICAgIG5vcm1hbCA9IGNvbGxpc2lvbi5ub3JtYWw7XHJcbiAgICAgICAgICAgIHRhbmdlbnQgPSBjb2xsaXNpb24udGFuZ2VudDtcclxuICAgICAgICAgICAgYm9keUEgPSBjb2xsaXNpb24uYm9keUE7XHJcbiAgICAgICAgICAgIGJvZHlCID0gY29sbGlzaW9uLmJvZHlCO1xyXG5cclxuICAgICAgICAgICAgZm9yKGogPSAwOyBqIDwgY29sbGlzaW9uLmNvbnRhY3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWN0ID0gY29sbGlzaW9uLmNvbnRhY3RzW2pdO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB2ZWxvY2l0eVBvaW50QSwgLy8g5Yia5L2TQei0qOW/g+ebuOWvueeisOaSnueCueeahOmAn+W6plxyXG4gICAgICAgICAgICAgICAgICAgIHZlbG9jaXR5UG9pbnRCLCAvLyDliJrkvZNC6LSo5b+D55u45a+556Kw5pKe54K555qE6YCf5bqmXHJcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVWZWxvY2l0eTsgLy8g55u45a+56YCf5bqmXHJcblxyXG4gICAgICAgICAgICAgICAgX3RlbXBWZWN0b3IxLnggPSAwO1xyXG4gICAgICAgICAgICAgICAgX3RlbXBWZWN0b3IxLnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgX3RlbXBWZWN0b3IyLnggPSAwO1xyXG4gICAgICAgICAgICAgICAgX3RlbXBWZWN0b3IyLnkgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRhY3Qub2Zmc2V0QS5jcm9OdW0oYm9keUEuYW5ndWxhclZlbG9jaXR5LCBfdGVtcFZlY3RvcjEpO1xyXG4gICAgICAgICAgICAgICAgY29udGFjdC5vZmZzZXRCLmNyb051bShib2R5Qi5hbmd1bGFyVmVsb2NpdHksIF90ZW1wVmVjdG9yMik7XHJcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eVBvaW50QSA9IGJvZHlBLnZlbG9jaXR5LmFkZChfdGVtcFZlY3RvcjEsIF90ZW1wVmVjdG9yMSk7XHJcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eVBvaW50QiA9IGJvZHlCLnZlbG9jaXR5LmFkZChfdGVtcFZlY3RvcjIsIF90ZW1wVmVjdG9yMik7XHJcbiAgICAgICAgICAgICAgICByZWxhdGl2ZVZlbG9jaXR5ID0gdmVsb2NpdHlQb2ludEIuc3ViKHZlbG9jaXR5UG9pbnRBLCBfdGVtcFZlY3RvcjEpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIOiuoeeul+azleWQkeebuOWvuemAn+W6plxyXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVOb3JtYWwgPSBub3JtYWwuZG90KHJlbGF0aXZlVmVsb2NpdHkpO1xyXG4gICAgICAgICAgICAgICAgLy8g6K6h566X5rOV5ZCR5Yay6YePXHJcbiAgICAgICAgICAgICAgICBub3JtYWxJbXB1bHNlID0gbWFuaWZvbGQucmVzdGl0dXRpb24gKiAocmVsYXRpdmVOb3JtYWwgKyBjb250YWN0LmJpYXMpICogY29udGFjdC5zaGFyZU5vcm1hbDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzZXF1ZW50aWFsIGltcHVsc2Xmlrnms5XvvIzmlLbmlZvms5XlkJHlhrLph49cclxuICAgICAgICAgICAgICAgIGxldCBvbGROb3JtYWxJbXB1bHNlID0gY29udGFjdC5ub3JtYWxJbXB1bHNlO1xyXG4gICAgICAgICAgICAgICAgY29udGFjdC5ub3JtYWxJbXB1bHNlID0gTWF0aC5tYXgoY29udGFjdC5ub3JtYWxJbXB1bHNlICsgbm9ybWFsSW1wdWxzZSwgMCk7XHJcbiAgICAgICAgICAgICAgICBub3JtYWxJbXB1bHNlID0gY29udGFjdC5ub3JtYWxJbXB1bHNlIC0gb2xkTm9ybWFsSW1wdWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDlupTnlKjlhrLph49cclxuICAgICAgICAgICAgICAgIGltcHVsc2UueCA9IG5vcm1hbC54ICogbm9ybWFsSW1wdWxzZTtcclxuICAgICAgICAgICAgICAgIGltcHVsc2UueSA9IG5vcm1hbC55ICogbm9ybWFsSW1wdWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZighYm9keUEuc2xlZXBpbmcgJiYgIWJvZHlBLmZpeGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keUEuYXBwbHlJbXB1bHNlKGltcHVsc2UsIGNvbnRhY3Qub2Zmc2V0QSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIWJvZHlCLnNsZWVwaW5nICYmICFib2R5Qi5maXhlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHlCLmFwcGx5SW1wdWxzZShpbXB1bHNlLmludihpbXB1bHNlKSwgY29udGFjdC5vZmZzZXRCKTsgXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAgICAgICAgICAgICBjb250YWN0Lm9mZnNldEEuY3JvTnVtKGJvZHlBLmFuZ3VsYXJWZWxvY2l0eSwgX3RlbXBWZWN0b3IxKTtcclxuICAgICAgICAgICAgICAgIGNvbnRhY3Qub2Zmc2V0Qi5jcm9OdW0oYm9keUIuYW5ndWxhclZlbG9jaXR5LCBfdGVtcFZlY3RvcjIpO1xyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlQb2ludEEgPSBib2R5QS52ZWxvY2l0eS5hZGQoX3RlbXBWZWN0b3IxLCBfdGVtcFZlY3RvcjEpO1xyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlQb2ludEIgPSBib2R5Qi52ZWxvY2l0eS5hZGQoX3RlbXBWZWN0b3IyLCBfdGVtcFZlY3RvcjIpO1xyXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVWZWxvY2l0eSA9IHZlbG9jaXR5UG9pbnRCLnN1Yih2ZWxvY2l0eVBvaW50QSwgX3RlbXBWZWN0b3IxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDorqHnrpfliIflkJHnm7jlr7npgJ/luqZcclxuICAgICAgICAgICAgICAgIHJlbGF0aXZlVGFuZ2VudCA9IHRhbmdlbnQuZG90KHJlbGF0aXZlVmVsb2NpdHkpO1xyXG4gICAgICAgICAgICAgICAgLy8g6K6h566X5YiH5ZCR5Yay6YePXHJcbiAgICAgICAgICAgICAgICB0YW5nZW50SW1wdWxzZSA9IHJlbGF0aXZlVGFuZ2VudCAqIGNvbnRhY3Quc2hhcmVUYW5nZW50O1xyXG4gICAgICAgICAgICAgICAgLy8g6K6h566X5pyA5aSn5pGp5pOm5YqbXHJcbiAgICAgICAgICAgICAgICBtYXhGcmljdGlvbiA9IG1hbmlmb2xkLmZyaWN0aW9uICogY29udGFjdC5ub3JtYWxJbXB1bHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNlcXVlbnRpYWwgaW1wdWxzZeaWueazle+8jOaUtuaVm+WIh+WQkeWGsumHj1xyXG4gICAgICAgICAgICAgICAgbGV0IG9sZFRhbmdlbnRJbXB1bHNlID0gY29udGFjdC50YW5nZW50SW1wdWxzZTtcclxuICAgICAgICAgICAgICAgIGNvbnRhY3QudGFuZ2VudEltcHVsc2UgPSBVdGlsLmNsYW1wKGNvbnRhY3QudGFuZ2VudEltcHVsc2UgKyB0YW5nZW50SW1wdWxzZSwgLW1heEZyaWN0aW9uLCBtYXhGcmljdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0YW5nZW50SW1wdWxzZSA9IGNvbnRhY3QudGFuZ2VudEltcHVsc2UgLSBvbGRUYW5nZW50SW1wdWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDlupTnlKjlhrLph49cclxuICAgICAgICAgICAgICAgICFib2R5QS5zbGVlcGluZyAmJiBib2R5QS5hcHBseUltcHVsc2UodGFuZ2VudC5zY2wodGFuZ2VudEltcHVsc2UsIF90ZW1wVmVjdG9yMSksIGNvbnRhY3Qub2Zmc2V0QSk7XHJcbiAgICAgICAgICAgICAgICAhYm9keUIuc2xlZXBpbmcgJiYgYm9keUIuYXBwbHlJbXB1bHNlKHRhbmdlbnQuc2NsKC10YW5nZW50SW1wdWxzZSwgX3RlbXBWZWN0b3IyKSwgY29udGFjdC5vZmZzZXRCKTsgXHJcblxyXG4gICAgICAgICAgICAgICAgaW1wdWxzZS54ID0gdGFuZ2VudC54ICogdGFuZ2VudEltcHVsc2U7XHJcbiAgICAgICAgICAgICAgICBpbXB1bHNlLnkgPSB0YW5nZW50LnkgKiB0YW5nZW50SW1wdWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZighYm9keUEuc2xlZXBpbmcgJiYgIWJvZHlBLmZpeGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keUEuYXBwbHlJbXB1bHNlKGltcHVsc2UsIGNvbnRhY3Qub2Zmc2V0QSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIWJvZHlCLnNsZWVwaW5nICYmICFib2R5Qi5maXhlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHlCLmFwcGx5SW1wdWxzZShpbXB1bHNlLmludihpbXB1bHNlKSwgY29udGFjdC5vZmZzZXRCKTsgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///19\n')},function(module,exports,__webpack_require__){"use strict";eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Sleeping = void 0;\r\nconst util_1 = __webpack_require__(0);\r\nconst eventEmitter_1 = __webpack_require__(3);\r\n/**\r\n * 休眠管理器\r\n */\r\nclass Sleeping {\r\n    constructor(opt) {\r\n        this.sleepThreshold = 60;\r\n        this.sleepMotionThreshold = 0.01;\r\n        this.wakeMotionThreshold = 0.8;\r\n        util_1.Util.merge(this, opt);\r\n    }\r\n    /**\r\n     * 使刚体睡眠\r\n     * @param body\r\n     */\r\n    sleep(body) {\r\n        body.sleeping = true;\r\n        body.sleepCounter = this.sleepThreshold;\r\n        body.velocity.x = 0;\r\n        body.velocity.y = 0;\r\n        body.angularVelocity = 0;\r\n        body.motion = 0;\r\n        eventEmitter_1.Event.emit(body, 'sleepStart', body);\r\n    }\r\n    /**\r\n     * 唤醒刚体\r\n     * @param body\r\n     */\r\n    wake(body) {\r\n        body.sleeping = false;\r\n        body.sleepCounter = 0;\r\n        eventEmitter_1.Event.emit(body, 'sleepEnd', body);\r\n    }\r\n    /**\r\n     * 改变刚体的状态，使其唤醒或休眠\r\n     * @param bodies\r\n     */\r\n    update(bodies) {\r\n        let body, i;\r\n        for (i = 0; i < bodies.length; i++) {\r\n            body = bodies[i];\r\n            if (body.fixed)\r\n                continue;\r\n            let motion = body.motion;\r\n            // 若刚体合外力不为0，则唤醒\r\n            // if (body.force.x !== 0 || body.force.y !== 0) {\r\n            //     this.wake(body);\r\n            //     continue;\r\n            // }\r\n            // 若刚体已经休眠，则返回\r\n            if (body.sleeping)\r\n                continue;\r\n            // 若刚体动量 < 休眠阈值，则刚体休眠计算 + 1\r\n            if (motion < this.sleepMotionThreshold) {\r\n                body.sleepCounter += 1;\r\n                // 若刚体休眠计数器达到休眠阈值，则进行休眠\r\n                if (body.sleepCounter >= this.sleepThreshold) {\r\n                    this.sleep(body);\r\n                }\r\n            }\r\n            else {\r\n                if (body.sleepCounter > 0) {\r\n                    body.sleepCounter -= 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 刚体碰撞后，判断是否需要唤醒\r\n     * @param manifolds\r\n     */\r\n    afterCollision(manifolds) {\r\n        let manifold, bodyA, bodyB;\r\n        // wake up bodies involved in collisions\r\n        for (var i = 0; i < manifolds.length; i++) {\r\n            manifold = manifolds[i];\r\n            bodyA = manifold.bodyA;\r\n            bodyB = manifold.bodyB;\r\n            // 若A为休眠状态且B的动量大于休眠阈值，唤醒A\r\n            if (!bodyA.fixed && bodyA.sleeping && bodyB.motion > this.wakeMotionThreshold) {\r\n                this.wake(bodyA);\r\n                continue;\r\n            }\r\n            // B同理上面\r\n            if (!bodyB.fixed && bodyB.sleeping && bodyA.motion > this.wakeMotionThreshold) {\r\n                this.wake(bodyB);\r\n                continue;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.Sleeping = Sleeping;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9zbGVlcGluZy50cz9kNWNkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVBLHNDQUFzQztBQUN0Qyw4Q0FBOEM7QUFJOUM7O0dBRUc7QUFFSCxNQUFhLFFBQVE7SUFXakIsWUFBWSxHQUFjO1FBQ3RCLElBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUM7UUFDakMsSUFBSSxDQUFDLG1CQUFtQixHQUFHLEdBQUcsQ0FBQztRQUUvQixXQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsS0FBSyxDQUFDLElBQVU7UUFDWixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7UUFFeEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3BCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsZUFBZSxHQUFHLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUVoQixvQkFBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsWUFBWSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFRDs7O09BR0c7SUFDSCxJQUFJLENBQUMsSUFBVTtRQUNYLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLG9CQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVEOzs7T0FHRztJQUNILE1BQU0sQ0FBQyxNQUFjO1FBQ2pCLElBQUksSUFBVSxFQUNWLENBQUMsQ0FBQztRQUVOLEtBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUMvQixJQUFJLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRWpCLElBQUcsSUFBSSxDQUFDLEtBQUs7Z0JBQUUsU0FBUztZQUV4QixJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBRXpCLGdCQUFnQjtZQUNoQixrREFBa0Q7WUFDbEQsdUJBQXVCO1lBQ3ZCLGdCQUFnQjtZQUNoQixJQUFJO1lBRUosY0FBYztZQUNkLElBQUcsSUFBSSxDQUFDLFFBQVE7Z0JBQUUsU0FBUztZQUUzQiwyQkFBMkI7WUFDM0IsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixFQUFFO2dCQUNwQyxJQUFJLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQztnQkFFdkIsdUJBQXVCO2dCQUN2QixJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtvQkFDMUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDcEI7YUFDSjtpQkFDSTtnQkFDRCxJQUFJLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxFQUFFO29CQUN2QixJQUFJLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQztpQkFDMUI7YUFDSjtTQUNKO0lBQ0wsQ0FBQztJQUVEOzs7T0FHRztJQUNILGNBQWMsQ0FBQyxTQUFxQjtRQUNoQyxJQUFJLFFBQWtCLEVBQ2xCLEtBQVcsRUFBRSxLQUFXLENBQUM7UUFFN0Isd0NBQXdDO1FBQ3hDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3ZDLFFBQVEsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEIsS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUM7WUFDdkIsS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUM7WUFFdkIseUJBQXlCO1lBQ3pCLElBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsbUJBQW1CLEVBQUU7Z0JBQzFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ2pCLFNBQVM7YUFDWjtZQUVELFFBQVE7WUFDUixJQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxLQUFLLENBQUMsUUFBUSxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixFQUFFO2dCQUMxRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqQixTQUFTO2FBQ1o7U0FDSjtJQUNMLENBQUM7Q0FDSjtBQWpIRCw0QkFpSEMiLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb2R5IH0gZnJvbSBcIi4uL2JvZHkvYm9keVwiO1xyXG5pbXBvcnQgeyBFbmdpbmVPcHQgfSBmcm9tIFwiLi9lbmdpbmVcIjtcclxuaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi9jb21tb24vdXRpbFwiO1xyXG5pbXBvcnQgeyBFdmVudCB9IGZyb20gXCIuLi9ldmVudC9ldmVudEVtaXR0ZXJcIjtcclxuaW1wb3J0IHsgTWFuaWZvbGQgfSBmcm9tIFwiLi4vY29sbGlzaW9uL21hbmlmb2xkXCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIOS8keecoOeuoeeQhuWZqFxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBTbGVlcGluZyB7XHJcblxyXG4gICAgLy8g5Yik5a6a5LyR55yg5bin5qCR6ZiI5YC8XHJcbiAgICBzbGVlcFRocmVzaG9sZDogbnVtYmVyO1xyXG4gICAgLy8g5Yik5a6a5LyR55yg5Yqo6YeP6ZiI5YC8XHJcbiAgICBzbGVlcE1vdGlvblRocmVzaG9sZDogbnVtYmVyO1xyXG4gICAgLy8g5Yik5a6a5ZSk6YaS5Yqo6YeP6ZiI5YC8XHJcbiAgICB3YWtlTW90aW9uVGhyZXNob2xkOiBudW1iZXI7XHJcbiAgICAvLyDlgY/lt67ns7vmlbBcclxuICAgIG1pbkJpYXM6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHQ6IEVuZ2luZU9wdCkge1xyXG4gICAgICAgIHRoaXMuc2xlZXBUaHJlc2hvbGQgPSA2MDtcclxuICAgICAgICB0aGlzLnNsZWVwTW90aW9uVGhyZXNob2xkID0gMC4wMTtcclxuICAgICAgICB0aGlzLndha2VNb3Rpb25UaHJlc2hvbGQgPSAwLjg7XHJcblxyXG4gICAgICAgIFV0aWwubWVyZ2UodGhpcywgb3B0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS9v+WImuS9k+edoeecoFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKi9cclxuICAgIHNsZWVwKGJvZHk6IEJvZHkpIHtcclxuICAgICAgICBib2R5LnNsZWVwaW5nID0gdHJ1ZTtcclxuICAgICAgICBib2R5LnNsZWVwQ291bnRlciA9IHRoaXMuc2xlZXBUaHJlc2hvbGQ7XHJcblxyXG4gICAgICAgIGJvZHkudmVsb2NpdHkueCA9IDA7XHJcbiAgICAgICAgYm9keS52ZWxvY2l0eS55ID0gMDtcclxuICAgICAgICBib2R5LmFuZ3VsYXJWZWxvY2l0eSA9IDA7XHJcbiAgICAgICAgYm9keS5tb3Rpb24gPSAwO1xyXG5cclxuICAgICAgICBFdmVudC5lbWl0KGJvZHksICdzbGVlcFN0YXJ0JywgYm9keSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDllKTphpLliJrkvZNcclxuICAgICAqIEBwYXJhbSBib2R5IFxyXG4gICAgICovXHJcbiAgICB3YWtlKGJvZHk6IEJvZHkpIHtcclxuICAgICAgICBib2R5LnNsZWVwaW5nID0gZmFsc2U7XHJcbiAgICAgICAgYm9keS5zbGVlcENvdW50ZXIgPSAwO1xyXG4gICAgICAgIEV2ZW50LmVtaXQoYm9keSwgJ3NsZWVwRW5kJywgYm9keSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmlLnlj5jliJrkvZPnmoTnirbmgIHvvIzkvb/lhbbllKTphpLmiJbkvJHnnKBcclxuICAgICAqIEBwYXJhbSBib2RpZXNcclxuICAgICAqL1xyXG4gICAgdXBkYXRlKGJvZGllczogQm9keVtdKSB7XHJcbiAgICAgICAgbGV0IGJvZHk6IEJvZHksXHJcbiAgICAgICAgICAgIGk7XHJcblxyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBib2R5ID0gYm9kaWVzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYoYm9keS5maXhlZCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBsZXQgbW90aW9uID0gYm9keS5tb3Rpb247XHJcblxyXG4gICAgICAgICAgICAvLyDoi6XliJrkvZPlkIjlpJblipvkuI3kuLow77yM5YiZ5ZSk6YaSXHJcbiAgICAgICAgICAgIC8vIGlmIChib2R5LmZvcmNlLnggIT09IDAgfHwgYm9keS5mb3JjZS55ICE9PSAwKSB7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLndha2UoYm9keSk7XHJcbiAgICAgICAgICAgIC8vICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgLy8g6Iul5Yia5L2T5bey57uP5LyR55yg77yM5YiZ6L+U5ZueXHJcbiAgICAgICAgICAgIGlmKGJvZHkuc2xlZXBpbmcpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgLy8g6Iul5Yia5L2T5Yqo6YePIDwg5LyR55yg6ZiI5YC877yM5YiZ5Yia5L2T5LyR55yg6K6h566XICsgMVxyXG4gICAgICAgICAgICBpZiAobW90aW9uIDwgdGhpcy5zbGVlcE1vdGlvblRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgYm9keS5zbGVlcENvdW50ZXIgKz0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDoi6XliJrkvZPkvJHnnKDorqHmlbDlmajovr7liLDkvJHnnKDpmIjlgLzvvIzliJnov5vooYzkvJHnnKBcclxuICAgICAgICAgICAgICAgIGlmIChib2R5LnNsZWVwQ291bnRlciA+PSB0aGlzLnNsZWVwVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGVlcChib2R5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zbGVlcENvdW50ZXIgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keS5zbGVlcENvdW50ZXIgLT0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWImuS9k+eisOaSnuWQju+8jOWIpOaWreaYr+WQpumcgOimgeWUpOmGklxyXG4gICAgICogQHBhcmFtIG1hbmlmb2xkc1xyXG4gICAgICovXHJcbiAgICBhZnRlckNvbGxpc2lvbihtYW5pZm9sZHM6IE1hbmlmb2xkW10pIHtcclxuICAgICAgICBsZXQgbWFuaWZvbGQ6IE1hbmlmb2xkLFxyXG4gICAgICAgICAgICBib2R5QTogQm9keSwgYm9keUI6IEJvZHk7XHJcblxyXG4gICAgICAgIC8vIHdha2UgdXAgYm9kaWVzIGludm9sdmVkIGluIGNvbGxpc2lvbnNcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hbmlmb2xkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBtYW5pZm9sZCA9IG1hbmlmb2xkc1tpXTtcclxuICAgICAgICAgICAgYm9keUEgPSBtYW5pZm9sZC5ib2R5QTtcclxuICAgICAgICAgICAgYm9keUIgPSBtYW5pZm9sZC5ib2R5QjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIOiLpUHkuLrkvJHnnKDnirbmgIHkuJRC55qE5Yqo6YeP5aSn5LqO5LyR55yg6ZiI5YC877yM5ZSk6YaSQVxyXG4gICAgICAgICAgICBpZighYm9keUEuZml4ZWQgJiYgYm9keUEuc2xlZXBpbmcgJiYgYm9keUIubW90aW9uID4gdGhpcy53YWtlTW90aW9uVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndha2UoYm9keUEpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIELlkIznkIbkuIrpnaJcclxuICAgICAgICAgICAgaWYoIWJvZHlCLmZpeGVkICYmIGJvZHlCLnNsZWVwaW5nICYmIGJvZHlBLm1vdGlvbiA+IHRoaXMud2FrZU1vdGlvblRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YWtlKGJvZHlCKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///20\n")},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.ManifoldTable = void 0;\r\nconst manifold_1 = __webpack_require__(7);\r\nconst util_1 = __webpack_require__(0);\r\nclass ManifoldTable {\r\n    constructor(opt) {\r\n        this.enableCache = true;\r\n        this.enableManifoldRemove = true;\r\n        this.manifoldRemoveThreshold = 1000;\r\n        this.table = {};\r\n        this.list = [];\r\n        this.collisionStart = [];\r\n        this.collisionEnd = [];\r\n        this.collisionActive = [];\r\n        util_1.Util.merge(this, opt);\r\n    }\r\n    /**\r\n     * 更新所有流形\r\n     * @param collisions\r\n     * @param timeStamp\r\n     */\r\n    update(collisions, timeStamp) {\r\n        let manifold, id, collision, i;\r\n        this.collisionStart.length = 0;\r\n        this.collisionEnd.length = 0;\r\n        this.collisionActive.length = 0;\r\n        // 清空确认激活状态\r\n        for (i = 0; i < this.list.length; i++) {\r\n            this.list[i].confirmedActive = false;\r\n        }\r\n        for (i = 0; i < collisions.length; i++) {\r\n            collision = collisions[i];\r\n            // 只有真实发生碰撞的碰撞对才会更新对应的流形\r\n            if (collision.collide) {\r\n                id = util_1.Util.compositeId(collision.partA.id, collision.partB.id);\r\n                manifold = this.table[id];\r\n                // 若对应流形存在\r\n                if (manifold) {\r\n                    // 若流形上一刻已经被激活\r\n                    if (manifold.isActive) {\r\n                        this.collisionActive.push(manifold);\r\n                    }\r\n                    // 否则表明该流形第一次发生碰撞\r\n                    else {\r\n                        this.collisionStart.push(manifold);\r\n                    }\r\n                    manifold.update(collision, timeStamp);\r\n                    manifold.confirmedActive = true;\r\n                }\r\n                // 若不存在，则创建对应流形\r\n                else {\r\n                    manifold = new manifold_1.Manifold(collision, timeStamp);\r\n                    this.table[id] = manifold;\r\n                    this.list.push(manifold);\r\n                    this.collisionStart.push(manifold);\r\n                }\r\n            }\r\n        }\r\n        // 遍历查找上一次发生碰撞且当前没有发生碰撞的流形\r\n        for (i = 0; i < this.list.length; i++) {\r\n            manifold = this.list[i];\r\n            // ，将其激活状态取消\r\n            if (manifold.isActive && !manifold.confirmedActive) {\r\n                manifold.toggleActive(false, timeStamp);\r\n                // 标记为碰撞结束\r\n                this.collisionEnd.push(manifold);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 过滤超时的碰撞流形\r\n     * @param timeStamp\r\n     */\r\n    filter(timeStamp) {\r\n        let manifold, i;\r\n        for (i = 0; i < this.list.length; i++) {\r\n            manifold = this.list[i];\r\n            // 若流形的两刚体有其一处于休眠状态，更新事件，不清除\r\n            if (manifold.bodyA.sleeping || manifold.bodyB.sleeping) {\r\n                manifold.timeUpdated = timeStamp;\r\n                continue;\r\n            }\r\n            // 若流形上次更新的时间离现在已经大于设定阈值，则需要清除\r\n            if (timeStamp - manifold.timeUpdated > this.manifoldRemoveThreshold) {\r\n                delete this.table[manifold.id];\r\n                this.list.splice(i, 1);\r\n                i--;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 清空流形表和队列\r\n     */\r\n    clear() {\r\n        this.table = {};\r\n        this.list.length = 0;\r\n        this.collisionStart.length = 0;\r\n        this.collisionEnd.length = 0;\r\n        this.collisionActive.length = 0;\r\n    }\r\n}\r\nexports.ManifoldTable = ManifoldTable;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL21hbmlmb2xkVGFibGUudHM/MzVjOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSwwQ0FBaUQ7QUFDakQsc0NBQXNDO0FBS3RDLE1BQWEsYUFBYTtJQWtCdEIsWUFBWSxHQUFjO1FBQ3RCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUM7UUFDakMsSUFBSSxDQUFDLHVCQUF1QixHQUFHLElBQUksQ0FBQztRQUNwQyxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNmLElBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDO1FBRTFCLFdBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsTUFBTSxDQUFDLFVBQXVCLEVBQUUsU0FBaUI7UUFDN0MsSUFBSSxRQUFrQixFQUNsQixFQUFVLEVBQ1YsU0FBb0IsRUFDcEIsQ0FBQyxDQUFDO1FBRU4sSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUM3QixJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFFaEMsV0FBVztRQUNYLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbkMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLEdBQUcsS0FB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TCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLO1FBQ0QsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUMvQixJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDN0IsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7Q0FDSjtBQXJJRCxzQ0FxSUMiLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbmdpbmVPcHQgfSBmcm9tIFwiLi4vY29yZS9lbmdpbmVcIjtcclxuaW1wb3J0IHsgTWFuaWZvbGQsIENvbGxpc2lvbiB9IGZyb20gXCIuL21hbmlmb2xkXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBNYW5pZm9sZFRhYmxlIHtcclxuICAgIC8vIOaYr+WQpuW8gOWQr+e8k+WtmFxyXG4gICAgZW5hYmxlQ2FjaGU6IGJvb2xlYW47XHJcbiAgICAvLyDmmK/lkKblvIDlkK/nvJPlrZjliLfmlrBcclxuICAgIGVuYWJsZU1hbmlmb2xkUmVtb3ZlOiBib29sZWFuO1xyXG4gICAgLy8g57yT5a2Y56e76Zmk5pe26Ze06ZiI5YC8XHJcbiAgICBtYW5pZm9sZFJlbW92ZVRocmVzaG9sZDogbnVtYmVyO1xyXG4gICAgLy8g5rWB5b2i6KGoXHJcbiAgICB0YWJsZToge1trZXk6IHN0cmluZ106IE1hbmlmb2xkfTtcclxuICAgIC8vIOa1geW9oumYn+WIl1xyXG4gICAgbGlzdDogTWFuaWZvbGRbXTtcclxuICAgIC8vIOW8gOWni+eisOaSnueahOeisOaSnuWvuVxyXG4gICAgY29sbGlzaW9uU3RhcnQ6IE1hbmlmb2xkW107XHJcbiAgICAvLyDmv4DmtLvnorDmkp7nmoTnorDmkp7lr7lcclxuICAgIGNvbGxpc2lvbkFjdGl2ZTogTWFuaWZvbGRbXTtcclxuICAgIC8vIOe7k+adn+eisOaSnueahOeisOaSnuWvuVxyXG4gICAgY29sbGlzaW9uRW5kOiBNYW5pZm9sZFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9wdDogRW5naW5lT3B0KSB7XHJcbiAgICAgICAgdGhpcy5lbmFibGVDYWNoZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lbmFibGVNYW5pZm9sZFJlbW92ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYW5pZm9sZFJlbW92ZVRocmVzaG9sZCA9IDEwMDA7XHJcbiAgICAgICAgdGhpcy50YWJsZSA9IHt9O1xyXG4gICAgICAgIHRoaXMubGlzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uU3RhcnQgPSBbXTtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbkVuZCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uQWN0aXZlID0gW107XHJcblxyXG4gICAgICAgIFV0aWwubWVyZ2UodGhpcywgb3B0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOabtOaWsOaJgOaciea1geW9olxyXG4gICAgICogQHBhcmFtIGNvbGxpc2lvbnMgXHJcbiAgICAgKiBAcGFyYW0gdGltZVN0YW1wIFxyXG4gICAgICovXHJcbiAgICB1cGRhdGUoY29sbGlzaW9uczogQ29sbGlzaW9uW10sIHRpbWVTdGFtcDogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IG1hbmlmb2xkOiBNYW5pZm9sZCxcclxuICAgICAgICAgICAgaWQ6IHN0cmluZyxcclxuICAgICAgICAgICAgY29sbGlzaW9uOiBDb2xsaXNpb24sXHJcbiAgICAgICAgICAgIGk7XHJcblxyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uU3RhcnQubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbkVuZC5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uQWN0aXZlLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIC8vIOa4heepuuehruiupOa/gOa0u+eKtuaAgVxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0W2ldLmNvbmZpcm1lZEFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgY29sbGlzaW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb2xsaXNpb24gPSBjb2xsaXNpb25zW2ldO1xyXG5cclxuICAgICAgICAgICAgLy8g5Y+q5pyJ55yf5a6e5Y+R55Sf56Kw5pKe55qE56Kw5pKe5a+55omN5Lya5pu05paw5a+55bqU55qE5rWB5b2iXHJcbiAgICAgICAgICAgIGlmKGNvbGxpc2lvbi5jb2xsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZCA9IFV0aWwuY29tcG9zaXRlSWQoY29sbGlzaW9uLnBhcnRBLmlkLCBjb2xsaXNpb24ucGFydEIuaWQpO1xyXG4gICAgICAgICAgICAgICAgbWFuaWZvbGQgPSB0aGlzLnRhYmxlW2lkXTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDoi6Xlr7nlupTmtYHlvaLlrZjlnKhcclxuICAgICAgICAgICAgICAgIGlmKG1hbmlmb2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6Iul5rWB5b2i5LiK5LiA5Yi75bey57uP6KKr5r+A5rS7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobWFuaWZvbGQuaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25BY3RpdmUucHVzaChtYW5pZm9sZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWQpuWImeihqOaYjuivpea1geW9ouesrOS4gOasoeWPkeeUn+eisOaSnlxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxpc2lvblN0YXJ0LnB1c2gobWFuaWZvbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWFuaWZvbGQudXBkYXRlKGNvbGxpc2lvbiwgdGltZVN0YW1wKTtcclxuICAgICAgICAgICAgICAgICAgICBtYW5pZm9sZC5jb25maXJtZWRBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g6Iul5LiN5a2Y5Zyo77yM5YiZ5Yib5bu65a+55bqU5rWB5b2iXHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYW5pZm9sZCA9IG5ldyBNYW5pZm9sZChjb2xsaXNpb24sIHRpbWVTdGFtcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZVtpZF0gPSBtYW5pZm9sZDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3QucHVzaChtYW5pZm9sZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uU3RhcnQucHVzaChtYW5pZm9sZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOmBjeWOhuafpeaJvuS4iuS4gOasoeWPkeeUn+eisOaSnuS4lOW9k+WJjeayoeacieWPkeeUn+eisOaSnueahOa1geW9olxyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IHRoaXMubGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBtYW5pZm9sZCA9IHRoaXMubGlzdFtpXTtcclxuXHJcbiAgICAgICAgICAgIC8vIO+8jOWwhuWFtua/gOa0u+eKtuaAgeWPlua2iFxyXG4gICAgICAgICAgICBpZihtYW5pZm9sZC5pc0FjdGl2ZSAmJiAhbWFuaWZvbGQuY29uZmlybWVkQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBtYW5pZm9sZC50b2dnbGVBY3RpdmUoZmFsc2UsIHRpbWVTdGFtcCk7XHJcbiAgICAgICAgICAgICAgICAvLyDmoIforrDkuLrnorDmkp7nu5PmnZ9cclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uRW5kLnB1c2gobWFuaWZvbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6L+H5ruk6LaF5pe255qE56Kw5pKe5rWB5b2iXHJcbiAgICAgKiBAcGFyYW0gdGltZVN0YW1wIFxyXG4gICAgICovXHJcbiAgICBmaWx0ZXIodGltZVN0YW1wOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbWFuaWZvbGQ6IE1hbmlmb2xkLFxyXG4gICAgICAgICAgICBpO1xyXG5cclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbWFuaWZvbGQgPSB0aGlzLmxpc3RbaV07XHJcblxyXG4gICAgICAgICAgICAvLyDoi6XmtYHlvaLnmoTkuKTliJrkvZPmnInlhbbkuIDlpITkuo7kvJHnnKDnirbmgIHvvIzmm7TmlrDkuovku7bvvIzkuI3muIXpmaRcclxuICAgICAgICAgICAgaWYobWFuaWZvbGQuYm9keUEuc2xlZXBpbmcgfHwgbWFuaWZvbGQuYm9keUIuc2xlZXBpbmcpIHtcclxuICAgICAgICAgICAgICAgIG1hbmlmb2xkLnRpbWVVcGRhdGVkID0gdGltZVN0YW1wO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOiLpea1geW9ouS4iuasoeabtOaWsOeahOaXtumXtOemu+eOsOWcqOW3sue7j+Wkp+S6juiuvuWumumYiOWAvO+8jOWImemcgOimgea4hemZpFxyXG4gICAgICAgICAgICBpZih0aW1lU3RhbXAgLSBtYW5pZm9sZC50aW1lVXBkYXRlZCA+IHRoaXMubWFuaWZvbGRSZW1vdmVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRhYmxlW21hbmlmb2xkLmlkXTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGlzdC5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBpLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmuIXnqbrmtYHlvaLooajlkozpmJ/liJdcclxuICAgICAqL1xyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy50YWJsZSA9IHt9O1xyXG4gICAgICAgIHRoaXMubGlzdC5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uU3RhcnQubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbkVuZC5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uQWN0aXZlLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///21\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.BodiesFactory = void 0;\r\nconst circle_1 = __webpack_require__(23);\r\nconst polygon_1 = __webpack_require__(9);\r\nconst rect_1 = __webpack_require__(24);\r\nconst vector_1 = __webpack_require__(1);\r\nconst util_1 = __webpack_require__(0);\r\nclass BodiesFactory {\r\n    /**\r\n     * 创造圆形\r\n     * @param x x\r\n     * @param y y\r\n     * @param radius 半径\r\n     * @param opt 配置项\r\n     */\r\n    Circle(x, y, radius, opt) {\r\n        opt = opt || {};\r\n        util_1.Util.extend(opt, {\r\n            origin: new vector_1.Vector(x, y),\r\n            radius: radius\r\n        });\r\n        return new circle_1.Circle(opt);\r\n        ;\r\n    }\r\n    /**\r\n     * 创造多边形\r\n     * @param x x\r\n     * @param y y\r\n     * @param v 顶点集\r\n     * @param opt 配置项\r\n     */\r\n    Polygon(x, y, v, opt) {\r\n        opt = opt || {};\r\n        let vertices = v.map(vertex => new vector_1.Vector(vertex[0], vertex[1]));\r\n        util_1.Util.extend(opt, {\r\n            origin: new vector_1.Vector(x, y),\r\n            vertices\r\n        });\r\n        return new polygon_1.Polygon(opt);\r\n    }\r\n    /**\r\n     * 创造矩形\r\n     * @param x x\r\n     * @param y y\r\n     * @param width 宽\r\n     * @param height 高\r\n     * @param opt 配置项\r\n     */\r\n    Rect(x, y, width, height, opt) {\r\n        opt = opt || {};\r\n        util_1.Util.extend(opt, {\r\n            origin: new vector_1.Vector(x, y),\r\n            width,\r\n            height\r\n        });\r\n        return new rect_1.Rect(opt);\r\n    }\r\n}\r\nexports.BodiesFactory = BodiesFactory;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9ib2RpZXNGYWN0b3J5LnRzPzE2ZmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEseUNBQW1EO0FBQ25ELHlDQUFzRDtBQUN0RCx1Q0FBNkM7QUFDN0Msd0NBQXdDO0FBQ3hDLHNDQUFzQztBQUl0QyxNQUFhLGFBQWE7SUFFdEI7Ozs7OztPQU1HO0lBQ0gsTUFBTSxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsTUFBYyxFQUFFLEdBQWU7UUFDeEQsR0FBRyxHQUFHLEdBQUcsSUFBZSxFQUFFLENBQUM7UUFFM0IsV0FBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUU7WUFDYixNQUFNLEVBQUUsSUFBSSxlQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN4QixNQUFNLEVBQUUsTUFBTTtTQUNqQixDQUFDLENBQUM7UUFFSCxPQUFPLElBQUksZUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQUEsQ0FBQztJQUM1QixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsT0FBTyxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsQ0FBa0IsRUFBRSxHQUFnQjtRQUM5RCxHQUFHLEdBQUcsR0FBRyxJQUFnQixFQUFFLENBQUM7UUFFNUIsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLElBQUksZUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWpFLFdBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFO1lBQ2IsTUFBTSxFQUFFLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDeEIsUUFBUTtTQUNYLENBQUMsQ0FBQztRQUVILE9BQU8sSUFBSSxpQkFBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsSUFBSSxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsS0FBYSxFQUFFLE1BQWMsRUFBRSxHQUFhO1FBQ25FLEdBQUcsR0FBRyxHQUFHLElBQWEsRUFBRSxDQUFDO1FBRXpCLFdBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFO1lBQ2IsTUFBTSxFQUFFLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDeEIsS0FBSztZQUNMLE1BQU07U0FDVCxDQUFDLENBQUM7UUFFSCxPQUFPLElBQUksV0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3pCLENBQUM7Q0FDSjtBQTNERCxzQ0EyREMiLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaXJjbGUsIENpcmNsZU9wdCB9IGZyb20gXCIuLi9ib2R5L2NpcmNsZVwiO1xyXG5pbXBvcnQgeyBQb2x5Z29uLCBQb2x5Z29uT3B0IH0gZnJvbSBcIi4uL2JvZHkvcG9seWdvblwiO1xyXG5pbXBvcnQgeyBSZWN0LCBSZWN0T3B0IH0gZnJvbSBcIi4uL2JvZHkvcmVjdFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi9jb21tb24vdXRpbFwiO1xyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQm9kaWVzRmFjdG9yeSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvpgKDlnIblvaJcclxuICAgICAqIEBwYXJhbSB4IHhcclxuICAgICAqIEBwYXJhbSB5IHlcclxuICAgICAqIEBwYXJhbSByYWRpdXMg5Y2K5b6EIFxyXG4gICAgICogQHBhcmFtIG9wdCDphY3nva7poblcclxuICAgICAqL1xyXG4gICAgQ2lyY2xlKHg6IG51bWJlciwgeTogbnVtYmVyLCByYWRpdXM6IG51bWJlciwgb3B0PzogQ2lyY2xlT3B0KTogQ2lyY2xlIHtcclxuICAgICAgICBvcHQgPSBvcHQgfHwgPENpcmNsZU9wdD57fTtcclxuXHJcbiAgICAgICAgVXRpbC5leHRlbmQob3B0LCB7XHJcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IFZlY3Rvcih4LCB5KSxcclxuICAgICAgICAgICAgcmFkaXVzOiByYWRpdXNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGUob3B0KTs7XHJcbiAgICB9ICAgXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvpgKDlpJrovrnlvaJcclxuICAgICAqIEBwYXJhbSB4IHhcclxuICAgICAqIEBwYXJhbSB5IHlcclxuICAgICAqIEBwYXJhbSB2IOmhtueCuembhiBcclxuICAgICAqIEBwYXJhbSBvcHQg6YWN572u6aG5XHJcbiAgICAgKi9cclxuICAgIFBvbHlnb24oeDogbnVtYmVyLCB5OiBudW1iZXIsIHY6IEFycmF5PG51bWJlcltdPiwgb3B0PzogUG9seWdvbk9wdCk6IFBvbHlnb24ge1xyXG4gICAgICAgIG9wdCA9IG9wdCB8fCA8UG9seWdvbk9wdD57fTtcclxuXHJcbiAgICAgICAgbGV0IHZlcnRpY2VzID0gdi5tYXAodmVydGV4ID0+IG5ldyBWZWN0b3IodmVydGV4WzBdLCB2ZXJ0ZXhbMV0pKTtcclxuXHJcbiAgICAgICAgVXRpbC5leHRlbmQob3B0LCB7XHJcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IFZlY3Rvcih4LCB5KSxcclxuICAgICAgICAgICAgdmVydGljZXNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5Z29uKG9wdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvpgKDnn6nlvaJcclxuICAgICAqIEBwYXJhbSB4IHggXHJcbiAgICAgKiBAcGFyYW0geSB5XHJcbiAgICAgKiBAcGFyYW0gd2lkdGgg5a69IFxyXG4gICAgICogQHBhcmFtIGhlaWdodCDpq5hcclxuICAgICAqIEBwYXJhbSBvcHQg6YWN572u6aG5XHJcbiAgICAgKi9cclxuICAgIFJlY3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBvcHQ/OiBSZWN0T3B0KTogUmVjdCB7XHJcbiAgICAgICAgb3B0ID0gb3B0IHx8IDxSZWN0T3B0Pnt9O1xyXG5cclxuICAgICAgICBVdGlsLmV4dGVuZChvcHQsIHtcclxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgVmVjdG9yKHgsIHkpLFxyXG4gICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUmVjdChvcHQpO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///22\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Circle = void 0;\r\nconst body_1 = __webpack_require__(8);\r\nconst arcs_1 = __webpack_require__(4);\r\nclass Circle extends body_1.Body {\r\n    constructor(opt) {\r\n        super(opt, body_1.bodyType.circle);\r\n        this.arc = this.getArc();\r\n        this.parts = [this.arc];\r\n        this.bound = this.arc.bound;\r\n    }\r\n    getArea() {\r\n        return Math.PI * this.radius * this.radius;\r\n    }\r\n    getCentroid() {\r\n        return this.origin.col();\r\n    }\r\n    getInertia() {\r\n        return 0.5 * this.mass * Math.pow(this.radius, 2);\r\n    }\r\n    /**\r\n     * 获取圆形信息包\r\n     */\r\n    getArc() {\r\n        return arcs_1.Arcs.create(this);\r\n    }\r\n    translate(distance) {\r\n        // 位移图形原点\r\n        this.origin.x += distance.x;\r\n        this.origin.y += distance.y;\r\n        // 位移圆形\r\n        arcs_1.Arcs.translate(this.arc, distance);\r\n    }\r\n}\r\nexports.Circle = Circle;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9keS9jaXJjbGUudHM/NWFiNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxzQ0FBaUQ7QUFHakQsc0NBQTJDO0FBWTNDLE1BQWEsTUFBTyxTQUFRLFdBQUk7SUFLNUIsWUFBWSxHQUFjO1FBQ3RCLEtBQUssQ0FBQyxHQUFHLEVBQUUsZUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRTVCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQztJQUNoQyxDQUFDO0lBRUQsT0FBTztRQUNILE9BQU8sSUFBSSxDQUFDLEVBQUUsR0FBQyxJQUFJLENBQUMsTUFBTSxHQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDM0MsQ0FBQztJQUVELFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDN0IsQ0FBQztJQUVELFVBQVU7UUFDTixPQUFPLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNO1FBQ0YsT0FBTyxXQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxTQUFTLENBQUMsUUFBZ0I7UUFDdEIsU0FBUztRQUNULElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQztRQUU1QixPQUFPO1FBQ1AsV0FBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7Q0FDSjtBQXhDRCx3QkF3Q0MiLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb2R5LCBCb2R5T3B0LCBib2R5VHlwZSB9IGZyb20gXCIuL2JvZHlcIjtcclxuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IEJvdW5kIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9ib3VuZFwiO1xyXG5pbXBvcnQgeyBBcmMsIEFyY3MgfSBmcm9tIFwiLi4vY29tbW9uL2FyY3NcIjtcclxuXHJcbi8qKlxyXG4gKiDlnIblvaLliJrkvZNcclxuICovXHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDaXJjbGVPcHQgZXh0ZW5kcyBCb2R5T3B0IHtcclxuICAgIHJhZGl1czogbnVtYmVyO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIENpcmNsZSBleHRlbmRzIEJvZHkge1xyXG4gICAgLy8g5Y2K5b6EXHJcbiAgICByYWRpdXM6IG51bWJlcjtcclxuICAgIGFyYzogQXJjO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9wdDogQ2lyY2xlT3B0KSB7XHJcbiAgICAgICAgc3VwZXIob3B0LCBib2R5VHlwZS5jaXJjbGUpO1xyXG5cclxuICAgICAgICB0aGlzLmFyYyA9IHRoaXMuZ2V0QXJjKCk7XHJcbiAgICAgICAgdGhpcy5wYXJ0cyA9IFt0aGlzLmFyY107XHJcbiAgICAgICAgdGhpcy5ib3VuZCA9IHRoaXMuYXJjLmJvdW5kO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFyZWEoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5QSSp0aGlzLnJhZGl1cyp0aGlzLnJhZGl1cztcclxuICAgIH1cclxuXHJcbiAgICBnZXRDZW50cm9pZCgpOiBWZWN0b3Ige1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbi5jb2woKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbmVydGlhKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDAuNSAqIHRoaXMubWFzcyAqIE1hdGgucG93KHRoaXMucmFkaXVzLCAyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluWchuW9ouS/oeaBr+WMhVxyXG4gICAgICovXHJcbiAgICBnZXRBcmMoKTogQXJjIHtcclxuICAgICAgICByZXR1cm4gQXJjcy5jcmVhdGUodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJhbnNsYXRlKGRpc3RhbmNlOiBWZWN0b3IpIHtcclxuICAgICAgICAvLyDkvY3np7vlm77lvaLljp/ngrlcclxuICAgICAgICB0aGlzLm9yaWdpbi54ICs9IGRpc3RhbmNlLng7XHJcbiAgICAgICAgdGhpcy5vcmlnaW4ueSArPSBkaXN0YW5jZS55O1xyXG5cclxuICAgICAgICAvLyDkvY3np7vlnIblvaJcclxuICAgICAgICBBcmNzLnRyYW5zbGF0ZSh0aGlzLmFyYywgZGlzdGFuY2UpO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///23\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\n/**\r\n * 矩形刚体\r\n */\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Rect = void 0;\r\nconst polygon_1 = __webpack_require__(9);\r\nconst vector_1 = __webpack_require__(1);\r\nconst vertices_1 = __webpack_require__(2);\r\nclass Rect extends polygon_1.Polygon {\r\n    constructor(opt) {\r\n        super(opt);\r\n    }\r\n    getPoly() {\r\n        let leftTop = this.origin.col(), rightTop = leftTop.add(new vector_1.Vector(this.width, 0)), rightBottom = leftTop.add(new vector_1.Vector(this.width, this.height)), leftBottom = leftTop.add(new vector_1.Vector(0, this.height)), poly = vertices_1.Vertices.create(this, [leftTop, rightTop, rightBottom, leftBottom]);\r\n        // 筛选矩形的轴\r\n        poly.axes = vertices_1.Vertices.uniqueAxes(poly.axes);\r\n        return poly;\r\n    }\r\n    getArea() {\r\n        return this.width * this.height;\r\n    }\r\n    getCentroid() {\r\n        return this.origin.add(new vector_1.Vector(this.width / 2, this.height / 2));\r\n    }\r\n    getInertia() {\r\n        return this.mass * (this.width * this.width + this.height * this.height) / 12;\r\n    }\r\n}\r\nexports.Rect = Rect;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9keS9yZWN0LnRzPzJkYWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOzs7QUFFSCx5Q0FBZ0Q7QUFDaEQsd0NBQXdDO0FBQ3hDLDBDQUFvRDtBQVVwRCxNQUFhLElBQUssU0FBUSxpQkFBTztJQU03QixZQUFZLEdBQVk7UUFDcEIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQztJQUVELE9BQU87UUFDSCxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxFQUMzQixRQUFRLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLGVBQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQ2pELFdBQVcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksZUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQzlELFVBQVUsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFDcEQsSUFBSSxHQUFHLG1CQUFRLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFFM0UsU0FBUztRQUNULElBQUksQ0FBQyxJQUFJLEdBQUcsbUJBQVEsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRS9DLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxPQUFPO1FBQ0gsT0FBTyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDcEMsQ0FBQztJQUVELFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksZUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4RSxDQUFDO0lBRUQsVUFBVTtRQUNOLE9BQU8sSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDbEYsQ0FBQztDQUNKO0FBbENELG9CQWtDQyIsImZpbGUiOiIyNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDnn6nlvaLliJrkvZNcclxuICovXHJcblxyXG5pbXBvcnQgeyBQb2x5Z29uLCBQb2x5Z29uT3B0IH0gZnJvbSBcIi4vcG9seWdvblwiO1xyXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgUG9seSwgVmVydGljZXMgfSBmcm9tIFwiLi4vY29tbW9uL3ZlcnRpY2VzXCI7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVjdE9wdCBleHRlbmRzIFBvbHlnb25PcHQge1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFJlY3QgZXh0ZW5kcyBQb2x5Z29uIHtcclxuICAgIC8vIOWuvVxyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIC8vIOmrmFxyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0OiBSZWN0T3B0KSB7XHJcbiAgICAgICAgc3VwZXIob3B0KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQb2x5KCk6IFBvbHkge1xyXG4gICAgICAgIGxldCBsZWZ0VG9wID0gdGhpcy5vcmlnaW4uY29sKCksXHJcbiAgICAgICAgICAgIHJpZ2h0VG9wID0gbGVmdFRvcC5hZGQobmV3IFZlY3Rvcih0aGlzLndpZHRoLCAwKSksXHJcbiAgICAgICAgICAgIHJpZ2h0Qm90dG9tID0gbGVmdFRvcC5hZGQobmV3IFZlY3Rvcih0aGlzLndpZHRoLCB0aGlzLmhlaWdodCkpLFxyXG4gICAgICAgICAgICBsZWZ0Qm90dG9tID0gbGVmdFRvcC5hZGQobmV3IFZlY3RvcigwLCB0aGlzLmhlaWdodCkpLFxyXG4gICAgICAgICAgICBwb2x5ID0gVmVydGljZXMuY3JlYXRlKHRoaXMsIFtsZWZ0VG9wLCByaWdodFRvcCwgcmlnaHRCb3R0b20sIGxlZnRCb3R0b21dKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOetm+mAieefqeW9oueahOi9tFxyXG4gICAgICAgICAgICBwb2x5LmF4ZXMgPSBWZXJ0aWNlcy51bmlxdWVBeGVzKHBvbHkuYXhlcyk7XHJcblxyXG4gICAgICAgIHJldHVybiBwb2x5O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFyZWEoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWR0aCAqIHRoaXMuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldENlbnRyb2lkKCk6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luLmFkZChuZXcgVmVjdG9yKHRoaXMud2lkdGggLyAyLCB0aGlzLmhlaWdodCAvIDIpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbmVydGlhKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFzcyAqICh0aGlzLndpZHRoICogdGhpcy53aWR0aCArIHRoaXMuaGVpZ2h0ICogdGhpcy5oZWlnaHQpIC8gMTI7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///24\n')}])}));